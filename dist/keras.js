!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.KerasJS=t():e.KerasJS=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,t,r){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=309)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var r=t.slice(1),n=e[t[0]];return function(e,t,o){n.apply(this,[e,t,o].concat(r))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(11),s=n(a),u=r(39),l=n(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.layerClass="Layer",this.name=t.name,this.params=[],this.weights={},t.gpu&&weblas?this._useWeblas=!0:this._useWeblas=!1}return i(e,[{key:"setWeights",value:function(e){var t=this;this.params.forEach(function(r,n){t.weights[r]=e[n]})}},{key:"toggleGpu",value:function(e){var t="undefined"==typeof e?!this._useWeblas:e;t&&weblas?this._useWeblas=!0:this._useWeblas=!1}},{key:"call",value:function(e){return e}},{key:"createWeblasWeights",value:function(){var e=this;this.weblasWeights={},this.params.forEach(function(t,r){if(1===e.weights[t].tensor.shape.length){var n=[1,e.weights[t].tensor.shape[0]];e.weblasWeights[t]=new weblas.pipeline.Tensor(n,e.weights[t].tensor.data)}if(2===e.weights[t].tensor.shape.length){var o=e.weights[t].tensor.shape;e.weblasWeights[t]=new weblas.pipeline.Tensor(o,e.weights[t].tensor.data)}})}},{key:"transferWeblasWeights",value:function(){var e=this;this.params.forEach(function(t,r){if(e.weblasWeights[t]){var n=e.weblasWeights[t].shape,o=e.weblasWeights[t].transfer(!0);e.weights[t].tensor=(0,l.default)((0,s.default)(o,n))}})}},{key:"deleteWeblasWeights",value:function(){var e=this;this.params.forEach(function(t,r){e.weblasWeights[t]&&(e.weblasWeights[t].delete(),delete e.weblasWeights[t])}),delete this.weblasWeights}}]),e}();t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(11),s=n(a),u=r(39),l=n(u),c=r(74),f=function(e,t){if(e.length&&t.length&&e.length!==t.reduce(function(e,t){return e*t},1))throw new Error("Specified shape incompatible with data.")},p=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this._type=n.type||Float32Array,t&&t.length&&(t instanceof this._type||t instanceof Array)?(f(t,r),this.tensor=(0,s.default)(t,r),this.tensor=(0,s.default)(new this._type(t),r)):!t.length&&r.length?this.tensor=(0,s.default)(new this._type(r.reduce(function(e,t){return e*t},1)),r):this.tensor=(0,s.default)(new this._type([]),[])}return i(e,[{key:"createWeblasTensor",value:function(){if(this.weblasTensor&&this.weblasTensor.delete(),this.weblasTensorsSplit&&this.weblasTensorsSplit.forEach(function(e){return e.delete()}),1===this.tensor.shape.length){var e=this.tensor.shape[0];if(e>c.MAX_TEXTURE_SIZE){this.weblasTensorsSplit=[];for(var t=Math.ceil(c.MAX_TEXTURE_SIZE/e),r=0;r<t;r++){var n=r*Math.round(e/t),o=Math.min(e,(r+1)*Math.round(e/t)),i=[1,o-n];this.weblasTensorsSplit.push(new weblas.pipeline.Tensor(i,this.tensor.data.subarray(n,o-n)))}}else{var a=[1,e];this.weblasTensor=new weblas.pipeline.Tensor(a,this.tensor.data)}}else{if(2!==this.tensor.shape.length)throw new Error("[Tensor] can only create weblas Tensor for 1-D or 2-D only");if(this.tensor.shape.every(function(e){return e>c.MAX_TEXTURE_SIZE}))throw new Error("[Tensor] cannot create Tensor with both dimensions exceeding MAX_TEXTURE_SIZE");var s=this.tensor.shape[0],u=this.tensor.shape[1];if(s>c.MAX_TEXTURE_SIZE){this.weblasTensorsSplit=[];for(var l=Math.ceil(s/c.MAX_TEXTURE_SIZE),f=0;f<l;f++){var p=f*c.MAX_TEXTURE_SIZE,h=Math.min(s,(f+1)*c.MAX_TEXTURE_SIZE),d=[h-p,u];this.weblasTensorsSplit.push(new weblas.pipeline.Tensor(d,this.tensor.data.subarray(p*u,h*u)))}}else if(u>c.MAX_TEXTURE_SIZE){this.weblasTensorsSplit=[];for(var v=Math.ceil(u/c.MAX_TEXTURE_SIZE),y=0;y<v;y++){var _=y*c.MAX_TEXTURE_SIZE,b=Math.min(u,(y+1)*c.MAX_TEXTURE_SIZE),g=[s,b-_];this.weblasTensorsSplit.push(new weblas.pipeline.Tensor(g,this.tensor.data.slice(s*_,s*b)))}}else{var m=this.tensor.shape;this.weblasTensor=new weblas.pipeline.Tensor(m,this.tensor.data)}}}},{key:"transferWeblasTensor",value:function(){if(this.weblasTensor){var e=this.weblasTensor.shape,t=this.weblasTensor.transfer(!0);this.tensor=(0,l.default)((0,s.default)(t,e))}}},{key:"deleteWeblasTensor",value:function(){this.weblasTensor&&(this.weblasTensor.delete(),delete this.weblasTensor)}},{key:"replaceTensorData",value:function(e){if(e&&e.length&&e instanceof this._type)this.tensor.data=e;else{if(!(e&&e.length&&e instanceof Array))throw new Error("[Tensor] invalid input for replaceTensorData method.");this.tensor.data=new this._type(e)}}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];0===t?e.args[t]={name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){return a({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function i(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(o(e))}var a=r(294),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var r=u[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var r=l[e];t[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:e}),t[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var r=c[e];t[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:e}),t[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:e+"s"}),t[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var r=f[e];t[r]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),t[r+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var p=["max","min","atan2","pow"];!function(){for(var e=0;e<p.length;++e){var r=p[e];t[r]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),t[r+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),t[r+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var r=h[e];t[r+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),t[r+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),t[r+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),t[r+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),t.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(1===e.tensor.shape.length){var t=h.default.sup(e.tensor);h.default.subseq(e.tensor,t),h.default.expeq(e.tensor);var r=h.default.sum(e.tensor);h.default.divseq(e.tensor,r)}else{if(2!==e.tensor.shape.length)throw new Error("[activations.softmax] tensor shape "+e.tensor.shape+" not supported.");for(var n=0;n<e.tensor.shape[0];n++){var o=h.default.sup(e.tensor.pick(n,null));h.default.subseq(e.tensor.pick(n,null),o),h.default.expeq(e.tensor.pick(n,null));var i=h.default.sum(e.tensor.pick(n,null));h.default.divseq(e.tensor.pick(n,null),i)}}return this}function i(e){return b(e.tensor),this}function a(e){return g(e.tensor),this}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.alpha,n=void 0===r?0:r,o=t.maxValue,i=void 0===o?null:o,a=void 0;return 0!==n&&(a=new _.default([],e.tensor.shape),h.default.mins(a.tensor,e.tensor,0),h.default.mulseq(a.tensor,n)),h.default.maxseq(e.tensor,0),i&&h.default.minseq(e.tensor,i),a&&h.default.addeq(e.tensor,a.tensor),this}function u(e){return m(e.tensor),this}function l(e){return w(e.tensor),this}function c(e){return x(e.tensor),this}function f(e){return this}Object.defineProperty(t,"__esModule",{value:!0}),t.softmax=o,t.softplus=i,t.softsign=a,t.relu=s,t.tanh=u,t.sigmoid=l,t.hardSigmoid=c,t.linear=f;var p=r(2),h=n(p),d=r(4),v=n(d),y=r(1),_=n(y),b=(0,v.default)({args:["array"],body:function(e){e=Math.log(Math.exp(e)+1)}}),g=(0,v.default)({args:["array"],body:function(e){e/=1+Math.abs(e)}}),m=(0,v.default)({args:["array"],body:function(e){e=Math.tanh(e)}}),w=(0,v.default)({args:["array"],body:function(e){e=1/(1+Math.exp(-e))}}),x=(0,v.default)({args:["array"],body:function(e){e=.2*e+.5,e<=0?e=0:e>=1&&(e=1)}})},function(e,t,r){"use strict";function n(e){for(var t in e)a.indexOf(t)<0&&s.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<a.length;++r)if(!e[a[r]])throw new Error("cwise: Missing argument: "+a[r]);return i({args:e.args,pre:o(e.pre||function(){}),body:o(e.body),post:o(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var o=r(135),i=r(131),a=["args","body"],s=["pre","post","printCode","funcName","blockSize"];e.exports=n},function(e,t,r){var n=r(56),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){function n(e,t){var r=i(e,t);return o(r)?r:void 0}var o=r(162),i=r(196);e.exports=n},function(e,t,r){function n(e){return a(e)?o(e):i(e)}var o=r(147),i=r(164),a=r(24);e.exports=n},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){"use strict";e.exports.gemv=r(263),e.exports.gbmv=r(262),e.exports.symv=r(279),e.exports.sbmv=r(275),e.exports.spmv=r(276),e.exports.trmv=r(285),e.exports.tbmv=r(282),e.exports.trsv=r(286),e.exports.tbsv=r(283),e.exports.tpsv=r(284),e.exports.ger=r(264),e.exports.syr=r(280),e.exports.spr=r(277),e.exports.syr2=r(281),e.exports.spr2=r(278),e.exports.trmv_lower=function(t,r){return console.warn("trmv_lower is deprecated. Please use the 'isLower' flag with trmv."),e.exports.trmv(t,r,!0)},e.exports.trsv_lower=function(t,r){return console.warn("trsv_lower is deprecated. Please use the 'isLower' flag with trsv."),e.exports.trsv(t,r,!0)}},function(e,t,r){function n(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var o=new Array(r.length);for(e=0;e<o.length;++e)o[e]=r[e][1];return o}function i(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(t===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(i);return a()}if(0===t){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",i);return a(f[e][0])}var i=["'use strict'"],s=u(t),l=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),p=s.map(function(e){return"b"+e}).join(","),h=s.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+p+","+h+",d){this.data=a","this.shape=["+p+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?i.push("return this.data.set("+c+",v)}"):i.push("return this.data["+c+"]=v}"),i.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?i.push("return this.data.get("+c+")}"):i.push("return this.data["+c+"]}"),i.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}"),i.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),v=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+v.join(","));for(var y=0;y<t;++y)i.push("if(typeof i"+y+"==='number'&&i"+y+">=0){d=i"+y+"|0;b+=c"+y+"*d;a"+y+"-=d}");i.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var y=0;y<t;++y)i.push("if(typeof i"+y+"==='number'){d=i"+y+"|0;if(d<0){c+=b"+y+"*(a"+y+"-1);a"+y+"=ceil(-a"+y+"/d)}else{a"+y+"=ceil(a"+y+"/d)}b"+y+"*=d}");i.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var _=new Array(t),b=new Array(t),y=0;y<t;++y)_[y]="a[i"+y+"]",b[y]="b[i"+y+"]";i.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+_.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var y=0;y<t;++y)i.push("if(typeof i"+y+"==='number'&&i"+y+">=0){c=(c+this.stride["+y+"]*i"+y+")|0}else{a.push(this.shape["+y+"]);b.push(this.stride["+y+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",i.join("\n"));return a(f[e],o)}function a(e){if(l(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,r,n){if(void 0===e){var o=f.array[0];return o([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var u=s-1,l=1;u>=0;--u)r[u]=l,l*=t[u]}if(void 0===n){n=0;for(var u=0;u<s;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var c=a(e),p=f[c];p.length<=s+1;)p.push(i(c,p.length-1));var o=p[s+1];return o(e,t,r,n)}var u=r(304),l=r(305),c="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=r(25),i=1/0;e.exports=n},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t,r){function n(e){return null==e?"":o(e)}var o=r(178);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},f=r(3),p=o(f),h=r(1),d=n(h),v=r(0),y=n(v),_=r(2),b=n(_),g=r(27),m=n(g),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Convolution2D";var n=e.nbFilter,o=void 0===n?1:n,s=e.nbRow,u=void 0===s?3:s,l=e.nbCol,c=void 0===l?3:l,f=e.activation,h=void 0===f?"linear":f,d=e.borderMode,v=void 0===d?"valid":d,y=e.subsample,_=void 0===y?[1,1]:y,b=e.dimOrdering,g=void 0===b?"tf":b,m=e.bias,w=void 0===m||m;if(r.kernelShape=[o,u,c],r.activation=p[h],"valid"!==v&&"same"!==v)throw new Error(r.name+" [Convolution2D layer] Invalid borderMode.");if(r.borderMode=v,r.subsample=_,"tf"!==g&&"th"!==g)throw new Error(r.name+" [Convolution2D layer] Only tf and th dim ordering are allowed.");return r.dimOrdering=g,r.bias=w,r.params=r.bias?["W","b"]:["W"],r}return s(t,e),l(t,[{key:"setWeights",value:function(e){"th"===this.dimOrdering&&(e[0].tensor=e[0].tensor.transpose(2,3,1,0)),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWeights",this).call(this,e),this._w2row(),this._useWeblas&&(this._wRowsMat.createWeblasTensor(),this._wRowsMat.weblasTensor=this._wRowsMat.weblasTensor.transpose(),this.bias?this.weights.b.createWeblasTensor():(this._zerosVec=new d.default([],[this.weights.W.tensor.shape[3]]),this._zerosVec.createWeblasTensor()))}},{key:"_calcOutputShape",value:function(e){var t=e.tensor.shape[0],r=e.tensor.shape[1],n=u(this.kernelShape,3),o=n[0],i=n[1],a=n[2],s="same"===this.borderMode?Math.floor((t+this.subsample[0]-1)/this.subsample[0]):Math.floor((t-i+this.subsample[0])/this.subsample[0]),l="same"===this.borderMode?Math.floor((r+this.subsample[1]-1)/this.subsample[1]):Math.floor((r-a+this.subsample[1])/this.subsample[1]),c=o,f="same"===this.borderMode?Math.max(0,Math.floor((s-1)*this.subsample[0]+i-t)):0,p="same"===this.borderMode?Math.max(0,Math.floor((l-1)*this.subsample[1]+a-r)):0,h=Math.floor(f/2),d=f-h,v=Math.floor(p/2),y=p-v;this.outputShape=[s,l,c],this.inputPadding=[h,d,v,y]}},{key:"_padInput",value:function(e){if("same"===this.borderMode){var t=u(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=u(this.inputPadding,4),a=i[0],s=i[1],l=i[2],c=i[3],f=r+a+s,p=n+l+c,h=new d.default([],[f,p,o]);b.default.assign(h.tensor.hi(r+a,n+l,o).lo(a,l,0),e.tensor),e.tensor=h.tensor}return e}},{key:"_im2col",value:function(e){var t=u(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=this.kernelShape[1],a=this.kernelShape[2],s=this.outputShape[0],l=this.outputShape[1],c=s*l,f=i*a*o;if(this._imColsMat||(this._imColsMat=new d.default([],[c,f])),1===i&&1===a&&1===this.subsample[0]&&1===this.subsample[1])return this._imColsMat.replaceTensorData(e.tensor.data),this._useWeblas&&this._imColsMat.createWeblasTensor(),this._imColsMat;for(var p=new d.default([],[i,a,o]),h=new d.default([],[f]),v=0,y=0,_=r-i;y<=_;y+=this.subsample[0])for(var g=0,m=n-a;g<=m;g+=this.subsample[1])b.default.assign(p.tensor,e.tensor.hi(y+i,g+a,o).lo(y,g,0)),h.replaceTensorData(p.tensor.data),b.default.assign(this._imColsMat.tensor.pick(v,null),h.tensor),v+=1;return this._useWeblas&&this._imColsMat.createWeblasTensor(),this._imColsMat}},{key:"_w2row",value:function(){var e=this.weights.W.tensor.shape[2],t=u(this.kernelShape,3),r=t[0],n=t[1],o=t[2],i=n*o*e;this._wRowsMat=new d.default([],[i,r]);for(var a=new d.default([],[n,o,e]),s=new d.default([],[i]),l=0;l<r;l++)b.default.assign(a.tensor,this.weights.W.tensor.pick(null,null,null,l)),s.replaceTensorData(a.tensor.data),b.default.assign(this._wRowsMat.tensor.pick(null,l),s.tensor);return this._wRowsMat}},{key:"call",value:function(e){var t=this;"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0)),this._calcOutputShape(e),this._padInput(e),this._im2col(e);var r=this.kernelShape[0],n=this.outputShape[0],o=this.outputShape[1],i=n*o,a=new d.default([],[i,r]);if(this._useWeblas)!function(){var e=t.bias?t.weights.b.weblasTensor:t._zerosVec.weblasTensor;t._imColsMat.weblasTensorsSplit?!function(){var r=0;t._imColsMat.weblasTensorsSplit.forEach(function(n){var o=weblas.pipeline.sgemm(1,n,t._wRowsMat.weblasTensor,1,e).transfer();a.tensor.data.set(o,r),r+=o.length})}():a.tensor.data=weblas.pipeline.sgemm(1,t._imColsMat.weblasTensor,t._wRowsMat.weblasTensor,1,e).transfer()}();else{if(this.bias)for(var s=0;s<r;s++)b.default.assigns(a.tensor.pick(null,s),this.weights.b.tensor.get(s));(0,m.default)(a.tensor,this._imColsMat.tensor,this._wRowsMat.tensor,1,1)}for(var u=new d.default([],this.outputShape),l=new d.default([],[n*o]),c=new d.default([],[n,o]),f=0;f<r;f++)b.default.assign(l.tensor,a.tensor.pick(null,f)),c.replaceTensorData(l.tensor.data),b.default.assign(u.tensor.pick(null,null,f),c.tensor);return e.tensor=u.tensor,this.activation(e),"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(2,0,1)),e}}]),t}(y.default);t.default=w},function(e,t,r){function n(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){
var n=e[t];this.set(n[0],n[1])}}var o=r(208),i=r(209),a=r(210),s=r(211),u=r(212);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=u,e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}e.exports=r},function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=r(34);e.exports=n},function(e,t,r){function n(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):o(e):u(e)}var o=r(165),i=r(166),a=r(35),s=r(6),u=r(253);e.exports=n},function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=r(205);e.exports=n},function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=r(6),i=r(25),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=n},function(e,t,r){var n=r(7),o=n(Object,"create");e.exports=o},function(e,t,r){function n(e){return null!=e&&i(e.length)&&!o(e)}var o=r(66),i=r(38);e.exports=n},function(e,t,r){function n(e){return"symbol"==typeof e||o(e)&&s.call(e)==i}var o=r(14),i="[object Symbol]",a=Object.prototype,s=a.toString;e.exports=n},function(e,t,r){"use strict";e.exports.swap=r(274),e.exports.scal=r(273),e.exports.copy=r(267),e.exports.axpy=r(266),e.exports.dot=r(269),e.exports.cpsc=r(268),e.exports.nrm2=r(271),e.exports.asum=r(265),e.exports.iamax=r(270),e.exports.rotg=r(272)},function(e,t,r){"use strict";function n(e){return Array.isArray(e)?[e.length,e[0].length]:e.shape}function o(e,t,r){var o=n(e),i=n(t),a=n(r);if(o[0]!==i[0]||o[1]!==a[1]||i[1]!==a[0])throw new Error("Mismatched array shapes for matrix product")}function i(e){if(Array.isArray(e)){if(Array.isArray(e))return["r","native"]}else if(e.shape&&2===e.shape.length)return e.order[0]?["r",e.dtype]:["c",e.dtype];throw new Error("Unrecognized data type")}function a(e,t,r,n,a){void 0===n&&(n=1),void 0===a&&(a=0);var l=1!==n,c=0!==a,f=i(e),p=i(t),h=i(r);o(e,t,r);var d=[f,p,h,l,c].join(":"),v=u[d];return v||(v=u[d]=s(f,p,h,l,c)),v(e,t,r,n,a)}e.exports=a;var s=r(293),u={}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,configurable:!1,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,configurable:!1,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(7),o=r(5),i=n(o,"Map");e.exports=i},function(e,t,r){function n(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(213),i=r(214),a=r(215),s=r(216),u=r(217);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=u,e.exports=n},function(e,t,r){var n=r(5),o=n.Symbol;e.exports=o},function(e,t,r){function n(e,t,r,s,u){return e===t||(null==e||null==t||!i(e)&&!a(t)?e!==e&&t!==t:o(e,t,n,r,s,u))}var o=r(160),i=r(9),a=r(14);e.exports=n},function(e,t){function r(e,t){return t=null==t?n:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){var n=r(159),o=r(14),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,r){function n(e,t){return o(e,t)}var o=r(32);e.exports=n},function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=r},function(e,t,r){"use strict";function n(e,t){var r,n=[],i=[];if(void 0!==t&&!Array.isArray(t))throw new Error("axes must be an Array list of dimensions to squeeze");for(r=0;r<e.shape.length;r++)(1!==e.shape[r]||void 0!==t&&t.indexOf(r)===-1)&&(n.push(e.shape[r]),i.push(e.stride[r]));return o(e.data,n,i,e.offset)}var o=r(11);e.exports=n},function(e,t,r){"use strict";function n(e,t){var r,n;if(void 0!==t&&(!Number.isFinite(t)||t%1!==t))throw new Error("axis of dimension to unsqueeze must be an integer");return t=void 0===t?e.shape.length:t,r=e.shape.slice(0),n=e.stride.slice(0),r.splice(t||0,0,1),n.splice(t||0,0,(n[t]||1)*(r[t+1]||1)),o(e.data,r,n,e.offset)}var o=r(11);e.exports=n},function(e,t,r){"use strict";(function(e,n){function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,r){if(i()<r)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=e.prototype):(null===t&&(t=new e(r)),t.length=r),t}function e(t,r,n){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,r,n);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,n)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?f(e,t,r):d(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,r,n){return u(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function c(t,r){if(u(r),t=a(t,r<0?0:0|v(r)),!e.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)t[n]=0;return t}function f(t,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|_(r,n);t=a(t,o);var i=t.write(r,n);return i!==o&&(t=t.slice(0,i)),t}function p(e,t){var r=t.length<0?0:0|v(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(t,r,n,o){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===o?new Uint8Array(r):void 0===o?new Uint8Array(r,n):new Uint8Array(r,n,o),e.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=e.prototype):t=p(t,r),t}function d(t,r){if(e.isBuffer(r)){var n=0|v(r.length);return t=a(t,n),0===t.length?t:(r.copy(t,0,0,n),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||Z(r.length)?a(t,0):p(t,r);if("Buffer"===r.type&&J(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function y(t){return+t!=t&&(t=0),e.alloc(+t)}function _(t,r){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(o)return H(t).length;r=(""+r).toLowerCase(),o=!0}}function b(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(t,r,n,o,i){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=e.from(r,o)),e.isBuffer(r))return 0===r.length?-1:w(t,r,n,o,i);if("number"==typeof r)return r=255&r,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):w(t,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var l;if(o){var c=-1;for(l=r;l<s;l++)if(i(e,l)===i(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(r+u>s&&(r=s-u),l=r;l>=0;l--){for(var f=!0,p=0;p<u;p++)if(i(e,l+p)!==i(t,p)){f=!1;break}if(f)return l}return-1}function x(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function j(e,t,r,n){return $(H(t,e.length-r),e,r,n)}function O(e,t,r,n){return $(G(t),e,r,n)}function E(e,t,r,n){return O(e,t,r,n)}function k(e,t,r,n){return $(X(t),e,r,n)}function S(e,t,r,n){return $(Y(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var u,l,c,f;switch(s){case 1:i<128&&(a=i);break;case 2:u=e[o+1],128===(192&u)&&(f=(31&i)<<6|63&u,f>127&&(a=f));break;case 3:u=e[o+1],l=e[o+2],128===(192&u)&&128===(192&l)&&(f=(15&i)<<12|(63&u)<<6|63&l,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=e[o+1],l=e[o+2],c=e[o+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(f=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&c,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return A(n)}function A(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=z(e[i]);return o}function I(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,r,n,o,i,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<a)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function U(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return o||N(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,o){return o||N(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function W(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Y(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function X(e){return Q.toByteArray(W(e))}function $(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Z(e){return e!==e}var Q=r(306),K=r(307),J=r(308);t.Buffer=e,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=i(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,r){return s(null,e,t,r)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,r){return l(null,e,t,r)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,o=r.length,i=0,a=Math.min(n,o);i<a;++i)if(t[i]!==r[i]){n=t[i],o=r[i];break}return n<o?-1:o<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var o=e.allocUnsafe(r),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},e.byteLength=_,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):b.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,o,i){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),r<0||n>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var a=i-o,s=n-r,u=Math.min(a,s),l=this.slice(o,i),c=t.slice(r,n),f=0;f<u;++f)if(l[f]!==c[f]){a=l[f],s=c[f];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},e.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return j(this,e,t,r);case"ascii":return O(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var o;if(e.TYPED_ARRAY_SUPPORT)o=this.subarray(t,r),o.__proto__=e.prototype;else{var i=r-t;o=new e(i,void 0);for(var a=0;a<i;++a)o[a]=this[a+t]}return o},e.prototype.readUIntLE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},e.prototype.readUIntBE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},e.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e=0|e,t=0|t,r||F(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),K.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),K.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),K.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),K.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var o=Math.pow(2,8*r)-1;D(this,e,t,r,o,0)}var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=0|t,r=0|r,!n){var o=Math.pow(2,8*r)-1;D(this,e,t,r,o,0)}var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},e.prototype.writeUInt8=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},e.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):L(this,t,r,!0),r+2},e.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):L(this,t,r,!1),r+2},e.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):U(this,t,r,!0),r+4},e.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):U(this,t,r,!1),r+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=0|t,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=0|t,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},e.prototype.writeInt8=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},e.prototype.writeInt16LE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):L(this,t,r,!0),r+2},e.prototype.writeInt16BE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):L(this,t,r,!1),r+2},e.prototype.writeInt32LE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):U(this,t,r,!0),r+4},e.prototype.writeInt32BE=function(t,r,n){return t=+t,r=0|r,n||D(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):U(this,t,r,!1),r+4},e.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},e.prototype.copy=function(t,r,n,o){if(n||(n=0),o||0===o||(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);var i,a=o-n;if(this===t&&n<r&&r<o)for(i=a-1;i>=0;--i)t[i+r]=this[i+n];else if(a<1e3||!e.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+r]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),r);return a},e.prototype.fill=function(t,r,n,o){if("string"==typeof t){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t=255&t);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=r;a<n;++a)this[a]=t;else{var s=e.isBuffer(t)?t:H(new e(t,o).toString()),u=s.length;for(a=0;a<n-r;++a)this[a+r]=s[a%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,r(41).Buffer,r(12))},function(e,t,r){(function(e,n){function o(e,t){this._id=e,this._clearFn=t}var i=r(71).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var r=l++,n=!(arguments.length<2)&&s.call(arguments,1);return u[r]=!0,i(function(){u[r]&&(n?e.apply(null,n):e.call(null),t.clearImmediate(r))}),r},t.clearImmediate="function"==typeof n?n:function(e){delete u[e]}}).call(t,r(42).setImmediate,r(42).clearImmediate)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.InputLayer=void 0;var o=r(82);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(107);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=r(94);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(122);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=r(111);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=r(109);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=r(47);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var f=r(128);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var p=r(75),h=n(p);t.InputLayer=h.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="_Pooling1D";var n=e.poolLength,a=void 0===n?2:n,s=e.stride,u=void 0===s?null:s,l=e.borderMode,c=void 0===l?"valid":l;return r.poolLength=a,r.stride=null===u?a:u,r.borderMode=c,r.poolingFunc="max",r}return a(t,e),s(t,[{key:"call",value:function(e){if("max"!==this.poolingFunc&&"average"!==this.poolingFunc)throw new Error("[pooling._Pooling1D] pooling function must be max or average.");for(var t="valid"===this.borderMode?Math.floor((e.tensor.shape[0]-this.poolLength+this.stride)/this.stride):Math.floor((e.tensor.shape[0]+this.stride-1)/this.stride),r=new f.default([],[t,e.tensor.shape[1]]),n=new f.default([],[e.tensor.shape[1]]),o="valid"===this.borderMode?0:Math.min(0,Math.ceil((e.tensor.shape[0]-(t-1)*this.stride-this.poolLength)/2)),i=0;i<t;i++){var a=Math.max(0,o),s=this.poolLength+Math.min(0,o);h.default.assign(n.tensor,e.tensor.pick(a,null));for(var u=1,l=1;l<s&&!(a+l>e.tensor.shape[0]-1);l++)"max"===this.poolingFunc?h.default.maxeq(n.tensor,e.tensor.pick(a+l,null)):"average"===this.poolingFunc&&h.default.addeq(n.tensor,e.tensor.pick(a+l,null)),u+=1;"average"===this.poolingFunc&&h.default.divseq(n.tensor,u),h.default.assign(r.tensor.pick(i,null),n.tensor),o+=this.stride}return e.tensor=r.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="_Pooling2D";var n=e.poolSize,a=void 0===n?[2,2]:n,s=e.strides,u=void 0===s?null:s,l=e.borderMode,c=void 0===l?"valid":l,f=e.dimOrdering,p=void 0===f?"tf":f;return r.poolSize=a,r.strides=null===u?a:u,r.borderMode=c,r.dimOrdering=p,r.poolingFunc="max",r}return a(t,e),u(t,[{key:"_calcOutputShape",value:function(e){var t=s(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=s(this.poolSize,2),a=i[0],u=i[1],l="same"===this.borderMode?Math.floor((r+this.strides[0]-1)/this.strides[0]):Math.floor((r-a+this.strides[0])/this.strides[0]),c="same"===this.borderMode?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-u+this.strides[1])/this.strides[1]),f="same"===this.borderMode?Math.max(0,Math.floor((l-1)*this.strides[0]+a-r)):0,p="same"===this.borderMode?Math.max(0,Math.floor((c-1)*this.strides[1]+u-n)):0,h=Math.floor(f/2),d=f-h,v=Math.floor(p/2),y=p-v;this.outputShape=[l,c,o],this.inputPadding=[h,d,v,y]}},{key:"_padInput",value:function(e){if("same"===this.borderMode){var t=s(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=s(this.inputPadding,4),a=i[0],u=i[1],l=i[2],c=i[3],f=r+a+u,h=n+l+c,v=new p.default([],[f,h,o]);
"max"===this.poolingFunc&&d.default.assigns(v.tensor,Number.NEGATIVE_INFINITY),d.default.assign(v.tensor.hi(r+a,n+l,o).lo(a,l,0),e.tensor),e.tensor=v.tensor}return e}},{key:"call",value:function(e){if("max"!==this.poolingFunc&&"average"!==this.poolingFunc)throw new Error("[pooling._Pooling2D] pooling function must be max or average.");"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0)),this._calcOutputShape(e),this._padInput(e);for(var t=s(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=s(this.poolSize,2),a=i[0],u=i[1],l=new p.default([],this.outputShape),c=new p.default([],[a,u,o]),f=s(this.inputPadding,4),h=f[0],v=f[1],y=f[2],_=f[3],b=0,g=0;b<=r-a;b+=this.strides[0],g++){var m=0;b<h?m=h-b:b+a>r-v&&(m=b+a-(r-v));for(var w=0,x=0;w<=n-u;w+=this.strides[1],x++){var j=0;w<y?j=y-w:w+u>n-_&&(j=w+u-(n-_)),d.default.assign(c.tensor,e.tensor.hi(b+a,w+u,o).lo(b,w,0));for(var O=0;O<o;O++)if("max"===this.poolingFunc)l.tensor.set(g,x,O,d.default.sup(c.tensor.pick(null,null,O)));else if("average"===this.poolingFunc){var E=(a-m)*(u-j);l.tensor.set(g,x,O,d.default.sum(c.tensor.pick(null,null,O))/E)}}}return e.tensor=l.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(2,0,1)),e}}]),t}(c.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="_Pooling3D";var n=e.poolSize,a=void 0===n?[2,2,2]:n,s=e.strides,u=void 0===s?null:s,l=e.borderMode,c=void 0===l?"valid":l,f=e.dimOrdering,p=void 0===f?"tf":f;return r.poolSize=a,r.strides=null===u?a:u,r.borderMode=c,r.dimOrdering=p,r.poolingFunc="max",r}return a(t,e),u(t,[{key:"_calcOutputShape",value:function(e){var t=s(e.tensor.shape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=s(this.poolSize,3),u=a[0],l=a[1],c=a[2],f="same"===this.borderMode?Math.floor((r+this.strides[0]-1)/this.strides[0]):Math.floor((r-u+this.strides[0])/this.strides[0]),p="same"===this.borderMode?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-l+this.strides[1])/this.strides[1]),h="same"===this.borderMode?Math.floor((o+this.strides[2]-1)/this.strides[2]):Math.floor((o-c+this.strides[2])/this.strides[2]),d="same"===this.borderMode?Math.max(0,Math.floor((f-1)*this.strides[0]+u-r)):0,v="same"===this.borderMode?Math.max(0,Math.floor((p-1)*this.strides[1]+l-n)):0,y="same"===this.borderMode?Math.max(0,Math.floor((h-1)*this.strides[2]+c-o)):0,_=Math.floor(d/2),b=d-_,g=Math.floor(v/2),m=v-g,w=Math.floor(y/2),x=y-w;this.outputShape=[f,p,h,i],this.inputPadding=[_,b,g,m,w,x]}},{key:"_padInput",value:function(e){if("same"===this.borderMode){var t=s(e.tensor.shape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=s(this.inputPadding,6),u=a[0],l=a[1],c=a[2],f=a[3],h=a[4],v=a[5],y=r+u+l,_=n+c+f,b=o+h+v,g=new p.default([],[y,_,b,i]);"max"===this.poolingFunc&&d.default.assigns(g.tensor,Number.NEGATIVE_INFINITY),d.default.assign(g.tensor.hi(r+u,n+c,o+h,i).lo(u,c,h,0),e.tensor),e.tensor=g.tensor}return e}},{key:"call",value:function(e){if("max"!==this.poolingFunc&&"average"!==this.poolingFunc)throw new Error("[pooling._Pooling3D] pooling function must be max or average.");"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,3,0)),this._calcOutputShape(e),this._padInput(e);for(var t=s(e.tensor.shape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=s(this.poolSize,3),u=a[0],l=a[1],c=a[2],f=new p.default([],this.outputShape),h=new p.default([],[u,l,c,i]),v=s(this.inputPadding,6),y=v[0],_=v[1],b=v[2],g=v[3],m=v[4],w=v[5],x=0,j=0;x<=r-u;x+=this.strides[0],j++){var O=0;x<y?O=y-x:x+u>r-_&&(O=x+u-(r-_));for(var E=0,k=0;E<=n-l;E+=this.strides[1],k++){var S=0;E<b?S=b-E:E+l>n-g&&(S=E+l-(n-g));for(var P=0,C=0;P<=o-c;P+=this.strides[2],C++){var A=0;P<m?A=m-P:P+c>o-w&&(A=P+c-(o-w)),d.default.assign(h.tensor,e.tensor.hi(x+u,E+l,P+c,i).lo(x,E,P,0));for(var T=0;T<i;T++)if("max"===this.poolingFunc)f.tensor.set(j,k,C,T,d.default.sup(h.tensor.pick(null,null,null,T)));else if("average"===this.poolingFunc){var M=(u-O)*(l-S)*(c-A);f.tensor.set(j,k,C,T,d.default.sum(h.tensor.pick(null,null,null,T))/M)}}}}return e.tensor=f.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(3,0,1,2)),e}}]),t}(c.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GRU=t.LSTM=t.SimpleRNN=void 0;var o=r(125),i=n(o),a=r(124),s=n(a),u=r(123),l=n(u);t.SimpleRNN=i.default,t.LSTM=s.default,t.GRU=l.default},function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=r(17),i=r(229),a=r(230),s=r(231),u=r(232),l=r(233);n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=u,n.prototype.set=l,e.exports=n},function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=r(54);e.exports=n},function(e,t,r){function n(e,t,r,a,s){var u=-1,l=e.length;for(r||(r=i),s||(s=[]);++u<l;){var c=e[u];t>0&&r(c)?t>1?n(c,t-1,r,a,s):o(s,c):a||(s[s.length]=c)}return s}var o=r(148),i=r(204);e.exports=n},function(e,t,r){function n(e,t){return e&&o(e,t,i)}var o=r(156),i=r(8);e.exports=n},function(e,t,r){function n(e,t){t=i(t,e)?[t]:o(t);for(var r=0,n=t.length;null!=e&&r<n;)e=e[a(t[r++])];return r&&r==n?e:void 0}var o=r(53),i=r(22),a=r(13);e.exports=n},function(e,t,r){function n(e){return o(e)?e:i(e)}var o=r(6),i=r(235);e.exports=n},function(e,t,r){var n=r(7),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){function n(e,t,r,n,l,c){var f=l&u,p=e.length,h=t.length;if(p!=h&&!(f&&h>p))return!1;var d=c.get(e);if(d&&c.get(t))return d==t;var v=-1,y=!0,_=l&s?new o:void 0;for(c.set(e,t),c.set(t,e);++v<p;){var b=e[v],g=t[v];if(n)var m=f?n(g,b,v,t,e,c):n(b,g,v,e,t,c);if(void 0!==m){if(m)continue;y=!1;break}if(_){if(!i(t,function(e,t){if(!a(_,t)&&(b===e||r(b,e,n,l,c)))return _.push(t)})){y=!1;break}}else if(b!==g&&!r(b,g,n,l,c)){y=!1;break}}return c.delete(e),c.delete(t),y}var o=r(142),i=r(150),a=r(181),s=1,u=2;e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(12))},function(e,t,r){var n=r(138),o=r(29),i=r(140),a=r(141),s=r(144),u=r(157),l=r(63),c="[object Map]",f="[object Object]",p="[object Promise]",h="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,_=y.toString,b=l(n),g=l(o),m=l(i),w=l(a),x=l(s),j=u;(n&&j(new n(new ArrayBuffer(1)))!=v||o&&j(new o)!=c||i&&j(i.resolve())!=p||a&&j(new a)!=h||s&&j(new s)!=d)&&(j=function(e){var t=_.call(e),r=t==f?e.constructor:void 0,n=r?l(r):void 0;if(n)switch(n){case b:return v;case g:return c;case m:return p;case w:return h;case x:return d}return t}),e.exports=j},function(e,t){function r(e){return u.test(e)}var n="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",a="\\ufe0e\\ufe0f",s="\\u200d",u=RegExp("["+s+n+o+i+a+"]");e.exports=r},function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?i(r)&&a(t,r.length):"string"==n&&t in r)&&o(r[t],e)}var o=r(34),i=r(24),a=r(33),s=r(9);e.exports=n},function(e,t,r){function n(e){return e===e&&!o(e)}var o=r(9);e.exports=n},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}e.exports=r},function(e,t){function r(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}e.exports=r},function(e,t){function r(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,o=n.toString;e.exports=r},function(e,t,r){function n(e){var t=e?e.length:0;return t?o(e,i):[]}var o=r(50),i=1/0;e.exports=n},function(e,t,r){(function(e){var n=r(5),o=r(255),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?n.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||o;e.exports=c}).call(t,r(28)(e))},function(e,t,r){function n(e){var t=o(e)?l.call(e):"";return t==i||t==a||t==s}var o=r(9),i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]",u=Object.prototype,l=u.toString;e.exports=n},function(e,t,r){var n=r(163),o=r(179),i=r(220),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},function(e,t,r){function n(e){if(!e)return 0===e?e:0;if(e=o(e),e===i||e===-i){var t=e<0?-1:1;return t*a}return e===e?e:0}var o=r(257),i=1/0,a=1.7976931348623157e308;e.exports=n},function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=r(68);e.exports=n},function(e,t,r){"use strict";var n=r(303),o=r(4),i=o({args:["array","scalar","index"],body:function(e,t,r){var n,o=t;for(n=0;n<r.length-1;++n)o=o[r[n]];o[r[r.length-1]]=e}});e.exports=function(e){var t=n(e.shape);return i(e,t),t}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?d=h.concat(d):y=-1,d.length&&s())}function s(){if(!v){var e=o(a);v=!0;for(var t=d.length;t;){for(h=d,d=[];++y<t;)h&&h[y].run();y=-1,t=d.length}h=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var h,d=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.testUtils=t.layers=t.activations=t.Tensor=t.Model=void 0;var i=r(73),a=o(i),s=r(1),u=o(s),l=r(3),c=n(l),f=r(43),p=n(f),h=r(129),d=n(h);t.Model=a.default,t.Tensor=u.default,t.activations=c,t.layers=p,t.testUtils=d},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(130),s=o(a),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(258),p=o(f),h=r(250),d=o(h),v=r(238),y=o(v),_=r(243),b=o(_),g=r(8),m=o(g),w=r(260),x=o(w),j=r(256),O=o(j),E=r(37),k=o(E),S=r(242),P=o(S),C=r(43),A=n(C),T=r(1),M=o(T),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var r=t.filepaths,n=void 0===r?{}:r,o=t.headers,a=void 0===o?{}:o,s=t.gpu,u=void 0!==s&&s,l=t.layerCallPauses,c=void 0!==l&&l;if(!n.model||!n.weights||!n.metadata)throw new Error("File paths must be declared for model, weights, and metadata.");this.filepaths=n,this.filetypes={model:"json",weights:"arraybuffer",metadata:"json"},this.headers=a,this.gpu=u,this.layerCallPauses=c,this.data={model:{},weights:null,metadata:[]},this.xhrs={model:null,weights:null,metadata:null},this.xhrProgress={model:0,weights:0,metadata:0},this.modelLayersMap=new Map,this.layersWithResults=[],this.modelDAG={},this.inputTensors={},this._ready=this.initialize(),this.isRunning=!1}return c(e,[{key:"ready",value:function(){return this._ready}},{key:"interrupt",value:function(){var e=this,t=["model","weights","metdata"];t.forEach(function(t){e.xhrs[t]&&(e.xhrs[t].abort(),e.xhrs[t]=null)})}},{key:"initialize",value:function(){var e=this,t=["model","weights","metadata"];return s.default.all(t.map(function(t){return e.dataRequest(t,e.headers)})).then(function(){return e.createLayers(),s.default.resolve()}).catch(function(t){console.log(t),e.interrupt()})}},{key:"dataRequest",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new s.default(function(n,o){var i=new XMLHttpRequest;i.open("GET",t.filepaths[e],!0),i.responseType=t.filetypes[e];var a=!0,s=!1,u=void 0;try{for(var c,f=(0,p.default)(r)[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=l(c.value,2),d=h[0],v=h[1];i.setRequestHeader(d,v)}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}i.onload=function(r){t.data[e]=i.response,t.xhrs[e]=null,t.xhrProgress[e]=100,n()},i.onprogress=function(r){if(r.lengthComputable){var n=Math.round(100*r.loaded/r.total);t.xhrProgress[e]=n}},i.onerror=function(e){return o(e)},i.send(null),t.xhrs[e]=i})}},{key:"getLoadingProgress",value:function(){var e=(0,x.default)(this.xhrProgress);return Math.round((0,O.default)(e)/e.length)}},{key:"createLayers",value:function(){var e=this,t=this.data.model.class_name,r=[];"Sequential"===t?r=this.data.model.config:"Model"===t&&(r=this.data.model.config.layers),r.forEach(function(n,o){var i=n.class_name,a=n.config;if(!(i in A))throw new Error("Layer "+i+" specified in model configuration is not implemented!");if("Sequential"===t&&0===o){var s="input",u=a.batch_input_shape.slice(1),l=new A.InputLayer({name:s,shape:u});e.modelLayersMap.set(s,l),e.modelDAG[s]={layerClass:"InputLayer",name:s,inbound:[],outbound:[]},e.inputTensors[s]=new M.default([],u)}else if("Model"===t&&"InputLayer"===i){var c=a.batch_input_shape.slice(1);e.inputTensors[a.name]=new M.default([],c)}var f=void 0;if("Bidirectional"===i||"TimeDistributed"===i){var p=(0,d.default)(a,function(e,t){return(0,y.default)(t)}),h=a.layer.config,v=a.layer.class_name,_=(0,d.default)(h,function(e,t){return(0,y.default)(t)});"activation"in _&&(_.activation=(0,y.default)(_.activation)),"innerActivation"in _&&(_.innerActivation=(0,y.default)(_.innerActivation)),_.gpu=e.gpu,f=new A[i](Object.assign(p,{layer:new A[v](_)}))}else{var g=(0,d.default)(a,function(e,t){return(0,y.default)(t)});"activation"in g&&(g.activation=(0,y.default)(g.activation)),"innerActivation"in g&&(g.innerActivation=(0,y.default)(g.innerActivation)),g.gpu=e.gpu,f=new A[i](g)}var m=[];if("Bidirectional"===i?!function(){var e=a.layer.config.name,t=e.replace(/forward/,"backward"),r=f.forwardLayer.params.map(function(t){return e+"_"+t}),n=f.backwardLayer.params.map(function(e){return t+"_"+e});m=r.concat(n)}():m="TimeDistributed"===i?f.layer.params.map(function(e){return a.layer.config.name+"_"+e}):f.params.map(function(e){return a.name+"_"+e}),m&&m.length){var w=m.map(function(t){var r=(0,b.default)(e.data.metadata,function(e){var r=new RegExp("^"+t);return e.layer_name===a.name&&r.test(e.weight_name)});if(!r)throw new Error("[Model] error loading weights.");var n=r.offset,o=r.length,i=r.shape;return new M.default(new Float32Array(e.data.weights,n,o),i)});f.setWeights(w)}if(e.modelLayersMap.set(a.name,f),e.modelDAG[a.name]={layerClass:i,name:a.name,inbound:[],outbound:[]},"Sequential"===t)if(0===o){var x="input";e.modelDAG[x].outbound.push(a.name),e.modelDAG[a.name].inbound.push(x)}else{var j=r[o-1].config;e.modelDAG[a.name].inbound.push(j.name),e.modelDAG[j.name].outbound.push(a.name)}else"Model"===t&&n.inbound_nodes&&n.inbound_nodes.length&&n.inbound_nodes[0].forEach(function(t){var r=t[0];e.modelDAG[a.name].inbound.push(r),e.modelDAG[r].outbound.push(a.name)})})}},{key:"toggleGpu",value:function(e){"undefined"==typeof e?this.gpu=!this.gpu:this.gpu=e;var t=!0,r=!1,n=void 0;try{for(var o,i=this.modelLayersMap.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.toggleGpu(this.gpu)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"traverseDAG",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,a.coroutine)(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,u,l,c,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=4;break}return e.abrupt("return",!0);case 4:if(1!==t.length){e.next=35;break}if(r=t[0],n=this.modelDAG[r],o=n.layerClass,i=n.inbound,a=n.outbound,"InputLayer"===o){e.next=31;break}if(u=this.modelLayersMap.get(r),!u.visited){e.next=14;break}return e.abrupt("return",!1);case 14:if(l=i.map(function(e){return f.modelLayersMap.get(e)}),(0,P.default)(l.map(function(e){return e.hasResult}))){e.next=17;break}return e.abrupt("return",!1);case 17:if("Merge"!==o){e.next=21;break}u.result=u.call(l.map(function(e){return new M.default(e.result.tensor.data,e.result.tensor.shape)})),e.next=25;break;case 21:if(1===l.length){e.next=23;break}throw new Error("Layer name "+u.name+" has "+l.length+" inbound nodes, but is not a Merge layer.");case 23:c=l[0].result,u.result=u.call(new M.default(c.tensor.data,c.tensor.shape));case 25:if(u.hasResult=!0,u.visited=!0,this.layersWithResults.push(u.name),!this.layerCallPauses){e.next=31;break}return e.next=31,s.default.delay(0);case 31:return e.next=33,this.traverseDAG(a);case 33:e.next=37;break;case 35:return e.next=37,s.default.all(t.map(function(e){return f.traverseDAG([e])}));case 37:case"end":return e.stop()}},e,this)}));return e}()},{key:"predict",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,a.coroutine)(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s,l,c,f,p,h,d,v,y=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRunning=!0,r=(0,m.default)(this.inputTensors),(0,k.default)((0,m.default)(t),r)){e.next=5;break}throw this.isRunning=!1,new Error("predict() must take an object where the keys are the named inputs of the model: "+r+".");case 5:if((0,P.default)(r,function(e){return t[e]instanceof Float32Array})){e.next=8;break}throw this.isRunning=!1,new Error("predict() must take an object where the values are the flattened data as Float32Array.");case 8:for(this.layersWithResults=[],n=!0,o=!1,i=void 0,e.prev=12,a=this.modelLayersMap.values()[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)l=s.value,l.hasResult=!1,l.visited=!1;e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),o=!0,i=e.t0;case 20:e.prev=20,e.prev=21,!n&&a.return&&a.return();case 23:if(e.prev=23,!o){e.next=26;break}throw i;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return r.forEach(function(e){var r=y.modelLayersMap.get(e);y.inputTensors[e].replaceTensorData(t[e]),r.result=r.call(y.inputTensors[e]),r.hasResult=!0,r.visited=!0}),e.next=31,this.traverseDAG(r);case 31:if(c=this.data.model.class_name,"Sequential"!==c){e.next=41;break}return f=(0,b.default)((0,x.default)(this.modelDAG),function(e){return!e.outbound.length}),p=this.modelLayersMap.get(f.name),h=p.result,d={output:h.tensor.data},this.isRunning=!1,e.abrupt("return",d);case 41:if("Model"!==c){e.next=45;break}if(v=function(){var e=(0,x.default)(y.modelDAG).filter(function(e){return!e.outbound.length}),t={};return e.forEach(function(e){var r=y.modelLayersMap.get(e.name),n=r.result;t[e.name]=n.tensor.data}),y.isRunning=!1,{v:t}}(),"object"!==("undefined"==typeof v?"undefined":u(v))){e.next=45;break}return e.abrupt("return",v.v);case 45:case"end":return e.stop()}},e,this,[[12,16,20,28],[21,,23,27]])}));return e}()}]),e}();t.default=R},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=document.createElement("canvas"),n=r.getContext("webgl")||r.getContext("experimental-webgl");t.MAX_TEXTURE_SIZE=n.getParameter(n.MAX_TEXTURE_SIZE)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(37),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="InputLayer";var n=e.shape,a=void 0===n?[]:n;return r.shape=e.batchInputShape&&e.batchInputShape.length?e.batchInputShape.slice(1):a,r}return a(t,e),s(t,[{key:"call",value:function(e){if(!(0,f.default)(e.tensor.shape,this.shape))throw new Error("[InputLayer] input tensor shape "+e.tensor.shape+" does not match specified shape "+this.shape+".");return e}}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(4),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));h.call(r),r.layerClass="ELU";var n=e.alpha,a=void 0===n?1:n;return r.alpha=a,r}return a(t,e),s(t,[{key:"call",value:function(e){return this._compute(e.tensor,this.alpha),e}}]),t}(l.default),h=function(){this._compute=(0,f.default)({args:["array","scalar"],body:function(e,t){e=Math.max(e,0)+t*(Math.exp(Math.min(e,0))-1)}})};t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(3),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="LeakyReLU";var n=e.alpha,a=void 0===n?.3:n;return r.alpha=a,r}return a(t,e),s(t,[{key:"call",value:function(e){return(0,c.relu)(e,{alpha:this.alpha}),e}}]),t}(l.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(4),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._compute=(0,f.default)({args:["array","array"],body:function(e,t){e=Math.max(e,0)+t*Math.min(e,0)}}),r.layerClass="PReLU",r.params=["alphas"],r}return a(t,e),s(t,[{key:"call",value:function(e){return this._compute(e.tensor,this.weights.alphas.tensor),e}}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(4),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._compute=(0,f.default)({args:["array","array","array"],body:function(e,t,r){e=t*Math.log(1+Math.exp(r*e))}}),r.layerClass="ParametricSoftplus",r.params=["alphas","betas"],r}return a(t,e),s(t,[{key:"call",value:function(e){return this._compute(e.tensor,this.weights.alphas.tensor,this.weights.betas.tensor),e}}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(4),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._compute=(0,f.default)({args:["array","array","array","array","array"],body:function(e,t,r,n,o){e=t+Math.min(Math.max(e-t,0),Math.abs(n))+r*Math.min(e-t,0)+Math.max(e-(t+Math.abs(n)),0)*o}}),r.layerClass="SReLU",r.params=["t_left","a_left","t_right","a_right"],r}return a(t,e),s(t,[{key:"call",value:function(e){return this._compute(e.tensor,this.weights.t_left.tensor,this.weights.a_left.tensor,this.weights.t_right.tensor,this.weights.a_right.tensor),e}}]),t}(l.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){
for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(4),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));h.call(r),r.layerClass="ThresholdedReLU";var n=e.theta,a=void 0===n?1:n;return r.theta=a,r}return a(t,e),s(t,[{key:"call",value:function(e){return this._compute(e.tensor,this.theta),e}}]),t}(l.default),h=function(){this._compute=(0,f.default)({args:["array","scalar"],body:function(e,t){e*=Number(e>t)}})};t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SReLU=t.ThresholdedReLU=t.ParametricSoftplus=t.ELU=t.PReLU=t.LeakyReLU=void 0;var o=r(77),i=n(o),a=r(78),s=n(a),u=r(76),l=n(u),c=r(79),f=n(c),p=r(81),h=n(p),d=r(80),v=n(d);t.LeakyReLU=i.default,t.PReLU=s.default,t.ELU=l.default,t.ParametricSoftplus=f.default,t.ThresholdedReLU=h.default,t.SReLU=v.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),c=n(l),f=r(16),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="AtrousConvolution2D";var n=e.atrousRate,a=void 0===n?[1,1]:n;return r.atrousRate=a,r}return a(t,e),u(t,[{key:"_calcOutputShape",value:function(e){var t=e.tensor.shape[0],r=e.tensor.shape[1],n=s(this.kernelShape,3),o=n[0],i=n[1],a=n[2],u=i+(i-1)*(this.atrousRate[0]-1),l=a+(a-1)*(this.atrousRate[1]-1),c="same"===this.borderMode?Math.floor((t+this.subsample[0]-1)/this.subsample[0]):Math.floor((t-u+this.subsample[0])/this.subsample[0]),f="same"===this.borderMode?Math.floor((r+this.subsample[1]-1)/this.subsample[1]):Math.floor((r-l+this.subsample[1])/this.subsample[1]),p=o,h="same"===this.borderMode?Math.max(0,Math.floor((c-1)*this.subsample[0]+u-t)):0,d="same"===this.borderMode?Math.max(0,Math.floor((f-1)*this.subsample[1]+l-r)):0,v=Math.floor(h/2),y=h-v,_=Math.floor(d/2),b=d-_;this.outputShape=[c,f,p],this.inputPadding=[v,y,_,b]}},{key:"_im2col",value:function(e){var t=s(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=this.kernelShape[1],a=this.kernelShape[2],u=this.outputShape[0],l=this.outputShape[1],f=u*l,p=i*a*o,h=i+(i-1)*(this.atrousRate[0]-1),v=a+(a-1)*(this.atrousRate[1]-1);this._imColsMat||(this._imColsMat=new c.default([],[f,p]));for(var y=new c.default([],[i,a,o]),_=new c.default([],[p]),b=0,g=0,m=r-h;g<=m;g+=this.subsample[0])for(var w=0,x=n-v;w<=x;w+=this.subsample[1])d.default.assign(y.tensor,e.tensor.hi(g+h,w+v,o).lo(g,w,0).step(this.atrousRate[0],this.atrousRate[1],1)),_.replaceTensorData(y.tensor.data),d.default.assign(this._imColsMat.tensor.pick(b,null),_.tensor),b+=1;return this._useWeblas&&this._imColsMat.createWeblasTensor(),this._imColsMat}}]),t}(p.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(16),f=n(c),p=r(39),h=n(p),d=r(40),v=n(d),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Convolution1D";var n=e.nbFilter,a=void 0===n?1:n,s=e.filterLength,u=void 0===s?1:s,l=e.activation,c=void 0===l?"linear":l,p=e.borderMode,h=void 0===p?"valid":p,d=e.subsampleLength,v=void 0===d?1:d,y=e.bias,_=void 0===y||y;if("valid"!==h&&"same"!==h)throw new Error(r.name+" [Convolution1D layer] Invalid borderMode.");r.params=r.bias?["W","b"]:["W"];var b={nbFilter:a,nbRow:u,nbCol:1,activation:c,borderMode:h,subsample:[v,1],dimOrdering:"th",bias:_};return r._conv2d=new f.default(Object.assign(b,{gpu:e.gpu})),r}return a(t,e),s(t,[{key:"setWeights",value:function(e){this._conv2d.setWeights(e)}},{key:"call",value:function(e){e.tensor=(0,v.default)(e.tensor).transpose(1,0,2);var t=this._conv2d.call(e);return e.tensor=(0,h.default)(t.tensor).transpose(1,0,2),e}}]),t}(l.default);t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},f=r(3),p=o(f),h=r(1),d=n(h),v=r(0),y=n(v),_=r(2),b=n(_),g=r(27),m=n(g),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Convolution3D";var n=e.nbFilter,o=void 0===n?1:n,s=e.kernelDim1,u=void 0===s?1:s,l=e.kernelDim2,c=void 0===l?1:l,f=e.kernelDim3,h=void 0===f?1:f,d=e.activation,v=void 0===d?"linear":d,y=e.borderMode,_=void 0===y?"valid":y,b=e.subsample,g=void 0===b?[1,1,1]:b,m=e.dimOrdering,w=void 0===m?"tf":m,x=e.bias,j=void 0===x||x;if(r.kernelShape=[o,u,c,h],r.activation=p[v],"valid"!==_&&"same"!==_)throw new Error(r.name+" [Convolution3D layer] Invalid borderMode.");if(r.borderMode=_,r.subsample=g,"tf"!==w&&"th"!==w)throw new Error(r.name+" [Convolution3D layer] Only tf and th dim ordering are allowed.");return r.dimOrdering=w,r.bias=j,r.params=r.bias?["W","b"]:["W"],r}return s(t,e),l(t,[{key:"setWeights",value:function(e){"th"===this.dimOrdering&&(e[0].tensor=e[0].tensor.transpose(2,3,4,1,0)),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWeights",this).call(this,e),this._wRowsMat=this._w2row(),this._useWeblas&&(this._wRowsMat.createWeblasTensor(),this._wRowsMat.weblasTensor=this._wRowsMat.weblasTensor.transpose(),this.bias?this.weights.b.createWeblasTensor():(this._zerosVec=new d.default([],[this.weights.W.tensor.shape[4]]),this._zerosVec.createWeblasTensor()))}},{key:"_calcOutputShape",value:function(e){var t=e.tensor.shape[0],r=e.tensor.shape[1],n=e.tensor.shape[2],o=u(this.kernelShape,4),i=o[0],a=o[1],s=o[2],l=o[3],c="same"===this.borderMode?Math.floor((t+this.subsample[0]-1)/this.subsample[0]):Math.floor((t-a+this.subsample[0])/this.subsample[0]),f="same"===this.borderMode?Math.floor((r+this.subsample[1]-1)/this.subsample[1]):Math.floor((r-s+this.subsample[1])/this.subsample[1]),p="same"===this.borderMode?Math.floor((n+this.subsample[2]-1)/this.subsample[2]):Math.floor((n-l+this.subsample[2])/this.subsample[2]),h=i,d="same"===this.borderMode?Math.max(0,Math.floor((c-1)*this.subsample[0]+a-t)):0,v="same"===this.borderMode?Math.max(0,Math.floor((f-1)*this.subsample[1]+s-r)):0,y="same"===this.borderMode?Math.max(0,Math.floor((p-1)*this.subsample[2]+l-n)):0,_=Math.floor(d/2),b=d-_,g=Math.floor(v/2),m=v-g,w=Math.floor(y/2),x=y-w;this.outputShape=[c,f,p,h],this.inputPadding=[_,b,g,m,w,x]}},{key:"_padInput",value:function(e){if("same"===this.borderMode){var t=u(e.tensor.shape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=u(this.inputPadding,6),s=a[0],l=a[1],c=a[2],f=a[3],p=a[4],h=a[5],v=r+s+l,y=n+c+f,_=o+p+h,g=new d.default([],[v,y,_,i]);b.default.assign(g.tensor.hi(r+s,n+c,o+p,i).lo(s,c,p,0),e.tensor),e.tensor=g.tensor}return e}},{key:"_vol2col",value:function(e){var t=u(e.tensor.shape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=this.kernelShape[1],s=this.kernelShape[2],l=this.kernelShape[3],c=this.outputShape[0],f=this.outputShape[1],p=this.outputShape[2],h=c*f*p,v=a*s*l*i;if(this._volColsMat||(this._volColsMat=new d.default([],[h,v])),1===a&&1===s&&1===l&&1===this.subsample[0]&&1===this.subsample[1]&&1===this.subsample[2])return this._volColsMat.replaceTensorData(e.tensor.data),this._useWeblas&&this._volColsMat.createWeblasTensor(),this._volColsMat;for(var y=new d.default([],[a,s,l,i]),_=new d.default([],[v]),g=0,m=0,w=r-a;m<=w;m+=this.subsample[0])for(var x=0,j=n-s;x<=j;x+=this.subsample[1])for(var O=0,E=o-l;O<=E;O+=this.subsample[2])b.default.assign(y.tensor,e.tensor.hi(m+a,x+s,O+l,i).lo(m,x,O,0)),_.replaceTensorData(y.tensor.data),b.default.assign(this._volColsMat.tensor.pick(g,null),_.tensor),g+=1;return this._useWeblas&&this._volColsMat.createWeblasTensor(),this._volColsMat}},{key:"_w2row",value:function(){for(var e=this.weights.W.tensor.shape[3],t=u(this.kernelShape,4),r=t[0],n=t[1],o=t[2],i=t[3],a=n*o*i*e,s=new d.default([],[a,r]),l=new d.default([],[n,o,i,e]),c=new d.default([],[a]),f=0;f<r;f++)b.default.assign(l.tensor,this.weights.W.tensor.pick(null,null,null,null,f)),c.replaceTensorData(l.tensor.data),b.default.assign(s.tensor.pick(null,f),c.tensor);return s}},{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,3,0)),this._calcOutputShape(e),this._padInput(e),this._vol2col(e);var t=this.kernelShape[0],r=this.outputShape[0],n=this.outputShape[1],o=this.outputShape[2],i=r*n*o,a=new d.default([],[i,t]);if(this._useWeblas){var s=this.bias?this.weights.b.weblasTensor:this._zerosVec.weblasTensor;a.tensor.data=weblas.pipeline.sgemm(1,this._volColsMat.weblasTensor,this._wRowsMat.weblasTensor,1,s).transfer()}else{if(this.bias)for(var u=0;u<t;u++)b.default.assigns(a.tensor.pick(null,u),this.weights.b.tensor.get(u));(0,m.default)(a.tensor,this._volColsMat.tensor,this._wRowsMat.tensor,1,1)}for(var l=new d.default([],this.outputShape),c=new d.default([],[r*n*o]),f=new d.default([],[r,n,o]),p=0;p<t;p++)b.default.assign(c.tensor,a.tensor.pick(null,p)),f.replaceTensorData(c.tensor.data),b.default.assign(l.tensor.pick(null,null,null,p),f.tensor);return e.tensor=l.tensor,this.activation(e),"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(3,0,1,2)),e}}]),t}(y.default);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},f=r(3),p=o(f),h=r(1),d=n(h),v=r(0),y=n(v),_=r(2),b=n(_),g=r(27),m=n(g),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Deconvolution2D";var n=e.nbFilter,o=void 0===n?1:n,s=e.nbRow,u=void 0===s?1:s,l=e.nbCol,c=void 0===l?1:l,f=e.outputShape,h=void 0===f?[]:f,d=e.activation,v=void 0===d?"linear":d,y=e.borderMode,_=void 0===y?"valid":y,b=e.subsample,g=void 0===b?[1,1]:b,m=e.dimOrdering,w=void 0===m?"tf":m,x=e.bias,j=void 0===x||x;if(r.kernelShape=[o,u,c],null==h[0]?r.outputShape=h.slice(1):r.outputShape=h,r.activation=p[v],"valid"!==_&&"same"!==_)throw new Error(r.name+" [Deconvolution2D layer] Invalid borderMode.");if(r.borderMode=_,r.subsample=g,"tf"!==w&&"th"!==w)throw new Error(r.name+" [Deconvolution2D layer] Only tf and th dim ordering are allowed.");return r.dimOrdering=w,r.bias=j,r.params=r.bias?["W","b"]:["W"],r}return s(t,e),l(t,[{key:"setWeights",value:function(e){"th"===this.dimOrdering&&(e[0].tensor=e[0].tensor.transpose(2,3,1,0)),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWeights",this).call(this,e),this._wRowsMat=this._w2row(),this._useWeblas&&(this._wRowsMat.createWeblasTensor(),this._wRowsMat.weblasTensor=this._wRowsMat.weblasTensor.transpose())}},{key:"_calcOutputPadding",value:function(e){var t=e.tensor.shape[0],r=e.tensor.shape[1],n=this.kernelShape[1],o=this.kernelShape[2],i=this.outputShape[0],a=this.outputShape[1],s="same"===this.borderMode?Math.max(0,Math.floor((t-1)*this.subsample[0]+n-i)):0,u="same"===this.borderMode?Math.max(0,Math.floor((r-1)*this.subsample[1]+o-a)):0,l=Math.floor(s/2),c=s-l,f=Math.floor(u/2),p=u-f;this.outputPadding=[l,c,f,p]}},{key:"_im2col",value:function(e){for(var t=u(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=new d.default([],[r*n,o]),a=new d.default([],[r*n]),s=new d.default([],[r,n]),l=0;l<o;l++)b.default.assign(s.tensor,e.tensor.pick(null,null,l)),a.replaceTensorData(s.tensor.data),b.default.assign(i.tensor.pick(null,l),a.tensor);return i}},{key:"_w2row",value:function(){for(var e=u(this.weights.W.tensor.shape,4),t=e[0],r=e[1],n=e[2],o=e[3],i=new d.default([],[n,t*r*o]),a=new d.default([],[t*r*o]),s=new d.default([],[t,r,o]),l=0;l<n;l++)b.default.assign(s.tensor,this.weights.W.tensor.pick(null,null,l,null)),a.replaceTensorData(s.tensor.data),b.default.assign(i.tensor.pick(l,null),a.tensor);return i}},{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0));var t=this._im2col(e);this._useWeblas&&t.createWeblasTensor();var r=e.tensor.shape[0],n=e.tensor.shape[1],o=u(this.kernelShape,3),i=o[0],a=o[1],s=o[2],l=new d.default([],[r*n,a*s*i]);if(this._useWeblas){var c=new d.default([],[this.weights.W.tensor.shape[3]]);c.createWeblasTensor(),l.tensor.data=weblas.pipeline.sgemm(1,t.weblasTensor,this._wRowsMat.weblasTensor,0,c).transfer(),t.weblasTensor.delete(),delete t.weblasTensor}else(0,m.default)(l.tensor,t.tensor,this._wRowsMat.tensor,1,1);this._calcOutputPadding(e);var f=u(this.outputPadding,4),p=f[0],h=f[1],v=f[2],y=f[3],_=new d.default([],this.outputShape),g=new d.default([],[this.outputShape[0]+p+h,this.outputShape[1]+v+y,this.outputShape[2]]);if(this.bias)for(var w=0;w<i;w++)b.default.assigns(g.tensor.pick(null,null,w),this.weights.b.tensor.get(w));for(var x=[a,s,i],j=new d.default([],x),O=new d.default([],[a*s*i]),E=0,k=0;k<r;k++)for(var S=0;S<n;S++){b.default.assign(O.tensor,l.tensor.pick(E,null)),j.replaceTensorData(O.tensor.data);var P=k*this.subsample[0],C=S*this.subsample[1];b.default.addeq(g.tensor.hi(P+a,C+s,this.outputShape[2]).lo(P,C,0),j.tensor),E+=1}return b.default.assign(_.tensor,g.tensor.hi(this.outputShape[0]+p,this.outputShape[1]+v,this.outputShape[2]).lo(p,v,0)),e.tensor=_.tensor,this.activation(e),"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(2,0,1)),e}}]),t}(y.default);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(3),f=o(c),p=r(1),h=n(p),d=r(0),v=n(d),y=r(16),_=n(y),b=r(2),g=n(b),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="SeparableConvolution2D";var n=e.nbFilter,o=void 0===n?1:n,s=e.nbRow,u=void 0===s?1:s,l=e.nbCol,c=void 0===l?1:l,p=e.activation,h=void 0===p?"linear":p,d=e.borderMode,v=void 0===d?"valid":d,y=e.subsample,b=void 0===y?[1,1]:y,g=e.depthMultiplier,m=void 0===g?1:g,w=e.dimOrdering,x=void 0===w?"tf":w,j=e.bias,O=void 0===j||j;if(r.activation=f[h],"valid"!==v&&"same"!==v)throw new Error(r.name+" [SeparableConvolution2D layer] Invalid borderMode.");if(r.borderMode=v,r.subsample=b,r.depthMultiplier=m,"tf"!==x&&"th"!==x)throw new Error(r.name+" [SeparableConvolution2D layer] Only tf and th dim ordering are allowed.");r.dimOrdering=x,r.bias=O,r.params=r.bias?["depthwise_kernel","pointwise_kernel","b"]:["depthwise_kernel","pointwise_kernel"];var E={nbFilter:r.depthMultiplier,nbRow:u,nbCol:c,activation:"linear",borderMode:v,subsample:b,dimOrdering:x,bias:!1},k={nbFilter:o,nbRow:1,nbCol:1,activation:"linear",borderMode:v,subsample:[1,1],dimOrdering:x,bias:!1};return r._depthwiseConv=new _.default(Object.assign(E,{gpu:e.gpu})),r._pointwiseConv=new _.default(Object.assign(k,{gpu:e.gpu})),r}return s(t,e),l(t,[{key:"call",value:function(e){this._depthwiseConv._calcOutputShape(e);var t=this._depthwiseConv.outputShape[0],r=this._depthwiseConv.outputShape[1],n=new h.default([],[t,r,this.depthMultiplier]),o=u(e.tensor.shape,3),i=o[0],a=o[1],s=o[2],l=new h.default([],[i,a,1]),c=this.weights.depthwise_kernel.tensor.shape.slice();c[2]=1;for(var f=new h.default([],c),p=new h.default([],[this._depthwiseConv.outputShape[0],this._depthwiseConv.outputShape[1],s*this.depthMultiplier]),d=0;d<s;d++)f.tensor=this.weights.depthwise_kernel.tensor.hi(c[0],c[1],d+1,c[3]).lo(0,0,d,0),this._depthwiseConv.setWeights([f]),l.tensor=e.tensor.hi(i,a,d+1).lo(0,0,d),n=this._depthwiseConv.call(l),g.default.assign(p.tensor.hi(t,r,(d+1)*this.depthMultiplier).lo(0,0,d*this.depthMultiplier),n.tensor);this._pointwiseConv.setWeights([this.weights.pointwise_kernel]);var v=this._pointwiseConv.call(p);if(this.bias)for(var y=0;y<this.weights.b.tensor.shape[0];y++)g.default.addseq(v.tensor.pick(null,null,y),this.weights.b.tensor.get(y));return e.tensor=v.tensor,this.activation(e),e}}]),t}(v.default);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="UpSampling1D";var n=e.length,a=void 0===n?2:n;return r.length=a,r}return a(t,e),s(t,[{key:"call",value:function(e){for(var t=e.tensor.shape,r=[t[0]*this.length,t[1]],n=new f.default([],r),o=0;o<this.length;o++)h.default.assign(n.tensor.lo(o,0).step(this.length,1),e.tensor);return e.tensor=n.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="UpSampling2D";var n=e.size,a=void 0===n?[2,2]:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.size=a,r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0));for(var t=e.tensor.shape,r=[t[0]*this.size[0],t[1]*this.size[1],t[2]],n=new f.default([],r),o=0;o<this.size[0];o++)for(var i=0;i<this.size[1];i++)h.default.assign(n.tensor.lo(o,i,0).step(this.size[0],this.size[1],1),e.tensor);return e.tensor=n.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(2,0,1)),e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="UpSampling3D";var n=e.size,a=void 0===n?[2,2,2]:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.size=a,r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,3,0));for(var t=e.tensor.shape,r=[t[0]*this.size[0],t[1]*this.size[1],t[2]*this.size[2],t[3]],n=new f.default([],r),o=0;o<this.size[0];o++)for(var i=0;i<this.size[1];i++)for(var a=0;a<this.size[2];a++)h.default.assign(n.tensor.lo(o,i,a,0).step(this.size[0],this.size[1],this.size[2],1),e.tensor);return e.tensor=n.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(3,0,1,2)),e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="ZeroPadding1D";var n=e.padding,a=void 0===n?1:n;return r.padding=a,r}return a(t,e),s(t,[{key:"call",value:function(e){var t=e.tensor.shape,r=[t[0]+2*this.padding,t[1]],n=new f.default([],r);return h.default.assign(n.tensor.hi(t[0]+this.padding,t[1]).lo(this.padding,0),e.tensor),e.tensor=n.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="ZeroPadding2D";var n=e.padding,a=void 0===n?[1,1]:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.padding=a,r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0));var t=e.tensor.shape,r=[t[0]+2*this.padding[0],t[1]+2*this.padding[1],t[2]],n=new f.default([],r);return h.default.assign(n.tensor.hi(t[0]+this.padding[0],t[1]+this.padding[1],t[2]).lo(this.padding[0],this.padding[1],0),e.tensor),e.tensor=n.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(2,0,1)),e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){
var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="ZeroPadding3D";var n=e.padding,a=void 0===n?[1,1,1]:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.padding=a,r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,3,0));var t=e.tensor.shape,r=[t[0]+2*this.padding[0],t[1]+2*this.padding[1],t[2]+2*this.padding[2],t[3]],n=new f.default([],r);return h.default.assign(n.tensor.hi(t[0]+this.padding[0],t[1]+this.padding[1],t[2]+this.padding[2],t[3]).lo(this.padding[0],this.padding[1],this.padding[2],0),e.tensor),e.tensor=n.tensor,"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(3,0,1,2)),e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ZeroPadding3D=t.ZeroPadding2D=t.ZeroPadding1D=t.UpSampling3D=t.UpSampling2D=t.UpSampling1D=t.Convolution3D=t.Deconvolution2D=t.SeparableConvolution2D=t.AtrousConvolution2D=t.Convolution2D=t.Convolution1D=void 0;var o=r(84),i=n(o),a=r(16),s=n(a),u=r(83),l=n(u),c=r(87),f=n(c),p=r(86),h=n(p),d=r(85),v=n(d),y=r(88),_=n(y),b=r(89),g=n(b),m=r(90),w=n(m),x=r(91),j=n(x),O=r(92),E=n(O),k=r(93),S=n(k);t.Convolution1D=i.default,t.Convolution2D=s.default,t.AtrousConvolution2D=l.default,t.SeparableConvolution2D=f.default,t.Deconvolution2D=h.default,t.Convolution3D=v.default,t.UpSampling1D=_.default,t.UpSampling2D=g.default,t.UpSampling3D=w.default,t.ZeroPadding1D=j.default,t.ZeroPadding2D=E.default,t.ZeroPadding3D=S.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),c=o(l),f=r(0),p=n(f),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Activation";var n=e.activation,o=void 0===n?"linear":n;return r.activation=c[o],r}return s(t,e),u(t,[{key:"call",value:function(e){return this.activation(e),e}}]),t}(p.default);t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(3),f=o(c),p=r(1),h=n(p),d=r(0),v=n(d),y=r(10),_=r(2),b=n(_),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Dense";var n=e.outputDim,o=void 0===n?1:n,s=e.activation,u=void 0===s?"linear":s,l=e.inputDim,c=void 0===l?null:l,p=e.bias,h=void 0===p||p;return r.activation=f[u],r.outputDim=o,r.inputDim=c,r.bias=h,r.params=r.bias?["W","b"]:["W"],r.inputDim&&(r.inputShape=[r.inputDim]),r}return s(t,e),u(t,[{key:"setWeights",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setWeights",this).call(this,e),this._useWeblas&&(this.weights.W.createWeblasTensor(),this.weights.W.weblasTensor=this.weights.W.weblasTensor.transpose(),this.bias?this.weights.b.createWeblasTensor():(this._zerosVec=new h.default([],[this.weights.W.tensor.shape[1]]),this._zerosVec.createWeblasTensor()))}},{key:"call",value:function(e){var t=new h.default([],[this.outputDim]);if(this._useWeblas){e.createWeblasTensor();var r=this.bias?this.weights.b.weblasTensor:this._zerosVec.weblasTensor;t.tensor.data=weblas.pipeline.sgemm(1,e.weblasTensor,this.weights.W.weblasTensor,1,r).transfer(),e.weblasTensor.delete(),delete e.weblasTensor}else this.bias&&b.default.assign(t.tensor,this.weights.b.tensor),(0,y.gemv)(1,this.weights.W.tensor.transpose(1,0),e.tensor,1,t.tensor);return e.tensor=t.tensor,this.activation(e),e}}]),t}(v.default);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Dropout";var n=e.p,a=void 0===n?.5:n;return r.p=Math.min(Math.max(0,a),1),r}return a(t,e),s(t,[{key:"call",value:function(e){return e}}]),t}(l.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(0),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="Flatten",r}return a(t,e),s(t,[{key:"call",value:function(e){if(e.tensor.shape.length>1){var t=new l.default([],[e.tensor.shape.reduce(function(e,t){return e*t},1)]);t.replaceTensorData(e.tensor.data),e.tensor=t.tensor}return e}}]),t}(f.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),c=o(l),f=r(1),p=n(f),h=r(0),d=n(h),v=r(10),y=r(2),_=n(y),b=r(4),g=n(b),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._computeOutput=(0,g.default)({args:["array","array","array"],body:function(e,t,r){e=t*r+(1-r)*e}}),r.layerClass="Highway";var n=e.transformBias,o=void 0===n?-2:n,s=e.activation,u=void 0===s?"linear":s,l=e.bias,f=void 0===l||l;return r.transformBias=o,r.activation=c[u],r.bias=f,r.params=r.bias?["W","b","W_carry","b_carry"]:["W","W_carry"],r}return s(t,e),u(t,[{key:"call",value:function(e){var t=new p.default([],[this.weights.W.tensor.shape[1]]);this.bias&&_.default.assign(t.tensor,this.weights.b.tensor),(0,v.gemv)(1,this.weights.W.tensor.transpose(1,0),e.tensor,1,t.tensor),this.activation(t);var r=new p.default([],[this.weights.W_carry.tensor.shape[1]]);return this.bias&&_.default.assign(r.tensor,this.weights.b_carry.tensor),(0,v.gemv)(1,this.weights.W_carry.tensor.transpose(1,0),e.tensor,1,r.tensor),c.sigmoid(r),this._computeOutput(e.tensor,t.tensor,r.tensor),e}}]),t}(d.default);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(0),f=n(c),p=r(10),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="MaxoutDense";var n=e.outputDim,a=void 0===n?1:n,s=e.inputDim,u=void 0===s?null:s,l=e.bias,c=void 0===l||l;return r.outputDim=a,r.inputDim=u,r.bias=c,r.params=r.bias?["W","b"]:["W"],r}return a(t,e),s(t,[{key:"call",value:function(e){for(var t=this.weights.W.tensor.shape[0],r=new l.default([],[this.outputDim]),n=0;n<t;n++){var o=new l.default([],[this.outputDim]);this.bias&&d.default.assign(o.tensor,this.weights.b.tensor.pick(n,null)),(0,p.gemv)(1,this.weights.W.tensor.pick(n,null,null).transpose(1,0),e.tensor,1,o.tensor),d.default.maxeq(r.tensor,o.tensor)}return e.tensor=r.tensor,e}}]),t}(f.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(0),f=n(c),p=r(27),h=n(p),d=r(2),v=n(d),y=r(40),_=n(y),b=r(287),g=n(b),m=r(37),w=n(m),x=r(249),j=n(x),O=r(254),E=n(O),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Merge";var n=e.mode,a=void 0===n?"sum":n,s=e.concatAxis,u=void 0===s?-1:s,l=e.dotAxes,c=void 0===l?-1:l,f=e.outputShape,p=void 0===f?null:f,h=e.outputMask,d=void 0===h?null:h,v=["sum","mul","concat","ave","cos","dot","max"];if(!(v.indexOf(a)>-1))throw new Error(r.name+" [Merge layer] "+a+" not available.");return r.mode=a,r.concatAxis=u<=0?u:u-1,r.dotAxes=c<=0?c:c-1,r.outputShape=p,r.outputMask=d,r}return a(t,e),s(t,[{key:"_validateInputs",value:function(e){var t=this,r=e.map(function(e){return e.tensor.shape.slice()});if(["sum","mul","ave","cos","max"].indexOf(this.mode)>-1&&!r.every(function(e){return(0,w.default)(e,r[0])}))throw new Error(this.name+" [Merge layer] All input shapes must be the same for mode "+this.mode+".");if(["cos","dot"].indexOf(this.mode)>-1){if(2!==e.length)throw new Error(this.name+" [Merge layer] Exactly 2 inputs required for mode "+this.mode+".");if((0,j.default)(this.dotAxes)&&(this.dotAxes<0?this.dotAxes=[r[0].length+this.dotAxes,r[1].length+this.dotAxes]:this.dotAxes=[this.dotAxes-1,this.dotAxes-1]),r[0][this.dotAxes[0]]!==r[1][this.dotAxes[1]])throw new Error(this.name+" [Merge layer] Dimensions incompatibility using dot mode.")}else"concat"===this.mode&&!function(){var e=r.slice(),n=t.concatAxis<0?e[0].length+t.concatAxis:t.concatAxis;if(0===t.concatAxis&&(n=0),(0,E.default)(e.length).forEach(function(t){e[t].splice(n,1)}),!e.every(function(t){return(0,w.default)(t,e[0])}))throw new Error(t.name+" [Merge layer] In concat mode, all shapes must be the same except along the concat axis.")}();return!0}},{key:"call",value:function(e){var t=this,r=this._validateInputs(e);if(!r)throw new Error(this.name+" [Merge layer] Invalid inputs to call method.");var n=void 0,o=void 0;if(["sum","mul","ave","max"].indexOf(this.mode)>-1)o=e[0].tensor.shape.slice(),n=new l.default([],o);else if("concat"===this.mode)!function(){o=e[0].tensor.shape.slice();var r=t.concatAxis<0?o.length+t.concatAxis:t.concatAxis;0===t.concatAxis&&(r=0),e.slice(1,e.length).forEach(function(e){var t=e.tensor.shape.slice()[r];o[r]+=t}),n=new l.default([],o)}();else if(["cos","dot"].indexOf(this.mode)>-1){var i=e[0].tensor.shape.slice(),a=e[1].tensor.shape.slice();i.splice(this.dotAxes[0],1),a.splice(this.dotAxes[1],1),o=i.concat(a),1===o.length&&o.push(1),n=new l.default([],o)}if("sum"===this.mode)for(var s=0;s<e.length;s++)v.default.addeq(n.tensor,e[s].tensor);else if("mul"===this.mode){v.default.assigns(n.tensor,1);for(var u=0;u<e.length;u++)v.default.muleq(n.tensor,e[u].tensor)}else if("ave"===this.mode){for(var c=0;c<e.length;c++)v.default.addeq(n.tensor,e[c].tensor);v.default.divseq(n.tensor,e.length)}else if("max"===this.mode){v.default.assign(n.tensor,e[0].tensor);for(var f=1;f<e.length;f++)v.default.maxeq(n.tensor,e[f].tensor)}else if("concat"===this.mode){var p=this.concatAxis<0?e[0].tensor.shape.length+this.concatAxis:this.concatAxis;0===this.concatAxis&&(p=0),0===p?(0,g.default)(n.tensor,e.map(function(e){return e.tensor})):!function(){for(var t,r=[p],o=0;o<e[0].tensor.shape.length;o++)o!==p&&r.push(o);(0,g.default)((t=n.tensor).transpose.apply(t,r),e.map(function(e){var t;return(t=e.tensor).transpose.apply(t,r)}))}()}else if("dot"===this.mode){if(2!==e[0].tensor.shape.length||2!==e[1].tensor.shape.length)throw new Error(this.name+" [Merge layer] dot mode for 3+ dim tensors not yet implemented.");0===this.dotAxes[0]&&0===this.dotAxes[1]?(0,h.default)(n.tensor,e[0].tensor.transpose(1,0),e[1].tensor):1===this.dotAxes[0]&&1===this.dotAxes[1]&&(0,h.default)(n.tensor,e[0].tensor,e[1].tensor.transpose(1,0))}else if("cos"===this.mode){if(2!==e[0].tensor.shape.length||2!==e[1].tensor.shape.length)throw new Error(this.name+" [Merge layer] cos mode for 3+ dim tensors not yet implemented.");var d=new l.default([],n.tensor.shape),y=new l.default([],n.tensor.shape);0===this.dotAxes[0]&&0===this.dotAxes[1]?((0,h.default)(d.tensor,e[0].tensor.transpose(1,0),e[0].tensor),(0,h.default)(y.tensor,e[1].tensor.transpose(1,0),e[1].tensor),(0,h.default)(n.tensor,e[0].tensor.transpose(1,0),e[1].tensor)):1===this.dotAxes[0]&&1===this.dotAxes[1]&&((0,h.default)(d.tensor,e[0].tensor,e[0].tensor.transpose(1,0)),(0,h.default)(y.tensor,e[1].tensor,e[1].tensor.transpose(1,0)),(0,h.default)(n.tensor,e[0].tensor,e[1].tensor.transpose(1,0))),v.default.muleq(d.tensor,y.tensor),v.default.sqrteq(d.tensor),v.default.diveq(n.tensor,d.tensor),n.tensor=(0,_.default)(n.tensor,0)}return n}}]),t}(f.default);t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Permute";var n=e.dims,o=void 0===n?[]:n;return r.dims=o.map(function(e){return e-1}),r}return s(t,e),u(t,[{key:"call",value:function(e){var t;if(this.dims.length!==e.tensor.shape.length)throw new Error(this.name+" [Permute layer] The specified dims permutation must match the number of dimensions.");return e.tensor=(t=e.tensor).transpose.apply(t,o(this.dims)),e}}]),t}(c.default);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(40),f=n(c),p=r(298),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="RepeatVector";var n=e.n,a=void 0===n?1:n;return r.n=a,r}return a(t,e),s(t,[{key:"call",value:function(e){if(1!==e.tensor.shape.length)throw new Error(this.name+" [RepeatVector layer] Only 1D tensor inputs allowed.");return e.tensor=(0,h.default)((0,f.default)(e.tensor,0),[this.n,1]),e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),l=n(u),c=r(0),f=n(c),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Reshape";var n=e.targetShape,a=void 0===n?[]:n;return r.targetShape=a,r}return a(t,e),s(t,[{key:"call",value:function(e){if(this.targetShape.reduce(function(e,t){return e*t},1)!==e.tensor.size)throw new Error(this.name+" [Reshape layer] The total size of new array must be unchanged in reshape layer.");var t=new l.default([],this.targetShape);return t.replaceTensorData(e.tensor.data),e.tensor=t.tensor,e}}]),t}(f.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="SpatialDropout2D";var n=e.p,a=void 0===n?.5:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.p=Math.min(Math.max(0,a),1),r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){return e}}]),t}(l.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="SpatialDropout3D";var n=e.p,a=void 0===n?.5:n,s=e.dimOrdering,u=void 0===s?"tf":s;return r.p=Math.min(Math.max(0,a),1),r.dimOrdering=u,r}return a(t,e),s(t,[{key:"call",value:function(e){return e}}]),t}(l.default);t.default=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MaxoutDense=t.Highway=t.Merge=t.RepeatVector=t.Permute=t.Reshape=t.Flatten=t.SpatialDropout3D=t.SpatialDropout2D=t.Dropout=t.Activation=t.Dense=void 0;var o=r(96),i=n(o),a=r(95),s=n(a),u=r(97),l=n(u),c=r(105),f=n(c),p=r(106),h=n(p),d=r(98),v=n(d),y=r(104),_=n(y),b=r(102),g=n(b),m=r(103),w=n(m),x=r(101),j=n(x),O=r(99),E=n(O),k=r(100),S=n(k);t.Dense=i.default,t.Activation=s.default,t.Dropout=l.default,t.SpatialDropout2D=f.default,t.SpatialDropout3D=h.default,t.Flatten=v.default,t.Reshape=_.default,t.Permute=g.default,t.RepeatVector=w.default,t.Merge=j.default,t.Highway=E.default,t.MaxoutDense=S.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Embedding";var n=e.inputDim,a=void 0===n?1:n,s=e.outputDim,u=void 0===s?1:s,l=e.inputLength,c=void 0===l?0:l,f=e.maskZero,p=void 0!==f&&f,h=e.dropout,d=void 0===h?0:h;return r.inputDim=a,r.outputDim=u,r.inputLength=c,r.maskZero=p,r.dropout=d,r.params=["W"],r}return a(t,e),s(t,[{key:"call",value:function(e){for(var t=new f.default([],[e.tensor.shape[0],this.weights.W.tensor.shape[1]]),r=0,n=e.tensor.shape[0];r<n;r++)h.default.assign(t.tensor.pick(r,null),this.weights.W.tensor.pick(e.tensor.get(r),null));return e.tensor=t.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Embedding=void 0;var o=r(108),i=n(o);t.Embedding=i.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=r(70),v=n(d),y=r(64),_=n(y),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="BatchNormalization";var n=e.epsilon,a=void 0===n?1e-5:n,s=e.mode,u=void 0===s?0:s,l=e.axis,c=void 0===l?-1:l;return r.epsilon=a,r.mode=u,r.axis=c,r.axisNormalized=!1,r.params=0===r.mode?["gamma","beta","running_mean","running_std"]:["gamma","beta"],r}return a(t,e),s(t,[{key:"call",value:function(e){var t=this;this.axisNormalized||(this.axis=this.axis<0?e.tensor.shape.length+this.axis:this.axis-1,this.axisNormalized=!0);for(var r=[],n=0;n<e.tensor.shape.length;n++)n===this.axis?r.push(1):r.push(null);for(var o=new f.default([],e.tensor.shape),i=new f.default([],e.tensor.shape),a=0;a<e.tensor.shape[this.axis];a++){var s,u;r[this.axis]=a,h.default.assigns((s=o.tensor).pick.apply(s,r),this.weights.gamma.tensor.get(a)),h.default.assigns((u=i.tensor).pick.apply(u,r),this.weights.beta.tensor.get(a))}var l=new f.default([],e.tensor.shape),c=new f.default([],e.tensor.shape);if(0===this.mode){for(var p=0;p<e.tensor.shape[this.axis];p++){var d,y;r[this.axis]=p,h.default.assigns((d=l.tensor).pick.apply(d,r),this.weights.running_mean.tensor.get(p)),h.default.assigns((y=c.tensor).pick.apply(y,r),this.weights.running_std.tensor.get(p)+this.epsilon)}h.default.sqrteq(c.tensor)}else if(1===this.mode){var b=e.tensor.shape.slice();b.splice(this.axis,1);for(var g=new f.default([],b),m=0;m<e.tensor.shape[this.axis];m++){var w;r[this.axis]=m,h.default.addeq(g.tensor,(w=e.tensor).pick.apply(w,r))}h.default.divseq(g.tensor,e.tensor.shape[this.axis]);for(var x=new f.default([],b),j=new f.default([],b),O=0;O<e.tensor.shape[this.axis];O++){var E;r[this.axis]=O,h.default.sub(j.tensor,(E=e.tensor).pick.apply(E,r),g.tensor),h.default.powseq(j.tensor,2),h.default.addeq(x.tensor,j.tensor)}h.default.divseq(x.tensor,e.tensor.shape[this.axis]),h.default.addseq(x.tensor,this.epsilon),h.default.sqrteq(x.tensor),h.default.addseq(x.tensor,this.epsilon);for(var k=0;k<e.tensor.shape[this.axis];k++){
var S,P;r[this.axis]=k,h.default.assign((S=l.tensor).pick.apply(S,r),g.tensor),h.default.assign((P=c.tensor).pick.apply(P,r),x.tensor)}}else{if(2!==this.mode)throw new Error("[normalization.BatchNormalization] Invalid mode "+this.mode+".");for(var C=function(n){var o,i,a;r[t.axis]=n;var s=(0,_.default)((0,v.default)((o=e.tensor).pick.apply(o,r))),u=s.reduce(function(e,t){return e+t},0)/s.length,f=s.map(function(e){return(e-u)*(e-u)}).reduce(function(e,t){return e+t},0)/s.length;h.default.assigns((i=l.tensor).pick.apply(i,r),u),h.default.assigns((a=c.tensor).pick.apply(a,r),f+t.epsilon)},A=0;A<e.tensor.shape[this.axis];A++)C(A);h.default.sqrteq(c.tensor)}return h.default.subeq(e.tensor,l.tensor),h.default.diveq(e.tensor,c.tensor),h.default.muleq(e.tensor,o.tensor),h.default.addeq(e.tensor,i.tensor),e}}]),t}(l.default);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BatchNormalization=void 0;var o=r(110),i=n(o);t.BatchNormalization=i.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(44),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="AveragePooling1D",r.poolingFunc="average",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(45),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="AveragePooling2D",r.poolingFunc="average",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(46),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="AveragePooling3D",r.poolingFunc="average",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="GlobalAveragePooling1D",r}return a(t,e),u(t,[{key:"call",value:function(e){for(var t=s(e.tensor.shape,2),r=t[0],n=t[1],o=new p.default([],[n]),i=0,a=n;i<a;i++)o.tensor.set(i,d.default.sum(e.tensor.pick(null,i))/r);return e.tensor=o.tensor,e}}]),t}(c.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="GlobalAveragePooling2D";var n=e.dimOrdering,a=void 0===n?"tf":n;return r.dimOrdering=a,r}return a(t,e),u(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0));for(var t=s(e.tensor.shape,3),r=t[0],n=t[1],o=t[2],i=new p.default([],[o]),a=0,u=o;a<u;a++)i.tensor.set(a,d.default.sum(e.tensor.pick(null,null,a))/(r*n));return e.tensor=i.tensor,e}}]),t}(c.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="GlobalMaxPooling1D",r}return a(t,e),s(t,[{key:"call",value:function(e){for(var t=e.tensor.shape[1],r=new f.default([],[t]),n=0,o=t;n<o;n++)r.tensor.set(n,h.default.sup(e.tensor.pick(null,n)));return e.tensor=r.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),c=r(1),f=n(c),p=r(2),h=n(p),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="GlobalMaxPooling2D";var n=e.dimOrdering,a=void 0===n?"tf":n;return r.dimOrdering=a,r}return a(t,e),s(t,[{key:"call",value:function(e){"th"===this.dimOrdering&&(e.tensor=e.tensor.transpose(1,2,0));for(var t=e.tensor.shape[2],r=new f.default([],[t]),n=0,o=t;n<o;n++)r.tensor.set(n,h.default.sup(e.tensor.pick(null,null,n)));return e.tensor=r.tensor,e}}]),t}(l.default);t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(44),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="MaxPooling1D",r.poolingFunc="max",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(45),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="MaxPooling2D",r.poolingFunc="max",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(46),u=n(s),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.layerClass="MaxPooling3D",r.poolingFunc="max",r}return a(t,e),t}(u.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalAveragePooling2D=t.GlobalMaxPooling2D=t.GlobalAveragePooling1D=t.GlobalMaxPooling1D=t.AveragePooling3D=t.AveragePooling2D=t.AveragePooling1D=t.MaxPooling3D=t.MaxPooling2D=t.MaxPooling1D=void 0;var o=r(119),i=n(o),a=r(120),s=n(a),u=r(121),l=n(u),c=r(112),f=n(c),p=r(113),h=n(p),d=r(114),v=n(d),y=r(117),_=n(y),b=r(115),g=n(b),m=r(118),w=n(m),x=r(116),j=n(x);t.MaxPooling1D=i.default,t.MaxPooling2D=s.default,t.MaxPooling3D=l.default,t.AveragePooling1D=f.default,t.AveragePooling2D=h.default,t.AveragePooling3D=v.default,t.GlobalMaxPooling1D=_.default,t.GlobalAveragePooling1D=g.default,t.GlobalMaxPooling2D=w.default,t.GlobalAveragePooling2D=j.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),c=o(l),f=r(1),p=n(f),h=r(0),d=n(h),v=r(10),y=r(2),_=n(y),b=r(4),g=n(b),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._combine=(0,g.default)({args:["array","array","array","array"],body:function(e,t,r,n){e=t+r+n}}),r._update=(0,g.default)({args:["array","array","array"],body:function(e,t,r){e=e*(1-r)+t*r}}),r.layerClass="GRU";var n=e.outputDim,o=void 0===n?1:n,s=e.activation,u=void 0===s?"tanh":s,l=e.innerActivation,f=void 0===l?"hardSigmoid":l,p=e.returnSequences,h=void 0!==p&&p,d=e.goBackwards,v=void 0!==d&&d,y=e.stateful,_=void 0!==y&&y;return r.outputDim=o,r.activation=u,r.innerActivation=f,r.activationFunc=c[u],r.innerActivationFunc=c[f],r.returnSequences=h,r.goBackwards=v,r.stateful=_,r.params=["W_z","U_z","b_z","W_r","U_r","b_r","W_h","U_h","b_h"],r}return s(t,e),u(t,[{key:"call",value:function(e){var t=this,r=new p.default([],[e.tensor.shape[1]]),n=this.weights.b_z.tensor.shape[0],o=this.weights.b_r.tensor.shape[0],i=this.weights.b_h.tensor.shape[0],a=new p.default([],[n]),s=new p.default([],[n]),u=new p.default([],[n]),l=new p.default([],[o]),c=new p.default([],[o]),f=new p.default([],[o]),h=this.stateful&&this.currentHiddenState?this.currentHiddenState:new p.default([],[i]),d=new p.default([],[i]),y=new p.default([],[i]),b=new p.default([],[i]);this.hiddenStateSequence=new p.default([],[e.tensor.shape[0],i]);for(var g=function(){var e=[s,u,c,f,d,y];e.forEach(function(e){return _.default.assigns(e.tensor,0)})},m=function(){_.default.assign(b.tensor,h.tensor),(0,v.gemv)(1,t.weights.W_z.tensor.transpose(1,0),r.tensor,1,s.tensor),(0,v.gemv)(1,t.weights.U_z.tensor.transpose(1,0),b.tensor,1,u.tensor),t._combine(a.tensor,s.tensor,u.tensor,t.weights.b_z.tensor),t.innerActivationFunc(a),(0,v.gemv)(1,t.weights.W_r.tensor.transpose(1,0),r.tensor,1,c.tensor),(0,v.gemv)(1,t.weights.U_r.tensor.transpose(1,0),b.tensor,1,f.tensor),t._combine(l.tensor,c.tensor,f.tensor,t.weights.b_r.tensor),t.innerActivationFunc(l),_.default.muleq(l.tensor,b.tensor),(0,v.gemv)(1,t.weights.W_h.tensor.transpose(1,0),r.tensor,1,d.tensor),(0,v.gemv)(1,t.weights.U_h.tensor.transpose(1,0),l.tensor,1,y.tensor),t._combine(h.tensor,d.tensor,y.tensor,t.weights.b_h.tensor),t.activationFunc(h),t._update(h.tensor,b.tensor,a.tensor)},w=0,x=e.tensor.shape[0];w<x;w++){var j=this.goBackwards?x-w-1:w;_.default.assign(r.tensor,e.tensor.pick(j,null)),g(),m(),this.returnSequences&&_.default.assign(this.hiddenStateSequence.tensor.pick(w,null),h.tensor)}return this.returnSequences?e.tensor=this.hiddenStateSequence.tensor:e.tensor=h.tensor,this.stateful&&(this.currentHiddenState=h),e}}]),t}(d.default);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),c=o(l),f=r(1),p=n(f),h=r(0),d=n(h),v=r(10),y=r(2),_=n(y),b=r(4),g=n(b),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._combine=(0,g.default)({args:["array","array","array","array"],body:function(e,t,r,n){e=t+r+n}}),r._update=(0,g.default)({args:["array","array","array","array"],body:function(e,t,r,n){e=e*r+t*n}}),r.layerClass="LSTM";var n=e.outputDim,o=void 0===n?1:n,s=e.activation,u=void 0===s?"tanh":s,l=e.innerActivation,f=void 0===l?"hardSigmoid":l,p=e.returnSequences,h=void 0!==p&&p,d=e.goBackwards,v=void 0!==d&&d,y=e.stateful,_=void 0!==y&&y;return r.outputDim=o,r.activation=u,r.innerActivation=f,r.activationFunc=c[u],r.innerActivationFunc=c[f],r.returnSequences=h,r.goBackwards=v,r.stateful=_,r.params=["W_i","U_i","b_i","W_c","U_c","b_c","W_f","U_f","b_f","W_o","U_o","b_o"],r}return s(t,e),u(t,[{key:"call",value:function(e){var t=this,r=new p.default([],[e.tensor.shape[1]]),n=this.weights.b_i.tensor.shape[0],o=this.weights.b_c.tensor.shape[0],i=this.weights.b_f.tensor.shape[0],a=this.weights.b_o.tensor.shape[0],s=new p.default([],[n]),u=new p.default([],[n]),l=new p.default([],[n]),c=new p.default([],[i]),f=new p.default([],[i]),h=new p.default([],[i]),d=new p.default([],[a]),y=new p.default([],[a]),b=new p.default([],[a]),g=new p.default([],[o]),m=new p.default([],[o]),w=new p.default([],[o]),x=this.stateful&&this.previousCandidate?this.previousCandidate:new p.default([],[o]),j=this.stateful&&this.currentHiddenState?this.currentHiddenState:new p.default([],[o]),O=new p.default([],[o]);this.hiddenStateSequence=new p.default([],[e.tensor.shape[0],o]);for(var E=function(){var e=[u,l,f,h,y,b,m,w];e.forEach(function(e){return _.default.assigns(e.tensor,0)})},k=function(){_.default.assign(O.tensor,j.tensor),(0,v.gemv)(1,t.weights.W_i.tensor.transpose(1,0),r.tensor,1,u.tensor),(0,v.gemv)(1,t.weights.U_i.tensor.transpose(1,0),O.tensor,1,l.tensor),t._combine(s.tensor,u.tensor,l.tensor,t.weights.b_i.tensor),t.innerActivationFunc(s),(0,v.gemv)(1,t.weights.W_f.tensor.transpose(1,0),r.tensor,1,f.tensor),(0,v.gemv)(1,t.weights.U_f.tensor.transpose(1,0),O.tensor,1,h.tensor),t._combine(c.tensor,f.tensor,h.tensor,t.weights.b_f.tensor),t.innerActivationFunc(c),(0,v.gemv)(1,t.weights.W_o.tensor.transpose(1,0),r.tensor,1,y.tensor),(0,v.gemv)(1,t.weights.U_o.tensor.transpose(1,0),O.tensor,1,b.tensor),t._combine(d.tensor,y.tensor,b.tensor,t.weights.b_o.tensor),t.innerActivationFunc(d),(0,v.gemv)(1,t.weights.W_c.tensor.transpose(1,0),r.tensor,1,m.tensor),(0,v.gemv)(1,t.weights.U_c.tensor.transpose(1,0),O.tensor,1,w.tensor),t._combine(g.tensor,m.tensor,w.tensor,t.weights.b_c.tensor),t.activationFunc(g),t._update(g.tensor,x.tensor,s.tensor,c.tensor),_.default.assign(x.tensor,g.tensor),t.activationFunc(g),_.default.mul(j.tensor,d.tensor,g.tensor)},S=0,P=e.tensor.shape[0];S<P;S++){var C=this.goBackwards?P-S-1:S;_.default.assign(r.tensor,e.tensor.pick(C,null)),E(),k(),_.default.assign(this.hiddenStateSequence.tensor.pick(S,null),j.tensor)}return this.returnSequences?e.tensor=this.hiddenStateSequence.tensor:e.tensor=j.tensor,this.stateful&&(this.previousCandidate=x,this.currentHiddenState=j),e}}]),t}(d.default);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(3),c=o(l),f=r(1),p=n(f),h=r(0),d=n(h),v=r(10),y=r(2),_=n(y),b=r(4),g=n(b),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._combine=(0,g.default)({args:["array","array","array","array"],body:function(e,t,r,n){e=t+r+n}}),r.layerClass="SimpleRNN";var n=e.outputDim,o=void 0===n?1:n,s=e.activation,u=void 0===s?"tanh":s,l=e.returnSequences,f=void 0!==l&&l,p=e.goBackwards,h=void 0!==p&&p,d=e.stateful,v=void 0!==d&&d;return r.outputDim=o,r.activation=u,r.activationFunc=c[u],r.returnSequences=f,r.goBackwards=h,r.stateful=v,r.params=["W","U","b"],r}return s(t,e),u(t,[{key:"call",value:function(e){var t=this,r=new p.default([],[e.tensor.shape[1]]),n=this.weights.b.tensor.shape[0],o=this.stateful&&this.currentHiddenState?this.currentHiddenState:new p.default([],[n]),i=new p.default([],[n]),a=new p.default([],[n]),s=new p.default([],[n]);this.hiddenStateSequence=new p.default([],[e.tensor.shape[0],n]);for(var u=function(){var e=[i,a];e.forEach(function(e){return _.default.assigns(e.tensor,0)})},l=function(){_.default.assign(s.tensor,o.tensor),(0,v.gemv)(1,t.weights.W.tensor.transpose(1,0),r.tensor,1,i.tensor),(0,v.gemv)(1,t.weights.U.tensor.transpose(1,0),s.tensor,1,a.tensor),t._combine(o.tensor,i.tensor,a.tensor,t.weights.b.tensor),t.activationFunc(o)},c=0,f=e.tensor.shape[0];c<f;c++){var h=this.goBackwards?f-c-1:c;_.default.assign(r.tensor,e.tensor.pick(h,null)),u(),l(),this.returnSequences&&_.default.assign(this.hiddenStateSequence.tensor.pick(c,null),o.tensor)}return this.returnSequences?e.tensor=this.hiddenStateSequence.tensor:e.tensor=o.tensor,this.stateful&&(this.currentHiddenState=o),e}}]),t}(d.default);t.default=m},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=o(l),f=r(1),p=o(f),h=r(2),d=o(h),v=r(252),y=o(v),_=r(47),b=n(_),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="Bidirectional";var n=e.layer,o=e.mergeMode,s=void 0===o?"concat":o;if(!n)throw new Error("[Bidirectional] wrapped layer is undefined.");r.forwardLayer=n;var u=(0,y.default)(n,["outputDim","activation","innerActivation","returnSequences","goBackwards","stateful"]);return u.goBackwards=!u.goBackwards,r.backwardLayer=new b[n.layerClass](u),r.mergeMode=s,r}return s(t,e),u(t,[{key:"setWeights",value:function(e){this.forwardLayer.setWeights(e.slice(0,e.length/2)),this.backwardLayer.setWeights(e.slice(e.length/2))}},{key:"call",value:function(e){var t=new p.default(e.tensor.data,e.tensor.shape),r=new p.default(e.tensor.data,e.tensor.shape),n=this.forwardLayer.call(t),o=this.backwardLayer.call(r);if("concat"===this.mergeMode){var i=n.tensor.shape.slice();i[i.length-1]+=o.tensor.shape[i.length-1];var a=new p.default([],i);this.forwardLayer.returnSequences?(d.default.assign(a.tensor.hi(i[0],n.tensor.shape[1]).lo(0,0),n.tensor),d.default.assign(a.tensor.hi(i[0],i[1]).lo(0,n.tensor.shape[1]),o.tensor.step(-1))):(d.default.assign(a.tensor.hi(n.tensor.shape[0]).lo(0),n.tensor),d.default.assign(a.tensor.hi(i[0]).lo(n.tensor.shape[0]),o.tensor)),e.tensor=a.tensor}else if("sum"===this.mergeMode){var s=n.tensor.shape.slice(),u=new p.default([],s);d.default.addeq(u.tensor,n.tensor),d.default.addeq(u.tensor,o.tensor),e.tensor=u.tensor}else if("mul"===this.mergeMode){var l=n.tensor.shape.slice(),c=new p.default([],l);d.default.assigns(c.tensor,1),d.default.muleq(c.tensor,n.tensor),d.default.muleq(c.tensor,o.tensor),e.tensor=c.tensor}else if("ave"===this.mergeMode){var f=n.tensor.shape.slice(),h=new p.default([],f);d.default.addeq(h.tensor,n.tensor),d.default.addeq(h.tensor,o.tensor),d.default.divseq(h.tensor,2),e.tensor=h.tensor}return e}}]),t}(c.default);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),f=r(1),p=n(f),h=r(2),d=n(h),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.layerClass="TimeDistributed";var n=e.layer;if(!n)throw new Error("[TimeDistributed] wrapped layer is undefined.");return r.layer=n,r}return s(t,e),u(t,[{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"call",value:function(e){var t,r,n=[].concat(o(e.tensor.shape.slice(1))),i=new p.default([],n);d.default.assign(i.tensor,(t=e.tensor).pick.apply(t,[0].concat(o(n.map(function(e){return null})))));var a=this.layer.call(i),s=a.tensor.shape.slice(),u=new p.default([],[e.tensor.shape[0]].concat(o(s)));d.default.assign((r=u.tensor).pick.apply(r,[0].concat(o(s.map(function(e){return null})))),a.tensor);for(var l=1,c=e.tensor.shape[0];l<c;l++){var f,h,v=new p.default([],n);d.default.assign(v.tensor,(f=e.tensor).pick.apply(f,[l].concat(o(n.map(function(e){return null}))))),a=this.layer.call(v),d.default.assign((h=u.tensor).pick.apply(h,[l].concat(o(s.map(function(e){return null})))),a.tensor)}return e.tensor=u.tensor,e}}]),t}(c.default);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bidirectional=t.TimeDistributed=void 0;var o=r(127),i=n(o),a=r(126),s=n(a);t.TimeDistributed=i.default,t.Bidirectional=s.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5,n=(0,u.default)((0,a.default)(e)),o=t;if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++){if(!(0,c.default)(n[i]))return!1;if(n[i]<o[i]-r||n[i]>o[i]+r)return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.approxEquals=o;var i=r(70),a=n(i),s=r(64),u=n(s),l=r(248),c=n(l)},function(e,t,r){(function(t,r,n){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(t){e.exports=t()}(function(){var e,o,i;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}var r=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,r,n){"use strict";function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function i(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function a(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function s(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(e){u=e}var l=e("./schedule"),c=e("./queue"),f=e("./util");o.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},o.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(e,r){r?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},o.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(o.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?i.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},o.prototype.invoke=function(e,t,r){this._trampolineEnabled?a.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},o.prototype.settlePromises=function(e){this._trampolineEnabled?s.call(this,e):this._schedule(function(){e._settlePromises()})}):(o.prototype.invokeLater=i,o.prototype.invoke=a,o.prototype.settlePromises=s),o.prototype.invokeFirst=function(e,t,r){this._normalQueue.unshift(e,t,r),this._queueTick()},o.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},o.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},r.exports=o,r.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=!1,i=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var l=r(i),c=new e(t);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof e){var p={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(t,a,void 0,c,p),l._then(s,u,void 0,c,p),c._setOnCancel(l)}else c._resolveCallback(f);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";function n(){try{Promise===i&&(Promise=o)}catch(e){}return i}var o;"undefined"!=typeof Promise&&(o=Promise);var i=e("./promise")();i.noConflict=n,t.exports=i},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){function r(e,r){var n;if(null!=e&&(n=e[r]),"function"!=typeof n){var o="Object "+s.classString(e)+" has no method '"+s.toString(r)+"'";throw new t.TypeError(o)}return n}function n(e){var t=this.pop(),n=r(e,t);return n.apply(e,this)}function o(e){return e[this]}function i(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var a,s=e("./util"),u=s.canEvaluate;s.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,r="number"==typeof e;if(r)t=i;else if(u){var n=a(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),a=i.tryCatch,s=i.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=a(e).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){function r(e,r,s){return function(u){var l=s._boundValue();e:for(var c=0;c<e.length;++c){var f=e[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(r).call(l,u)}else if("function"==typeof f){var p=i(f).call(l,u);if(p===a)return p;if(p)return i(r).call(l,u)}else if(n.isObject(u)){for(var h=o(f),d=0;d<h.length;++d){var v=h[d];if(f[v]!=u[v])continue e}return i(r).call(l,u)}}return t}}var n=e("./util"),o=e("./es5").keys,i=n.tryCatch,a=n.errorObj;return r}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(n())}function r(){if(o)return new t}function n(){var e=i.length-1;if(e>=0)return i[e]}var o=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=r,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var r=e.prototype._pushContext,i=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=i,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=u,o=!1},o=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=n,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,r,n){"use strict";r.exports=function(r,n){function o(e,t){return{promise:t}}function i(){return!1}function a(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+N.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function s(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?N.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function u(){return this._onCancelField}function l(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!==(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new M(this._peekContext())}function v(e,t){if(B(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=O(e);N.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),N.notEnumerableProp(e,"__stackCleaned__",!0)}}}function y(e,t,r,n,o){if(void 0===e&&null!==t&&Z){if(void 0!==o&&o._returnedNonUndefined())return;if(0===(65535&n._bitField))return;r&&(r+=" ");var i="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),u=x(s),l=u.length-1;l>=0;--l){var c=u[l];if(!W.test(c)){var f=c.match(q);f&&(i="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0)for(var p=u[0],l=0;l<s.length;++l)if(s[l]===p){l>0&&(a="\n"+s[l-1]);break}}var h="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(h,!0,t)}}function _(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),b(r)}function b(e,t,n){if(ae.warnings){var o,i=new U(e);if(t)n._attachExtraTrace(i);else if(ae.longStackTraces&&(o=r._peekContext()))o.attachExtraTrace(i);else{var a=O(i);i.stack=a.message+"\n"+a.stack.join("\n")}te("warning",i)||E(i,"",!0)}}function g(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}function m(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],o=t.length-1,i=t[o],a=-1,s=n.length-1;s>=0;--s)if(n[s]===i){a=s;break}for(var s=a;s>=0;--s){var u=n[s];if(t[o]!==u)break;t.pop(),o--}t=n}}function x(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o="    (No stack trace)"===n||z.test(n),i=o&&ne(n);o&&!i&&(G&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function j(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||z.test(n))break}return r>0&&(t=t.slice(r)),t}function O(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?j(e):["    (No stack trace)"],{message:r,stack:x(t)}}function E(e,t,r){if("undefined"!=typeof console){var n;if(N.isObject(e)){var o=e.stack;n=t+H(o,e)}else n=t+String(e);"function"==typeof F?F(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function k(e,t,r,n){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){L.throwLater(e)}"unhandledRejection"===e?te(e,r,n)||o||E(r,"Unhandled rejection "):te(e,n)}function S(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():N.toString(e);var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(t))try{var n=JSON.stringify(e);t=n}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+P(t)+">, no stack trace)"}function P(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function C(){return"function"==typeof ie}function A(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function T(e,t){if(C()){for(var r,n,o=e.stack.split("\n"),i=t.stack.split("\n"),a=-1,s=-1,u=0;u<o.length;++u){var l=A(o[u]);if(l){r=l.fileName,a=l.line;break}}for(var u=0;u<i.length;++u){var l=A(i[u]);if(l){n=l.fileName,s=l.line;break}}a<0||s<0||!r||!n||r!==n||a>=s||(ne=function(e){if(V.test(e))return!0;var t=A(e);return!!(t&&t.fileName===r&&a<=t.line&&t.line<=s)})}}function M(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ie(this,M),t>32&&this.uncycle()}var R,I,F,D=r._getDomain,L=r._async,U=e("./errors").Warning,N=e("./util"),B=N.canAttachTrace,V=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,W=/\((?:timers\.js):\d+:\d+\)/,q=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,H=null,G=!1,Y=!(0==N.env("BLUEBIRD_DEBUG")),X=!(0==N.env("BLUEBIRD_WARNINGS")||!Y&&!N.env("BLUEBIRD_WARNINGS")),$=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!Y&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Z=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},r.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",R,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",I,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return b(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=D();I="function"==typeof e?null===t?e:N.domainBind(t,e):void 0},r.onUnhandledRejectionHandled=function(e){var t=D();R="function"==typeof e?null===t?e:N.domainBind(t,e):void 0};var Q=function(){};r.longStackTraces=function(){if(L.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ae.longStackTraces&&C()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace;ae.longStackTraces=!0,Q=function(){if(L.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,n.deactivateLongStackTraces(),L.enableTrampoline(),ae.longStackTraces=!1},r.prototype._captureStackTrace=d,r.prototype._attachExtraTrace=v,n.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return ae.longStackTraces&&C()};var K=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!N.global.dispatchEvent(r)}}if("function"==typeof Event){var e=new Event("CustomEvent");return N.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,!N.global.dispatchEvent(r)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!N.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),J=function(){return N.isNode?function(){return t.emit.apply(t,arguments)}:N.global?function(e){var t="on"+e.toLowerCase(),r=N.global[t];return!!r&&(r.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),ee={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:o},te=function(e){var t=!1;try{t=J.apply(null,arguments)}catch(e){L.throwLater(e),t=!0}var r=!1;try{r=K(e,ee[e].apply(null,arguments))}catch(e){L.throwLater(e),r=!0}return r||t};r.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&Q()),"warnings"in e){var t=e.warnings;ae.warnings=!!t,Z=ae.warnings,N.isObject(t)&&"wForgottenReturn"in t&&(Z=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ae.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=c,r.prototype._propagateFrom=f,r.prototype._onCancel=u,r.prototype._setOnCancel=l,r.prototype._attachCancellationCallback=s,r.prototype._execute=a,re=f,ae.cancellation=!0}"monitoring"in e&&(e.monitoring&&!ae.monitoring?(ae.monitoring=!0,r.prototype._fireEvent=te):!e.monitoring&&ae.monitoring&&(ae.monitoring=!1,r.prototype._fireEvent=i))},r.prototype._fireEvent=i,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var re=p,ne=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(M,Error),n.CapturedTrace=M,M.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,o=this;void 0!==o;++n)t.push(o),o=o._parent;e=this._length=n;for(var n=e-1;n>=0;--n){var i=t[n].stack;void 0===r[i]&&(r[i]=n)}for(var n=0;n<e;++n){var a=t[n].stack,s=r[a];if(void 0!==s&&s!==n){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var u=n>0?t[n-1]:this;s<e-1?(u._parent=t[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var l=u._length+1,c=n-2;c>=0;--c)t[c]._length=l,l++;return}}}},M.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=O(e),r=t.message,n=[t.stack],o=this;void 0!==o;)n.push(x(o.stack.split("\n"))),o=o._parent;w(n),m(n),N.notEnumerableProp(e,"stack",g(r,n)),N.notEnumerableProp(e,"__stackCleaned__",!0)}};var ie=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():S(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=e,H=t;var r=Error.captureStackTrace;return ne=function(e){return V.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,H=t,G=!0,function(e){e.stack=(new Error).stack};var o;try{throw new Error}catch(e){o="stack"in e}return"stack"in n||!o||"number"!=typeof Error.stackTraceLimit?(H=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?S(t):t.toString()},null):(z=e,H=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(F=function(e){console.warn(e)},N.isNode&&t.stderr.isTTY?F=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(F=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ae={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return $&&r.longStackTraces(),{longStackTraces:function(){return ae.longStackTraces},warnings:function(){return ae.warnings},cancellation:function(){return ae.cancellation},monitoring:function(){return ae.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return h},checkForgottenReturns:y,setBounds:T,warn:b,deprecated:_,CapturedTrace:M,fireDomEvent:K,fireGlobalEvent:J}}},{"./errors":12,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){function r(){return i(this)}function n(e,r){return o(e,r,t,t)}var o=e.reduce,i=e.all;e.prototype.each=function(e){return o(this,e,t,0)._then(r,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,n){return o(e,n,t,0)._then(r,void 0,void 0,e,void 0)},e.mapSeries=n}},{}],12:[function(e,t,r){"use strict";function n(e,t){function r(n){return this instanceof r?(f(this,"message","string"==typeof n?n:t),f(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return c(r,Error),r}function o(e){return this instanceof o?(f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new o(e)}var i,a,s=e("./es5"),u=s.freeze,l=e("./util"),c=l.inherits,f=l.notEnumerableProp,p=n("Warning","warning"),h=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),v=n("AggregateError","aggregate error");try{i=TypeError,a=RangeError}catch(e){i=n("TypeError","type error"),a=n("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<y.length;++_)"function"==typeof Array.prototype[y[_]]&&(v.prototype[y[_]]=Array.prototype[y[_]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var b=0;v.prototype.toString=function(){var e=Array(4*b+1).join(" "),t="\n"+e+"AggregateError of:\n";b++,e=Array(4*b+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];n=o.join("\n"),t+=n+"\n"}return b--,t},c(o,Error);var g=Error.__BluebirdErrorTypes__;g||(g=u({CancellationError:h,TimeoutError:d,OperationalError:o,RejectionError:o,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:i,RangeError:a,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t},u=function(e,t){return{value:e[t]}},l=function(e,t,r){return e[t]=r.value,e},c=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(e){return a}},p=function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}};t.exports={isArray:p,keys:s,names:s,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function i(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function a(){return u.call(this,this.promise._target()._settledValue())}function s(e){if(!i(this,e))return f.e=e,f}function u(e){var n=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(n._boundValue()):u.call(n._boundValue(),e);if(void 0!==l){n._setReturnedNonUndefined();var p=r(l,n);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new c("late cancellation observer");return n._attachExtraTrace(h),f.e=h,f}p.isPending()&&p._attachCancellationCallback(new o(this))}return p._then(a,s,void 0,this,void 0)}}}return n.isRejected()?(i(this),f.e=e,f):(i(this),e)}var l=e("./util"),c=t.CancellationError,f=l.errorObj;return n.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){i(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,o){return"function"!=typeof e?this.then():this._then(r,o,void 0,new n(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},n}},{"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){function s(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var a=h(r[i])(e);if(n._popContext(),a===p){n._pushContext();var s=t.reject(p.e);return n._popContext(),s}var u=o(a,n);if(u instanceof t)return u}return null}function u(e,r,o,i){if(a.cancellation()){var s=new t(n),u=this._finallyPromise=new t(n);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{var l=this._promise=new t(n);l._captureStackTrace()}this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var l=e("./errors"),c=l.TypeError,f=e("./util"),p=f.errorObj,h=f.tryCatch,d=[];f.inherits(u,i),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,r="undefined"!=typeof this._generator.return;if(r)this._promise._pushContext(),e=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=h(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=h(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=h(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var r=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var i=o(n,this._promise);if(!(i instanceof t)&&(i=s(i,this._yieldHandlers,this._promise),null===i))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var a=i._bitField;0===(50397184&a)?(this._yieldedPromise=i,i._proxy(this,null)):0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=u,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new n(void 0,void 0,r,o),a=i.promise();return i._generator=t,i._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+f.classString(e));d.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new u(e,this),o=n.promise();
return n._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var n}var o=[].slice.call(arguments);e&&o.pop();var n=new r(o).promise();return void 0!==e?n.spread(e):n}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){function s(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var o=l();this._callback=null===o?t:c.domainBind(o,t),this._preservedValues=n===i?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function u(e,r,o,i){if("function"!=typeof r)return n("expecting a function but got "+c.classString(r));var a=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));a=o.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(e,r,a,i).promise()}var l=t._getDomain,c=e("./util"),f=c.tryCatch,p=c.errorObj,h=t._async;c.inherits(s,r),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),s=this._preservedValues,u=this._limit;if(r<0){if(r=r*-1-1,n[r]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return n[r]=e,this._queue.push(r),!1;null!==s&&(s[r]=e);var l=this._promise,c=this._callback,h=l._boundValue();l._pushContext();var d=f(c).call(h,e,r,i),v=l._popContext();if(a.checkForgottenReturns(d,v,null!==s?"Promise.filter":"Promise.map",l),d===p)return this._reject(d.e),!0;var y=o(d,this._promise);if(y instanceof t){y=y._target();var _=y._bitField;if(0===(50397184&_))return u>=1&&this._inFlight++,n[r]=y,y._proxy(this,(r+1)*-1),!1;if(0===(33554432&_))return 0!==(16777216&_)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}n[r]=d}var b=++this._totalResolved;return b>=i&&(null!==s?this._filter(n,s):this._resolve(n),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),o=0,i=0;i<r;++i)e[i]&&(n[o++]=t[i]);n.length=o,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,r,n){return u(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var o=s(e).apply(this,arguments),a=n._popContext();return i.checkForgottenReturns(o,a,"Promise.method",n),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+a.classString(e));var n=new t(r);n._captureStackTrace(),n._pushContext();var u;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=a.isArray(l)?s(e).apply(c,l):s(e).call(c,l)}else u=s(e)();var f=n._popContext();return i.checkForgottenReturns(u,f,"Promise.try",n),n._resolveFromSyncValue(u),n},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";function n(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(n(e)){t=new l(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),o=0;o<r.length;++o){var i=r[o];f.test(i)||(t[i]=e[i])}return t}return a.markAsOriginatingFromRejection(e),e}function i(e,t){return function(r,n){if(null!==e){if(r){var i=o(s(r));e._attachExtraTrace(i),e._reject(i)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(n);e=null}}}var a=e("./util"),s=a.maybeWrapAsError,u=e("./errors"),l=u.OperationalError,c=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){function r(e,t){var r=this;if(!i.isArray(e))return n.call(r,e,t);var o=s(t).apply(r._boundValue(),[null].concat(e));o===u&&a.throwLater(o.e)}function n(e,t){var r=this,n=r._boundValue(),o=void 0===e?s(t).call(n,null):s(t).call(n,null,e);o===u&&a.throwLater(o.e)}function o(e,t){var r=this;if(!e){var n=new Error(e+"");n.cause=e,e=n}var o=s(t).call(r._boundValue(),e);o===u&&a.throwLater(o.e)}var i=e("./util"),a=t._async,s=i.tryCatch,u=i.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var i=n;void 0!==t&&Object(t).spread&&(i=r),this._then(i,o,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,r,n){"use strict";r.exports=function(){function n(){}function o(e,t){if("function"!=typeof t)throw new g("expecting a function but got "+d.classString(t));if(e.constructor!==i)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(e){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,e!==w&&(o(this,e),this._resolveFromExecutor(e)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function u(e){var t=new i(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,c=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new i.PromiseInspection(this._target())},p=function(e){return i.reject(new g(e))},h={},d=e("./util");l=d.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(i,"_getDomain",l);var v=e("./es5"),y=e("./async"),_=new y;v.defineProperty(i,"_async",{value:_});var b=e("./errors"),g=i.TypeError=b.TypeError;i.RangeError=b.RangeError;var m=i.CancellationError=b.CancellationError;i.TimeoutError=b.TimeoutError,i.OperationalError=b.OperationalError,i.RejectionError=b.OperationalError,i.AggregateError=b.AggregateError;var w=function(){},x={},j={},O=e("./thenables")(i,w),E=e("./promise_array")(i,w,O,p,n),k=e("./context")(i),S=k.create,P=e("./debuggability")(i,k),C=(P.CapturedTrace,e("./finally")(i,O)),A=e("./catch_filter")(j),T=e("./nodeback"),M=d.errorObj,R=d.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),o=0;for(r=0;r<t-1;++r){var i=arguments[r];if(!d.isObject(i))return p("expecting an object but got A catch statement predicate "+d.classString(i));n[o++]=i}return n.length=o,e=arguments[r],this.then(void 0,A(n,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},i.prototype.then=function(e,t){if(P.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(r+=", "+d.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){var r=this._then(e,t,void 0,void 0,void 0);r._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?p("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,x,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},i.getNewLibraryCopy=r.exports,i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(w);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=R(e)(T(t,r));return n===M&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new E(e).promise()},i.cast=function(e){var t=O(e);return t instanceof i||(t=new i(w),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new g("expecting a function but got "+d.classString(e));return _.setScheduler(e)},i.prototype._then=function(e,t,r,n,o){var a=void 0!==o,s=a?o:new i(w),u=this._target(),c=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!==(2097152&this._bitField)&&(n=0!==(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=l();if(0!==(50397184&c)){var p,h,v=u._settlePromiseCtx;0!==(33554432&c)?(h=u._rejectionHandler0,p=e):0!==(16777216&c)?(h=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,h=new m("late cancellation observer"),u._attachExtraTrace(h),p=t),_.invoke(v,u,{handler:null===f?p:"function"==typeof p&&d.domainBind(f,p),promise:s,receiver:n,value:h})}else u._addCallbacks(e,t,s,n,f);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=this._bitField&-65536|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){_.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),r=e._rejectionHandler0,n=e._promise0,o=e._receiverAt(0);void 0===o&&(o=h),this._addCallbacks(t,r,n,o,null)},i.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=h),this._addCallbacks(r,n,o,i,null)},i.prototype._addCallbacks=function(e,t,r,n,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:d.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:d.domainBind(o,t));else{var a=4*i-4;this[a+2]=r,this[a+3]=n,"function"==typeof e&&(this[a+0]=null===o?e:d.domainBind(o,e)),"function"==typeof t&&(this[a+1]=null===o?t:d.domainBind(o,t))}return this._setLength(i+1),i},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var r=O(e,this);if(!(r instanceof i))return this._fulfill(e);t&&this._propagateFrom(r,2);var n=r._target();if(n===this)return void this._reject(c());var o=n._bitField;if(0===(50397184&o)){var a=this._length();a>0&&n._migrateCallback0(this);for(var s=1;s<a;++s)n._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!==(33554432&o))this._fulfill(n._value());else if(0!==(16777216&o))this._reject(n._reason());else{var u=new m("late cancellation observer");n._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(e,t,r){var n=d.ensureErrorObject(e),o=n===e;if(!o&&!r&&P.warnings()){var i="a promise was rejected with a non-error: "+d.classString(e);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&o),this._reject(e)},i.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)},i.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0===(65536&o)){n._pushContext();var i;t===x?r&&"number"==typeof r.length?i=R(e).apply(this._boundValue(),r):(i=M,i.e=new g("cannot .spread() a non-array: "+d.classString(r))):i=R(e).call(t,r);var a=n._popContext();o=n._bitField,0===(65536&o)&&(i===j?n._reject(r):i===M?n._rejectCallback(i.e,!1):(P.checkForgottenReturns(i,a,"",n,this),n._resolveCallback(i)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,r,o){var a=e instanceof i,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(a&&e._invokeInternalOnCancel(),r instanceof C&&r.isFinallyHandler()?(r.cancelPromise=e,R(t).call(r,o)===M&&e._reject(M.e)):t===f?e._fulfill(f.call(r)):r instanceof n?r._promiseCancelled(e):a||e instanceof E?e._cancel():r.cancel()):"function"==typeof t?a?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,o,e)):t.call(r,o,e):r instanceof n?r._isResolved()||(0!==(33554432&s)?r._promiseFulfilled(o,e):r._promiseRejected(o,e)):a&&(u&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,o=e.value;"function"==typeof t?r instanceof i?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof i&&r._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=c();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():_.settlePromises(this))}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?_.fatalError(e,d.isNode):void((65535&t)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},i.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){P.deprecated("Promise.defer","new Promise");var e=new i(w);return{promise:e,resolve:a,reject:s}},d.notEnumerableProp(i,"_makeSelfResolutionError",c),e("./method")(i,w,O,p,P),e("./bind")(i,w,O,P),e("./cancel")(i,E,p,P),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,E,O,w,_,l),i.Promise=i,i.version="3.4.6",e("./map.js")(i,E,p,O,w,P),e("./call_get.js")(i),e("./using.js")(i,p,O,S,w,P),e("./timers.js")(i,w,P),e("./generators.js")(i,p,w,O,n,P),e("./nodeify.js")(i),e("./promisify.js")(i,w),e("./props.js")(i,E,O,p),e("./race.js")(i,w,O,p),e("./reduce.js")(i,E,p,O,w,P),e("./settle.js")(i,E,P),e("./some.js")(i,E,p),e("./filter.js")(i,w),e("./each.js")(i,w),e("./any.js")(i),d.toFastProperties(i),d.toFastProperties(i.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new i(w)),P.setBounds(y.firstLineError,d.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){function a(e){switch(e){case-2:return[];case-3:return{}}}function s(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");u.isArray;return u.inherits(s,i),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(r,i){var s=n(this._values,this._promise);if(s instanceof t){s=s._target();var l=s._bitField;if(this._values=s,0===(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,i);if(0===(33554432&l))return 0!==(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(s=u.asArray(s),null===s){var c=o("expecting an array or an iterable object but got "+u.classString(s)).reason();return void this._promise._rejectCallback(c,!1)}return 0===s.length?void(i===-5?this._resolveEmptyArray():this._resolve(a(i))):void this._iterate(s)},s.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var o=this._promise,i=!1,a=null,s=0;s<r;++s){var u=n(e[s],o);u instanceof t?(u=u._target(),a=u._bitField):a=null,i?null!==a&&u.suppressUnhandledRejections():null!==a?0===(50397184&a)?(u._proxy(this,s),this._values[s]=u):i=0!==(33554432&a)?this._promiseFulfilled(u._value(),s):0!==(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):i=this._promiseFulfilled(u,s)}i||o._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e){return!x.test(e)}function o(e){try{return e.__isPromisified__===!0}catch(e){return!1}}function i(e,t,r){var n=h.getDataPropertyOrDefault(e,t+r,m);return!!n&&o(n)}function a(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o))for(var i=o.replace(r,""),a=0;a<e.length;a+=2)if(e[a]===i)throw new b("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,r,n){for(var s=h.inheritedDataKeys(e),u=[],l=0;l<s.length;++l){var c=s[l],f=e[c],p=n===j||j(c,f,e);"function"!=typeof f||o(f)||i(e,c,t)||!n(c,f,e,p)||u.push(c,f)}return a(u,t,r),u}function u(e,n,o,i,a,s){function u(){var o=n;n===p&&(o=this);var i=new t(r);i._captureStackTrace();var a="string"==typeof c&&this!==l?this[c]:e,u=d(i,s);try{a.apply(o,v(arguments,u))}catch(e){i._rejectCallback(y(e),!0,!0)}return i._isFateSealed()||i._setAsyncGuaranteed(),i}var l=function(){return this}(),c=e;return"string"==typeof c&&(e=i),h.notEnumerableProp(u,"__isPromisified__",!0),u}function l(e,t,r,n,o){for(var i=new RegExp(O(t)+"$"),a=s(e,t,i,r),u=0,l=a.length;u<l;u+=2){var c=a[u],f=a[u+1],d=c+t;if(n===E)e[d]=E(c,p,c,f,t,o);else{var v=n(f,function(){return E(c,p,c,f,t,o)});h.notEnumerableProp(v,"__isPromisified__",!0),e[d]=v}}return h.toFastProperties(e),e}function c(e,t,r){return E(e,t,void 0,e,null,r)}var f,p={},h=e("./util"),d=e("./nodeback"),v=h.withAppended,y=h.maybeWrapAsError,_=h.canEvaluate,b=e("./errors").TypeError,g="Async",m={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),j=function(e){return h.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},O=function(e){return e.replace(/([$])/,"\\$")},E=_?f:u;t.promisify=function(e,t){if("function"!=typeof e)throw new b("expecting a function but got "+h.classString(e));if(o(e))return e;t=Object(t);var r=void 0===t.context?p:t.context,i=!!t.multiArgs,a=c(e,r,i);return h.copyDescriptors(e,a,n),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new b("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var r=!!t.multiArgs,n=t.suffix;"string"!=typeof n&&(n=g);var o=t.filter;"function"!=typeof o&&(o=j);var i=t.promisifier;if("function"!=typeof i&&(i=E),!h.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=h.inheritedDataKeys(e),s=0;s<a.length;++s){var u=e[a[s]];"constructor"!==a[s]&&h.isClass(u)&&(l(u.prototype,n,o,i,r),l(u,n,o,i,r))}return l(e,n,o,i,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){function i(e){var t,r=!1;if(void 0!==s&&e instanceof s)t=f(e),r=!0;else{var n=c.keys(e),o=n.length;t=new Array(2*o);for(var i=0;i<o;++i){var a=n[i];t[i]=e[a],t[i+o]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,-3)}function a(e){var r,a=n(e);return l(a)?(r=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new i(a).promise(),a instanceof t&&r._propagateFrom(a,2),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=e("./util"),l=u.isObject,c=e("./es5");"function"==typeof Map&&(s=Map);var f=function(){function e(e,n){this[t]=e,this[t+r]=n,t++}var t=0,r=0;return function(n){r=n.size,t=0;var o=new Array(2*n.size);return n.forEach(e,o),o}}(),p=function(e){for(var t=new s,r=e.length/2|0,n=0;n<r;++n){var o=e[r+n],i=e[n];t.set(o,i)}return t};u.inherits(i,r),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var r=++this._totalResolved;if(r>=this._length){var n;if(this._isMap)n=p(this._values);else{n={};for(var o=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+o]]=this._values[i]}return this._resolve(n),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+t],e[i+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var r=this._front+t&this._capacity-1;this[r]=e,this._length=t+1},o.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&t-1^t)-t;this[n]=e,this._front=n,this._length=this.length()+1},o.prototype.unshift=function(e,t,r){this._unshiftOne(r),this._unshiftOne(t),this._unshiftOne(e)},o.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=r,this._length=n},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var r=this._front,o=this._length,i=r+o&t-1;n(this,0,this,t,i)},t.exports=o},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){function i(e,i){var u=n(e);if(u instanceof t)return s(u);if(e=a.asArray(e),null===e)return o("expecting an array or an iterable object but got "+a.classString(e));var l=new t(r);void 0!==i&&l._propagateFrom(i,3);for(var c=l._fulfill,f=l._reject,p=0,h=e.length;p<h;++p){var d=e[p];(void 0!==d||p in e)&&t.cast(d)._then(c,f,void 0,l,null)}return l}var a=e("./util"),s=function(e){return e.then(function(t){return i(t,e)})};t.race=function(e){return i(e,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){function s(e,r,n,o){this.constructor$(e);var a=p();this._fn=null===a?r:h.domainBind(a,r),void 0!==n&&(n=t.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,o===i?this._eachValues=Array(this._length):0===o?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,r,o){if("function"!=typeof t)return n("expecting a function but got "+h.classString(t));var i=new s(e,t,r,o);return i.promise()}function c(e){this.accum=e,this.array._gotAccum(e);var r=o(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(e){var r=this.array,n=r._promise,o=d(r._fn);n._pushContext();var i;i=void 0!==r._eachValues?o.call(n._boundValue(),e,this.index,this.length):o.call(n._boundValue(),this.accum,e,this.index,this.length),i instanceof t&&(r._currentCancellable=i);var s=n._popContext();return a.checkForgottenReturns(i,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",n),i}var p=t._getDomain,h=e("./util"),d=h.tryCatch;h.inherits(s,r),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var r,n,o=e.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<o;++n){var i={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(c,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(u,u,void 0,r,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,r,n){return l(e,t,r,n)}}},{"./util":36}],29:[function(e,o,i){"use strict";var a,s=e("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},l=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=r.setImmediate,f=t.nextTick;a=s.isRecentNode?function(e){c.call(r,e)}:function(e){f.call(t,e)}}else if("function"==typeof l&&"function"==typeof l.resolve){var p=l.resolve();a=function(e){p.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof n?function(e){n(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div"),o=new MutationObserver(function(){e.classList.toggle("foo"),r=!1});o.observe(n,t);var i=function(){r||(r=!0,n.classList.toggle("foo"))};return function(r){var n=new MutationObserver(function(){n.disconnect(),r()});n.observe(e,t),i()}}();o.exports=a},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){function o(e){this.constructor$(e)}var i=t.PromiseInspection,a=e("./util");a.inherits(o,r),o.prototype._promiseResolved=function(e,t){this._values[e]=t;var r=++this._totalResolved;return r>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},o.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){function o(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new o(e),i=r.promise();return r.setHowMany(t),r.init(),i}var a=e("./util"),s=e("./errors").RangeError,u=e("./errors").AggregateError,l=a.isArray,c={};a.inherits(o,r),o.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()));
}},o.prototype.init=function(){this._initialized=!0,this._init()},o.prototype.setUnwrap=function(){this._unwrap=!0},o.prototype.howMany=function(){return this._howMany},o.prototype.setHowMany=function(e){this._howMany=e},o.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},o.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},o.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},o.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},o.prototype._fulfilled=function(){return this._totalResolved},o.prototype._rejected=function(){return this._values.length-this.length()},o.prototype._addRejected=function(e){this._values.push(e)},o.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},o.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},o.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},o.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return i(e,t)},t.prototype.some=function(e){return i(this,e)},t._SomePromiseArray=o}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){function n(e,n){if(c(e)){if(e instanceof t)return e;var o=i(e);if(o===l){n&&n._pushContext();var u=t.reject(o.e);return n&&n._popContext(),u}if("function"==typeof o){if(a(e)){var u=new t(r);return e._then(u._fulfill,u._reject,void 0,u,null),u}return s(e,o,n)}}return e}function o(e){return e.then}function i(e){try{return o(e)}catch(e){return l.e=e,l}}function a(e){try{return f.call(e,"_promise0")}catch(e){return!1}}function s(e,n,o){function i(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,f,!0),s=null)}var s=new t(r),c=s;o&&o._pushContext(),s._captureStackTrace(),o&&o._popContext();var f=!0,p=u.tryCatch(n).call(e,i,a);return f=!1,s&&p===l&&(s._rejectCallback(p.e,!0,!0),s=null),c}var u=e("./util"),l=u.errorObj,c=u.isObject,f={}.hasOwnProperty;return n}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){function o(e){this.handle=e}function i(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),u=t.TimeoutError;o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,i){var a,s;return void 0!==i?(a=t.resolve(i)._then(l,null,null,e,void 0),n.cancellation()&&i instanceof t&&a._setOnCancel(i)):(a=new t(r),s=setTimeout(function(){a._fulfill()},+e),n.cancellation()&&a._setOnCancel(new o(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return c(e,this)};var f=function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),s.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()};t.prototype.timeout=function(e,t){e=+e;var r,s,u=new o(setTimeout(function(){r.isPending()&&f(r,t,s)},e));return n.cancellation()?(s=this.then(),r=s._then(i,a,void 0,u,void 0),r._setOnCancel(u)):r=this._then(i,a,void 0,u,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){function s(e){setTimeout(function(){throw e},0)}function u(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function l(e,r){function o(){if(a>=l)return c._fulfill();var i=u(e[a++]);if(i instanceof t&&i._isDisposable()){try{i=n(i._getDisposer().tryDispose(r),e.promise)}catch(e){return s(e)}if(i instanceof t)return i._then(o,s,null,null,null)}o()}var a=0,l=e.length,c=new t(i);return o(),c}function c(e,t,r){this._data=e,this._promise=t,this._context=r}function f(e,t,r){this.constructor$(e,t,r)}function p(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function h(e){this.length=e,this.promise=null,this[e-1]=null}var d=e("./util"),v=e("./errors").TypeError,y=e("./util").inherits,_=d.errorObj,b=d.tryCatch,g={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},c.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==g?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},y(f,c),f.prototype.doDispose=function(e,t){var r=this.data();return r.call(e,e,t)},h.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return r("expecting a function but got "+d.classString(o));var i,s=!0;2===e&&Array.isArray(arguments[0])?(i=arguments[0],e=i.length,s=!1):(i=arguments,e--);for(var u=new h(e),f=0;f<e;++f){var v=i[f];if(c.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var g=n(v);g instanceof t&&(v=g._then(p,null,null,{resources:u,index:f},void 0))}u[f]=v}for(var m=new Array(u.length),f=0;f<m.length;++f)m[f]=t.resolve(u[f]).reflect();var w=t.all(m).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return _.e=r.error(),_;if(!r.isFulfilled())return void w.cancel();e[t]=r.value()}x._pushContext(),o=b(o);var n=s?o.apply(void 0,e):o(e),i=x._popContext();return a.checkForgottenReturns(n,i,"Promise.using",x),n}),x=w.lastly(function(){var e=new t.PromiseInspection(w);return l(u,e)});return u.promise=x,x._setOnCancel(u),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,o());throw new v}}},{"./errors":12,"./util":36}],36:[function(e,n,o){"use strict";function i(){try{var e=T;return T=null,e.apply(this,arguments)}catch(e){return A.e=e,A}}function a(e){return T=e,i}function s(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return s(e)?new Error(b(e)):e}function c(e,t){var r,n=e.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o}function f(e,t,r){if(!P.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function p(e,t,r){if(s(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return P.defineProperty(e,t,n),e}function h(e){throw e}function d(e){try{if("function"==typeof e){var t=P.names(e.prototype),r=P.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=F.test(e+"")&&P.names(e).length>0;if(r||n||o)return!0}return!1}catch(e){return!1}}function v(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e}function y(e){return D.test(e)}function _(e,t,r){for(var n=new Array(e),o=0;o<e;++o)n[o]=t+o+r;return n}function b(e){try{return e+""}catch(e){return"[no string representation]"}}function g(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function m(e){try{p(e,"isOperational",!0)}catch(e){}}function w(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function x(e){return g(e)&&P.propertyIsWritable(e,"stack")}function j(e){return{}.toString.call(e)}function O(e,t,r){for(var n=P.names(e),o=0;o<n.length;++o){var i=n[o];if(r(i))try{P.defineProperty(t,i,P.getDescriptor(e,i))}catch(e){}}}function E(e,t){return B?{NODE_ENV:"production"}[e]:t}function k(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function S(e,t){return e.bind(t)}var P=e("./es5"),C="undefined"==typeof navigator,A={e:{}},T,M="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r?r:void 0!==this?this:null,R=function(e,t){function r(){this.constructor=e,this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}var n={}.hasOwnProperty;return r.prototype=t.prototype,e.prototype=new r,e.prototype},I=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(P.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],o=Object.create(null);null!=e&&!t(e);){var i;try{i=r(e)}catch(e){return n}for(var a=0;a<i.length;++a){var s=i[a];if(!o[s]){o[s]=!0;var u=Object.getOwnPropertyDescriptor(e,s);null!=u&&null==u.get&&null==u.set&&n.push(s)}}e=P.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var i in r)if(n.call(r,i))o.push(i);else{for(var a=0;a<e.length;++a)if(n.call(e[a],i))continue e;o.push(i)}return o}}(),F=/this\s*\.\s*\S+\s*=/,D=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(e){return x(e)?e:new Error(b(e))}:function(e){if(x(e))return e;try{throw new Error(b(e))}catch(e){return e}}}(),U=function(e){return P.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};U=function(e){return P.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?N(e):null}}var B="undefined"!=typeof t&&"[object process]"===j(t).toLowerCase(),V={isClass:d,isIdentifier:y,inheritedDataKeys:I,getDataPropertyOrDefault:f,thrower:h,isArray:P.isArray,asArray:U,notEnumerableProp:p,isPrimitive:s,isObject:u,isError:g,canEvaluate:C,errorObj:A,tryCatch:a,inherits:R,withAppended:c,maybeWrapAsError:l,toFastProperties:v,filledRange:_,toString:b,canAttachTrace:x,ensureErrorObject:L,originatesFromRejection:w,markAsOriginatingFromRejection:m,classString:j,copyDescriptors:O,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:B,env:E,global:M,getNativePromise:k,domainBind:S};V.isRecentNode=V.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),V.isNode&&V.toFastProperties(t);try{throw new Error}catch(e){V.lastLineError=e}n.exports=V},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,r(71),r(12),r(42).setImmediate)},[310,133],[311,134],[312,132],function(e,t){"use strict";function r(e,t){for(var r=1,n=e.length,o=e[0],i=e[0],a=1;a<n;++a)if(i=o,o=e[a],t(o,i)){if(a===r){r++;continue}e[r++]=o}return e.length=r,e}function n(e){for(var t=1,r=e.length,n=e[0],o=e[0],i=1;i<r;++i,o=n)if(o=n,n=e[i],n!==o){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}function o(e,t,o){return 0===e.length?e:t?(o||e.sort(t),r(e,t)):(o||e.sort(),n(e))}e.exports=o},function(e,t,r){"use strict";(function(t){function n(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function o(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}function i(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:"undefined"!=typeof t?e in t:"undefined"!=typeof self&&e in self}function a(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}function s(e){function t(e){var t=y+e.replace(/\_/g,"__");return x.push(t),t}function r(e){var t="this_"+e.replace(/\_/g,"__");return j.push(t),t}function s(e,t){for(var r=e.range[0],n=e.range[1],o=r+1;o<n;++o)m[o]="";m[r]=t}function f(e){return"'"+e.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function p(e){return m.slice(e.range[0],e.range[1]).join("")}function h(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?O:O|E:"UpdateExpression"===e.parent.type?O|E:E}for(var d=["(",e,")()"].join(""),v=u.parse(d,{range:!0}),y="_inline_"+c++ +"_",_=a(v),b=new Array(_.length),g=0;g<_.length;++g)b[g]=new n([y,"arg",g,"_"].join(""),!1,!1);for(var m=new Array(d.length),g=0,w=d.length;g<w;++g)m[g]=d.charAt(g);var x=[],j=[],O=1,E=2;!function e(n,o){if(n.parent=o,"MemberExpression"===n.type)n.computed?(e(n.object,n),e(n.property,n)):"ThisExpression"===n.object.type?s(n,r(n.property.name)):e(n.object,n);else{if("ThisExpression"===n.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===n.type){var a=n.name,u=_.indexOf(a);if(u>=0){var l=b[u],c=h(n);c&O&&(l.lvalue=!0),c&E&&(l.rvalue=!0),++l.count,s(n,l.name)}else i(a)||s(n,t(a))}else if("Literal"===n.type)"string"==typeof n.value&&s(n,f(n.value));else{if("WithStatement"===n.type)throw new Error("cwise-parser: with() statements not allowed");for(var p=Object.keys(n),d=0,v=p.length;d<v;++d)if("parent"!==p[d]){var y=n[p[d]];if(y)if(y instanceof Array)for(var g=0;g<y.length;++g)y[g]&&"string"==typeof y[g].type&&e(y[g],n);else"string"==typeof y.type&&e(y,n)}}}}(v.body[0].expression.callee.body,void 0),l(x),l(j);var k=new o(p(v.body[0].expression.callee.body),b,j,x);return k}var u=r(136),l=r(137),c=0;e.exports=s}).call(t,r(12))},function(e,t,r){var n,o,i;!function(r,a){"use strict";o=[t],n=a,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function r(e){return e>=48&&e<=57}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function o(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function s(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&it.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&it.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function c(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function f(e){return"eval"===e||"arguments"===e}function p(e){if(ut&&c(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function h(e,r,n,o,i){var a;t("number"==typeof n,"Comment must have valid position"),vt.lastCommentStart>=n||(vt.lastCommentStart=n,a={type:e,value:r},yt.range&&(a.range=[n,o]),yt.loc&&(a.loc=i),yt.comments.push(a),yt.attachComment&&(yt.leadingComments.push(a),yt.trailingComments.push(a)))}function d(e){var t,r,n,o;for(t=lt-e,r={start:{line:ct,column:lt-ft-e}};lt<pt;)if(n=st.charCodeAt(lt),++lt,a(n))return yt.comments&&(o=st.slice(t+e,lt-1),r.end={line:ct,column:lt-ft-1},h("Line",o,t,lt-1,r)),13===n&&10===st.charCodeAt(lt)&&++lt,++ct,void(ft=lt);yt.comments&&(o=st.slice(t+e,lt),r.end={line:ct,column:lt-ft},h("Line",o,t,lt,r))}function v(){var e,t,r,n;for(yt.comments&&(e=lt-2,t={start:{line:ct,column:lt-ft-2}});lt<pt;)if(r=st.charCodeAt(lt),a(r))13===r&&10===st.charCodeAt(lt+1)&&++lt,++ct,++lt,ft=lt,lt>=pt&&V({},ot.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===st.charCodeAt(lt+1))return++lt,++lt,void(yt.comments&&(n=st.slice(e+2,lt-2),t.end={line:ct,column:lt-ft},h("Block",n,e,lt,t)));++lt}else++lt;V({},ot.UnexpectedToken,"ILLEGAL")}function y(){var e,t;for(t=0===lt;lt<pt;)if(e=st.charCodeAt(lt),i(e))++lt;else if(a(e))++lt,13===e&&10===st.charCodeAt(lt)&&++lt,++ct,ft=lt,t=!0;else if(47===e)if(e=st.charCodeAt(lt+1),47===e)++lt,++lt,d(2),t=!0;else{if(42!==e)break;++lt,++lt,v()}else if(t&&45===e){if(45!==st.charCodeAt(lt+1)||62!==st.charCodeAt(lt+2))break;lt+=3,d(3)}else{if(60!==e)break;if("!--"!==st.slice(lt+1,lt+4))break;++lt,++lt,++lt,++lt,d(4)}}function _(e){var t,r,o,i=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(lt<pt&&n(st[lt])))return"";o=st[lt++],i=16*i+"0123456789abcdef".indexOf(o.toLowerCase())}return String.fromCharCode(i)}function b(){var e,t;for(e=st.charCodeAt(lt++),t=String.fromCharCode(e),92===e&&(117!==st.charCodeAt(lt)&&V({},ot.UnexpectedToken,"ILLEGAL"),++lt,e=_("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||V({},ot.UnexpectedToken,"ILLEGAL"),t=e);lt<pt&&(e=st.charCodeAt(lt),u(e));)++lt,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==st.charCodeAt(lt)&&V({},ot.UnexpectedToken,"ILLEGAL"),++lt,e=_("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||V({},ot.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=lt++;lt<pt;){if(t=st.charCodeAt(lt),92===t)return lt=e,b();if(!u(t))break;++lt}return st.slice(e,lt)}function m(){var e,t,r;return e=lt,t=92===st.charCodeAt(lt)?b():g(),r=1===t.length?Je.Identifier:p(t)?Je.Keyword:"null"===t?Je.NullLiteral:"true"===t||"false"===t?Je.BooleanLiteral:Je.Identifier,{type:r,value:t,lineNumber:ct,lineStart:ft,start:e,end:lt}}function w(){var e,t,r,n,o=lt,i=st.charCodeAt(lt),a=st[lt];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++lt,yt.tokenize&&(40===i?yt.openParenToken=yt.tokens.length:123===i&&(yt.openCurlyToken=yt.tokens.length)),{type:Je.Punctuator,value:String.fromCharCode(i),lineNumber:ct,lineStart:ft,start:o,end:lt};default:if(e=st.charCodeAt(lt+1),61===e)switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return lt+=2,{type:Je.Punctuator,value:String.fromCharCode(i)+String.fromCharCode(e),lineNumber:ct,lineStart:ft,start:o,end:lt};case 33:case 61:return lt+=2,61===st.charCodeAt(lt)&&++lt,{type:Je.Punctuator,value:st.slice(o,lt),lineNumber:ct,lineStart:ft,start:o,end:lt}}}return n=st.substr(lt,4),">>>="===n?(lt+=4,{type:Je.Punctuator,value:n,lineNumber:ct,lineStart:ft,start:o,end:lt}):(r=n.substr(0,3),">>>"===r||"<<="===r||">>="===r?(lt+=3,{type:Je.Punctuator,value:r,lineNumber:ct,lineStart:ft,start:o,end:lt}):(t=r.substr(0,2),a===t[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?(lt+=2,{type:Je.Punctuator,value:t,lineNumber:ct,lineStart:ft,start:o,end:lt}):"<>=!+-*%&|^/".indexOf(a)>=0?(++lt,{type:Je.Punctuator,value:a,lineNumber:ct,lineStart:ft,start:o,end:lt}):void V({},ot.UnexpectedToken,"ILLEGAL")))}function x(e){for(var t="";lt<pt&&n(st[lt]);)t+=st[lt++];return 0===t.length&&V({},ot.UnexpectedToken,"ILLEGAL"),s(st.charCodeAt(lt))&&V({},ot.UnexpectedToken,"ILLEGAL"),{type:Je.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:ct,lineStart:ft,start:e,end:lt}}function j(e){for(var t="0"+st[lt++];lt<pt&&o(st[lt]);)t+=st[lt++];return(s(st.charCodeAt(lt))||r(st.charCodeAt(lt)))&&V({},ot.UnexpectedToken,"ILLEGAL"),{type:Je.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:ct,lineStart:ft,start:e,end:lt}}function O(){var e,t;for(e=lt+1;e<pt;++e){if(t=st[e],"8"===t||"9"===t)return!1;if(!o(t))return!0}return!0}function E(){var e,n,i;if(i=st[lt],t(r(i.charCodeAt(0))||"."===i,"Numeric literal must start with a decimal digit or a decimal point"),n=lt,e="","."!==i){if(e=st[lt++],i=st[lt],"0"===e){if("x"===i||"X"===i)return++lt,x(n);if(o(i)&&O())return j(n)}for(;r(st.charCodeAt(lt));)e+=st[lt++];i=st[lt]}if("."===i){for(e+=st[lt++];r(st.charCodeAt(lt));)e+=st[lt++];i=st[lt]}if("e"===i||"E"===i)if(e+=st[lt++],i=st[lt],"+"!==i&&"-"!==i||(e+=st[lt++]),r(st.charCodeAt(lt)))for(;r(st.charCodeAt(lt));)e+=st[lt++];else V({},ot.UnexpectedToken,"ILLEGAL");return s(st.charCodeAt(lt))&&V({},ot.UnexpectedToken,"ILLEGAL"),{type:Je.NumericLiteral,value:parseFloat(e),lineNumber:ct,lineStart:ft,start:n,end:lt}}function k(){var e,r,n,i,s,u,l,c,f="",p=!1;for(l=ct,c=ft,e=st[lt],t("'"===e||'"'===e,"String literal must starts with a quote"),r=lt,++lt;lt<pt;){if(n=st[lt++],n===e){e="";break}if("\\"===n)if(n=st[lt++],n&&a(n.charCodeAt(0)))++ct,"\r"===n&&"\n"===st[lt]&&++lt,ft=lt;else switch(n){case"u":case"x":u=lt,s=_(n),s?f+=s:(lt=u,f+=n);break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="\t";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\v";break;default:o(n)?(i="01234567".indexOf(n),0!==i&&(p=!0),lt<pt&&o(st[lt])&&(p=!0,i=8*i+"01234567".indexOf(st[lt++]),"0123".indexOf(n)>=0&&lt<pt&&o(st[lt])&&(i=8*i+"01234567".indexOf(st[lt++]))),f+=String.fromCharCode(i)):f+=n}else{if(a(n.charCodeAt(0)))break;f+=n}}return""!==e&&V({},ot.UnexpectedToken,"ILLEGAL"),{type:Je.StringLiteral,value:f,octal:p,startLineNumber:l,startLineStart:c,lineNumber:ct,lineStart:ft,start:r,end:lt}}function S(e,t){var r;try{r=new RegExp(e,t)}catch(e){V({},ot.InvalidRegExp)}return r}function P(){var e,r,n,o,i;for(e=st[lt],t("/"===e,"Regular expression literal must start with a slash"),r=st[lt++],n=!1,o=!1;lt<pt;)if(e=st[lt++],r+=e,"\\"===e)e=st[lt++],a(e.charCodeAt(0))&&V({},ot.UnterminatedRegExp),r+=e;else if(a(e.charCodeAt(0)))V({},ot.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){o=!0;break}"["===e&&(n=!0)}return o||V({},ot.UnterminatedRegExp),i=r.substr(1,r.length-2),{value:i,literal:r}}function C(){var e,t,r,n;for(t="",r="";lt<pt&&(e=st[lt],u(e.charCodeAt(0)));)if(++lt,"\\"===e&&lt<pt)if(e=st[lt],"u"===e){if(++lt,n=lt,e=_("u"))for(r+=e,t+="\\u";n<lt;++n)t+=st[n];else lt=n,r+="u",t+="\\u";W({},ot.UnexpectedToken,"ILLEGAL")}else t+="\\",W({},ot.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}function A(){var e,t,r,n;return dt=null,y(),e=lt,t=P(),r=C(),n=S(t.value,r.value),yt.tokenize?{type:Je.RegularExpression,value:n,lineNumber:ct,lineStart:ft,start:e,end:lt}:{literal:t.literal+r.literal,value:n,start:e,end:lt}}function T(){var e,t,r,n;return y(),e=lt,t={start:{line:ct,column:lt-ft}},r=A(),t.end={line:ct,column:lt-ft},yt.tokenize||(yt.tokens.length>0&&(n=yt.tokens[yt.tokens.length-1],n.range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||yt.tokens.pop())),yt.tokens.push({type:"RegularExpression",value:r.literal,range:[e,lt],loc:t})),r}function M(e){return e.type===Je.Identifier||e.type===Je.Keyword||e.type===Je.BooleanLiteral||e.type===Je.NullLiteral}function R(){var e,t;if(e=yt.tokens[yt.tokens.length-1],!e)return T();if("Punctuator"===e.type){if("]"===e.value)return w();if(")"===e.value)return t=yt.tokens[yt.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?w():T();if("}"===e.value){if(yt.tokens[yt.openCurlyToken-3]&&"Keyword"===yt.tokens[yt.openCurlyToken-3].type){if(t=yt.tokens[yt.openCurlyToken-4],!t)return w()}else{if(!yt.tokens[yt.openCurlyToken-4]||"Keyword"!==yt.tokens[yt.openCurlyToken-4].type)return w();if(t=yt.tokens[yt.openCurlyToken-5],!t)return T()}return tt.indexOf(t.value)>=0?w():T()}return T()}return"Keyword"===e.type&&"this"!==e.value?T():w()}function I(){var e;return y(),lt>=pt?{type:Je.EOF,lineNumber:ct,lineStart:ft,start:lt,end:lt}:(e=st.charCodeAt(lt),s(e)?m():40===e||41===e||59===e?w():39===e||34===e?k():46===e?r(st.charCodeAt(lt+1))?E():w():r(e)?E():yt.tokenize&&47===e?R():w())}function F(){var e,t,r;return y(),e={start:{line:ct,column:lt-ft}},t=I(),e.end={line:ct,column:lt-ft},t.type!==Je.EOF&&(r=st.slice(t.start,t.end),yt.tokens.push({type:et[t.type],value:r,range:[t.start,t.end],loc:e})),t}function D(){var e;return e=dt,lt=e.end,ct=e.lineNumber,ft=e.lineStart,dt="undefined"!=typeof yt.tokens?F():I(),lt=e.end,ct=e.lineNumber,ft=e.lineStart,e}function L(){var e,t,r;e=lt,t=ct,r=ft,dt="undefined"!=typeof yt.tokens?F():I(),lt=e,ct=t,ft=r}function U(e,t){this.line=e,this.column=t}function N(e,t,r,n){this.start=new U(e,t),this.end=new U(r,n)}function B(){var e,t,r,n;return e=lt,t=ct,r=ft,y(),n=ct!==t,lt=e,ct=t,ft=r,n}function V(e,r){var n,o=Array.prototype.slice.call(arguments,2),i=r.replace(/%(\d)/g,function(e,r){return t(r<o.length,"Message reference must be in range"),o[r]});throw"number"==typeof e.lineNumber?(n=new Error("Line "+e.lineNumber+": "+i),n.index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-ft+1):(n=new Error("Line "+ct+": "+i),n.index=lt,n.lineNumber=ct,n.column=lt-ft+1),n.description=i,n}function W(){try{V.apply(null,arguments)}catch(e){if(!yt.errors)throw e;yt.errors.push(e)}}function q(e){if(e.type===Je.EOF&&V(e,ot.UnexpectedEOS),e.type===Je.NumericLiteral&&V(e,ot.UnexpectedNumber),e.type===Je.StringLiteral&&V(e,ot.UnexpectedString),e.type===Je.Identifier&&V(e,ot.UnexpectedIdentifier),e.type===Je.Keyword){if(l(e.value))V(e,ot.UnexpectedReserved);else if(ut&&c(e.value))return void W(e,ot.StrictReservedWord);V(e,ot.UnexpectedToken,e.value)}V(e,ot.UnexpectedToken,e.value)}function z(e){var t=D();t.type===Je.Punctuator&&t.value===e||q(t)}function H(e){var t=D();t.type===Je.Keyword&&t.value===e||q(t)}function G(e){return dt.type===Je.Punctuator&&dt.value===e}function Y(e){return dt.type===Je.Keyword&&dt.value===e}function X(){var e;return dt.type===Je.Punctuator&&(e=dt.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function $(){var e,t=lt,r=ct,n=ft,o=dt;return 59===st.charCodeAt(lt)||G(";")?void D():(e=ct,y(),ct!==e?(lt=t,ct=r,ft=n,void(dt=o)):void(dt.type===Je.EOF||G("}")||q(dt)))}function Z(e){return e.type===rt.Identifier||e.type===rt.MemberExpression}function Q(){var e,t=[];for(e=dt,z("[");!G("]");)G(",")?(D(),t.push(null)):(t.push(ye()),G("]")||z(","));return D(),ht.markEnd(ht.createArrayExpression(t),e)}function K(e,t){var r,n,o;return r=ut,o=dt,n=qe(),t&&ut&&f(e[0].name)&&W(t,ot.StrictParamName),ut=r,ht.markEnd(ht.createFunctionExpression(null,e,[],n),o)}function J(){var e,t;return t=dt,e=D(),e.type===Je.StringLiteral||e.type===Je.NumericLiteral?(ut&&e.octal&&W(e,ot.StrictOctalLiteral),ht.markEnd(ht.createLiteral(e),t)):ht.markEnd(ht.createIdentifier(e.value),t)}function ee(){var e,t,r,n,o,i;return e=dt,i=dt,e.type===Je.Identifier?(r=J(),"get"!==e.value||G(":")?"set"!==e.value||G(":")?(z(":"),n=ye(),ht.markEnd(ht.createProperty("init",r,n),i)):(t=J(),z("("),e=dt,e.type!==Je.Identifier?(z(")"),W(e,ot.UnexpectedToken,e.value),n=K([])):(o=[me()],z(")"),n=K(o,e)),ht.markEnd(ht.createProperty("set",t,n),i)):(t=J(),z("("),z(")"),n=K([]),ht.markEnd(ht.createProperty("get",t,n),i))):e.type!==Je.EOF&&e.type!==Je.Punctuator?(t=J(),z(":"),n=ye(),ht.markEnd(ht.createProperty("init",t,n),i)):void q(e)}function te(){var e,t,r,n,o,i=[],a={},s=String;for(o=dt,z("{");!G("}");)e=ee(),t=e.key.type===rt.Identifier?e.key.name:s(e.key.value),n="init"===e.kind?nt.Data:"get"===e.kind?nt.Get:nt.Set,r="$"+t,Object.prototype.hasOwnProperty.call(a,r)?(a[r]===nt.Data?ut&&n===nt.Data?W({},ot.StrictDuplicateProperty):n!==nt.Data&&W({},ot.AccessorDataProperty):n===nt.Data?W({},ot.AccessorDataProperty):a[r]&n&&W({},ot.AccessorGetSet),a[r]|=n):a[r]=n,i.push(e),G("}")||z(",");return z("}"),ht.markEnd(ht.createObjectExpression(i),o)}function re(){var e;return z("("),e=_e(),z(")"),e}function ne(){var e,t,r,n;if(G("("))return re();if(G("["))return Q();if(G("{"))return te();if(e=dt.type,n=dt,e===Je.Identifier)r=ht.createIdentifier(D().value);else if(e===Je.StringLiteral||e===Je.NumericLiteral)ut&&dt.octal&&W(dt,ot.StrictOctalLiteral),r=ht.createLiteral(D());else if(e===Je.Keyword){if(Y("function"))return Ge();Y("this")?(D(),r=ht.createThisExpression()):q(D())}else e===Je.BooleanLiteral?(t=D(),t.value="true"===t.value,r=ht.createLiteral(t)):e===Je.NullLiteral?(t=D(),t.value=null,r=ht.createLiteral(t)):G("/")||G("/=")?(r="undefined"!=typeof yt.tokens?ht.createLiteral(T()):ht.createLiteral(A()),L()):q(D());return ht.markEnd(r,n)}function oe(){var e=[];if(z("("),!G(")"))for(;lt<pt&&(e.push(ye()),!G(")"));)z(",");return z(")"),e}function ie(){var e,t;return t=dt,e=D(),M(e)||q(e),ht.markEnd(ht.createIdentifier(e.value),t)}function ae(){return z("."),ie()}function se(){var e;return z("["),e=_e(),z("]"),e}function ue(){var e,t,r;return r=dt,H("new"),e=ce(),t=G("(")?oe():[],ht.markEnd(ht.createNewExpression(e,t),r)}function le(){var e,t,r,n,o=vt.allowIn;for(n=dt,vt.allowIn=!0,e=Y("new")?ue():ne();;){if(G("."))r=ae(),e=ht.createMemberExpression(".",e,r);else if(G("("))t=oe(),e=ht.createCallExpression(e,t);else{if(!G("["))break;r=se(),e=ht.createMemberExpression("[",e,r)}ht.markEnd(e,n)}return vt.allowIn=o,e}function ce(){var e,r,n;for(t(vt.allowIn,"callee of new expression always allow in keyword."),n=dt,e=Y("new")?ue():ne();G(".")||G("[");)G("[")?(r=se(),e=ht.createMemberExpression("[",e,r)):(r=ae(),e=ht.createMemberExpression(".",e,r)),ht.markEnd(e,n);return e}function fe(){var e,t,r=dt;return e=le(),dt.type===Je.Punctuator&&(!G("++")&&!G("--")||B()||(ut&&e.type===rt.Identifier&&f(e.name)&&W({},ot.StrictLHSPostfix),
Z(e)||W({},ot.InvalidLHSInAssignment),t=D(),e=ht.markEnd(ht.createPostfixExpression(t.value,e),r))),e}function pe(){var e,t,r;return dt.type!==Je.Punctuator&&dt.type!==Je.Keyword?t=fe():G("++")||G("--")?(r=dt,e=D(),t=pe(),ut&&t.type===rt.Identifier&&f(t.name)&&W({},ot.StrictLHSPrefix),Z(t)||W({},ot.InvalidLHSInAssignment),t=ht.createUnaryExpression(e.value,t),t=ht.markEnd(t,r)):G("+")||G("-")||G("~")||G("!")?(r=dt,e=D(),t=pe(),t=ht.createUnaryExpression(e.value,t),t=ht.markEnd(t,r)):Y("delete")||Y("void")||Y("typeof")?(r=dt,e=D(),t=pe(),t=ht.createUnaryExpression(e.value,t),t=ht.markEnd(t,r),ut&&"delete"===t.operator&&t.argument.type===rt.Identifier&&W({},ot.StrictDelete)):t=fe(),t}function he(e,t){var r=0;if(e.type!==Je.Punctuator&&e.type!==Je.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=t?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function de(){var e,t,r,n,o,i,a,s,u,l;if(e=dt,u=pe(),n=dt,o=he(n,vt.allowIn),0===o)return u;for(n.prec=o,D(),t=[e,dt],a=pe(),i=[u,n,a];(o=he(dt,vt.allowIn))>0;){for(;i.length>2&&o<=i[i.length-2].prec;)a=i.pop(),s=i.pop().value,u=i.pop(),r=ht.createBinaryExpression(s,u,a),t.pop(),e=t[t.length-1],ht.markEnd(r,e),i.push(r);n=D(),n.prec=o,i.push(n),t.push(dt),r=pe(),i.push(r)}for(l=i.length-1,r=i[l],t.pop();l>1;)r=ht.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,e=t.pop(),ht.markEnd(r,e);return r}function ve(){var e,t,r,n,o;return o=dt,e=de(),G("?")&&(D(),t=vt.allowIn,vt.allowIn=!0,r=ye(),vt.allowIn=t,z(":"),n=ye(),e=ht.createConditionalExpression(e,r,n),ht.markEnd(e,o)),e}function ye(){var e,t,r,n,o;return e=dt,o=dt,n=t=ve(),X()&&(Z(t)||W({},ot.InvalidLHSInAssignment),ut&&t.type===rt.Identifier&&f(t.name)&&W(e,ot.StrictLHSAssignment),e=D(),r=ye(),n=ht.markEnd(ht.createAssignmentExpression(e.value,t,r),o)),n}function _e(){var e,t=dt;if(e=ye(),G(",")){for(e=ht.createSequenceExpression([e]);lt<pt&&G(",");)D(),e.expressions.push(ye());ht.markEnd(e,t)}return e}function be(){for(var e,t=[];lt<pt&&!G("}")&&(e=Ye(),"undefined"!=typeof e);)t.push(e);return t}function ge(){var e,t;return t=dt,z("{"),e=be(),z("}"),ht.markEnd(ht.createBlockStatement(e),t)}function me(){var e,t;return t=dt,e=D(),e.type!==Je.Identifier&&q(e),ht.markEnd(ht.createIdentifier(e.value),t)}function we(e){var t,r,n=null;return r=dt,t=me(),ut&&f(t.name)&&W({},ot.StrictVarName),"const"===e?(z("="),n=ye()):G("=")&&(D(),n=ye()),ht.markEnd(ht.createVariableDeclarator(t,n),r)}function xe(e){var t=[];do{if(t.push(we(e)),!G(","))break;D()}while(lt<pt);return t}function je(){var e;return H("var"),e=xe(),$(),ht.createVariableDeclaration(e,"var")}function Oe(e){var t,r;return r=dt,H(e),t=xe(e),$(),ht.markEnd(ht.createVariableDeclaration(t,e),r)}function Ee(){return z(";"),ht.createEmptyStatement()}function ke(){var e=_e();return $(),ht.createExpressionStatement(e)}function Se(){var e,t,r;return H("if"),z("("),e=_e(),z(")"),t=We(),Y("else")?(D(),r=We()):r=null,ht.createIfStatement(e,t,r)}function Pe(){var e,t,r;return H("do"),r=vt.inIteration,vt.inIteration=!0,e=We(),vt.inIteration=r,H("while"),z("("),t=_e(),z(")"),G(";")&&D(),ht.createDoWhileStatement(e,t)}function Ce(){var e,t,r;return H("while"),z("("),e=_e(),z(")"),r=vt.inIteration,vt.inIteration=!0,t=We(),vt.inIteration=r,ht.createWhileStatement(e,t)}function Ae(){var e,t,r;return r=dt,e=D(),t=xe(),ht.markEnd(ht.createVariableDeclaration(t,e.value),r)}function Te(){var e,t,r,n,o,i,a,s=vt.allowIn;return e=t=r=null,H("for"),z("("),G(";")?D():(Y("var")||Y("let")?(vt.allowIn=!1,e=Ae(),vt.allowIn=s,1===e.declarations.length&&Y("in")&&(D(),n=e,o=_e(),e=null)):(vt.allowIn=!1,e=_e(),vt.allowIn=s,Y("in")&&(Z(e)||W({},ot.InvalidLHSInForIn),D(),n=e,o=_e(),e=null)),"undefined"==typeof n&&z(";")),"undefined"==typeof n&&(G(";")||(t=_e()),z(";"),G(")")||(r=_e())),z(")"),a=vt.inIteration,vt.inIteration=!0,i=We(),vt.inIteration=a,"undefined"==typeof n?ht.createForStatement(e,t,r,i):ht.createForInStatement(n,o,i)}function Me(){var e,t=null;return H("continue"),59===st.charCodeAt(lt)?(D(),vt.inIteration||V({},ot.IllegalContinue),ht.createContinueStatement(null)):B()?(vt.inIteration||V({},ot.IllegalContinue),ht.createContinueStatement(null)):(dt.type===Je.Identifier&&(t=me(),e="$"+t.name,Object.prototype.hasOwnProperty.call(vt.labelSet,e)||V({},ot.UnknownLabel,t.name)),$(),null!==t||vt.inIteration||V({},ot.IllegalContinue),ht.createContinueStatement(t))}function Re(){var e,t=null;return H("break"),59===st.charCodeAt(lt)?(D(),vt.inIteration||vt.inSwitch||V({},ot.IllegalBreak),ht.createBreakStatement(null)):B()?(vt.inIteration||vt.inSwitch||V({},ot.IllegalBreak),ht.createBreakStatement(null)):(dt.type===Je.Identifier&&(t=me(),e="$"+t.name,Object.prototype.hasOwnProperty.call(vt.labelSet,e)||V({},ot.UnknownLabel,t.name)),$(),null!==t||vt.inIteration||vt.inSwitch||V({},ot.IllegalBreak),ht.createBreakStatement(t))}function Ie(){var e=null;return H("return"),vt.inFunctionBody||W({},ot.IllegalReturn),32===st.charCodeAt(lt)&&s(st.charCodeAt(lt+1))?(e=_e(),$(),ht.createReturnStatement(e)):B()?ht.createReturnStatement(null):(G(";")||G("}")||dt.type===Je.EOF||(e=_e()),$(),ht.createReturnStatement(e))}function Fe(){var e,t;return ut&&(y(),W({},ot.StrictModeWith)),H("with"),z("("),e=_e(),z(")"),t=We(),ht.createWithStatement(e,t)}function De(){var e,t,r,n=[];for(r=dt,Y("default")?(D(),e=null):(H("case"),e=_e()),z(":");lt<pt&&!(G("}")||Y("default")||Y("case"));)t=We(),n.push(t);return ht.markEnd(ht.createSwitchCase(e,n),r)}function Le(){var e,t,r,n,o;if(H("switch"),z("("),e=_e(),z(")"),z("{"),t=[],G("}"))return D(),ht.createSwitchStatement(e,t);for(n=vt.inSwitch,vt.inSwitch=!0,o=!1;lt<pt&&!G("}");)r=De(),null===r.test&&(o&&V({},ot.MultipleDefaultsInSwitch),o=!0),t.push(r);return vt.inSwitch=n,z("}"),ht.createSwitchStatement(e,t)}function Ue(){var e;return H("throw"),B()&&V({},ot.NewlineAfterThrow),e=_e(),$(),ht.createThrowStatement(e)}function Ne(){var e,t,r;return r=dt,H("catch"),z("("),G(")")&&q(dt),e=me(),ut&&f(e.name)&&W({},ot.StrictCatchVariable),z(")"),t=ge(),ht.markEnd(ht.createCatchClause(e,t),r)}function Be(){var e,t=[],r=null;return H("try"),e=ge(),Y("catch")&&t.push(Ne()),Y("finally")&&(D(),r=ge()),0!==t.length||r||V({},ot.NoCatchOrFinally),ht.createTryStatement(e,[],t,r)}function Ve(){return H("debugger"),$(),ht.createDebuggerStatement()}function We(){var e,t,r,n,o=dt.type;if(o===Je.EOF&&q(dt),o===Je.Punctuator&&"{"===dt.value)return ge();if(n=dt,o===Je.Punctuator)switch(dt.value){case";":return ht.markEnd(Ee(),n);case"(":return ht.markEnd(ke(),n)}if(o===Je.Keyword)switch(dt.value){case"break":return ht.markEnd(Re(),n);case"continue":return ht.markEnd(Me(),n);case"debugger":return ht.markEnd(Ve(),n);case"do":return ht.markEnd(Pe(),n);case"for":return ht.markEnd(Te(),n);case"function":return ht.markEnd(He(),n);case"if":return ht.markEnd(Se(),n);case"return":return ht.markEnd(Ie(),n);case"switch":return ht.markEnd(Le(),n);case"throw":return ht.markEnd(Ue(),n);case"try":return ht.markEnd(Be(),n);case"var":return ht.markEnd(je(),n);case"while":return ht.markEnd(Ce(),n);case"with":return ht.markEnd(Fe(),n)}return e=_e(),e.type===rt.Identifier&&G(":")?(D(),r="$"+e.name,Object.prototype.hasOwnProperty.call(vt.labelSet,r)&&V({},ot.Redeclaration,"Label",e.name),vt.labelSet[r]=!0,t=We(),delete vt.labelSet[r],ht.markEnd(ht.createLabeledStatement(e,t),n)):($(),ht.markEnd(ht.createExpressionStatement(e),n))}function qe(){var e,t,r,n,o,i,a,s,u,l=[];for(u=dt,z("{");lt<pt&&dt.type===Je.StringLiteral&&(t=dt,e=Ye(),l.push(e),e.expression.type===rt.Literal);)r=st.slice(t.start+1,t.end-1),"use strict"===r?(ut=!0,n&&W(n,ot.StrictOctalLiteral)):!n&&t.octal&&(n=t);for(o=vt.labelSet,i=vt.inIteration,a=vt.inSwitch,s=vt.inFunctionBody,vt.labelSet={},vt.inIteration=!1,vt.inSwitch=!1,vt.inFunctionBody=!0;lt<pt&&!G("}")&&(e=Ye(),"undefined"!=typeof e);)l.push(e);return z("}"),vt.labelSet=o,vt.inIteration=i,vt.inSwitch=a,vt.inFunctionBody=s,ht.markEnd(ht.createBlockStatement(l),u)}function ze(e){var t,r,n,o,i,a,s=[];if(z("("),!G(")"))for(o={};lt<pt&&(r=dt,t=me(),i="$"+r.value,ut?(f(r.value)&&(n=r,a=ot.StrictParamName),Object.prototype.hasOwnProperty.call(o,i)&&(n=r,a=ot.StrictParamDupe)):e||(f(r.value)?(e=r,a=ot.StrictParamName):c(r.value)?(e=r,a=ot.StrictReservedWord):Object.prototype.hasOwnProperty.call(o,i)&&(e=r,a=ot.StrictParamDupe)),s.push(t),o[i]=!0,!G(")"));)z(",");return z(")"),{params:s,stricted:n,firstRestricted:e,message:a}}function He(){var e,t,r,n,o,i,a,s,u,l=[];return u=dt,H("function"),r=dt,e=me(),ut?f(r.value)&&W(r,ot.StrictFunctionName):f(r.value)?(i=r,a=ot.StrictFunctionName):c(r.value)&&(i=r,a=ot.StrictReservedWord),o=ze(i),l=o.params,n=o.stricted,i=o.firstRestricted,o.message&&(a=o.message),s=ut,t=qe(),ut&&i&&V(i,a),ut&&n&&W(n,a),ut=s,ht.markEnd(ht.createFunctionDeclaration(e,l,[],t),u)}function Ge(){var e,t,r,n,o,i,a,s,u=null,l=[];return s=dt,H("function"),G("(")||(e=dt,u=me(),ut?f(e.value)&&W(e,ot.StrictFunctionName):f(e.value)?(r=e,n=ot.StrictFunctionName):c(e.value)&&(r=e,n=ot.StrictReservedWord)),o=ze(r),l=o.params,t=o.stricted,r=o.firstRestricted,o.message&&(n=o.message),a=ut,i=qe(),ut&&r&&V(r,n),ut&&t&&W(t,n),ut=a,ht.markEnd(ht.createFunctionExpression(u,l,[],i),s)}function Ye(){if(dt.type===Je.Keyword)switch(dt.value){case"const":case"let":return Oe(dt.value);case"function":return He();default:return We()}if(dt.type!==Je.EOF)return We()}function Xe(){for(var e,t,r,n,o=[];lt<pt&&(t=dt,t.type===Je.StringLiteral)&&(e=Ye(),o.push(e),e.expression.type===rt.Literal);)r=st.slice(t.start+1,t.end-1),"use strict"===r?(ut=!0,n&&W(n,ot.StrictOctalLiteral)):!n&&t.octal&&(n=t);for(;lt<pt&&(e=Ye(),"undefined"!=typeof e);)o.push(e);return o}function $e(){var e,t;return y(),L(),t=dt,ut=!1,e=Xe(),ht.markEnd(ht.createProgram(e),t)}function Ze(){var e,t,r,n=[];for(e=0;e<yt.tokens.length;++e)t=yt.tokens[e],r={type:t.type,value:t.value},yt.range&&(r.range=t.range),yt.loc&&(r.loc=t.loc),n.push(r);yt.tokens=n}function Qe(e,t){var r,n,o;r=String,"string"==typeof e||e instanceof String||(e=r(e)),ht=at,st=e,lt=0,ct=st.length>0?1:0,ft=0,pt=st.length,dt=null,vt={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},yt={},t=t||{},t.tokens=!0,yt.tokens=[],yt.tokenize=!0,yt.openParenToken=-1,yt.openCurlyToken=-1,yt.range="boolean"==typeof t.range&&t.range,yt.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(yt.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(yt.errors=[]);try{if(L(),dt.type===Je.EOF)return yt.tokens;for(n=D();dt.type!==Je.EOF;)try{n=D()}catch(e){if(n=dt,yt.errors){yt.errors.push(e);break}throw e}Ze(),o=yt.tokens,"undefined"!=typeof yt.comments&&(o.comments=yt.comments),"undefined"!=typeof yt.errors&&(o.errors=yt.errors)}catch(e){throw e}finally{yt={}}return o}function Ke(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),ht=at,st=e,lt=0,ct=st.length>0?1:0,ft=0,pt=st.length,dt=null,vt={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},yt={},"undefined"!=typeof t&&(yt.range="boolean"==typeof t.range&&t.range,yt.loc="boolean"==typeof t.loc&&t.loc,yt.attachComment="boolean"==typeof t.attachComment&&t.attachComment,yt.loc&&null!==t.source&&void 0!==t.source&&(yt.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(yt.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(yt.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(yt.errors=[]),yt.attachComment&&(yt.range=!0,yt.comments=[],yt.bottomRightStack=[],yt.trailingComments=[],yt.leadingComments=[]));try{r=$e(),"undefined"!=typeof yt.comments&&(r.comments=yt.comments),"undefined"!=typeof yt.tokens&&(Ze(),r.tokens=yt.tokens),"undefined"!=typeof yt.errors&&(r.errors=yt.errors)}catch(e){throw e}finally{yt={}}return r}var Je,et,tt,rt,nt,ot,it,at,st,ut,lt,ct,ft,pt,ht,dt,vt,yt;Je={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},et={},et[Je.BooleanLiteral]="Boolean",et[Je.EOF]="<end>",et[Je.Identifier]="Identifier",et[Je.Keyword]="Keyword",et[Je.NullLiteral]="Null",et[Je.NumericLiteral]="Numeric",et[Je.Punctuator]="Punctuator",et[Je.StringLiteral]="String",et[Je.RegularExpression]="RegularExpression",tt=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],rt={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},nt={Data:1,Get:2,Set:4},ot={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},it={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},at={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===rt.Program&&e.body.length>0)){for(yt.trailingComments.length>0?yt.trailingComments[0].range[0]>=e.range[1]?(r=yt.trailingComments,yt.trailingComments=[]):yt.trailingComments.length=0:yt.bottomRightStack.length>0&&yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments&&yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments,delete yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments);yt.bottomRightStack.length>0&&yt.bottomRightStack[yt.bottomRightStack.length-1].range[0]>=e.range[0];)t=yt.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):yt.leadingComments.length>0&&yt.leadingComments[yt.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=yt.leadingComments,yt.leadingComments=[]),r&&(e.trailingComments=r),yt.bottomRightStack.push(e)}},markEnd:function(e,t){return yt.range&&(e.range=[t.start,lt]),yt.loc&&(e.loc=new N(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),ct,lt-ft),this.postProcess(e)),yt.attachComment&&this.processComment(e),e},postProcess:function(e){return yt.source&&(e.loc.source=yt.source),e},createArrayExpression:function(e){return{type:rt.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:rt.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){var n="||"===e||"&&"===e?rt.LogicalExpression:rt.BinaryExpression;return{type:n,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:rt.BlockStatement,body:e}},createBreakStatement:function(e){return{type:rt.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:rt.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:rt.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:rt.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:rt.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:rt.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:rt.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:rt.EmptyStatement}},createExpressionStatement:function(e){return{type:rt.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:rt.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:rt.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:rt.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:rt.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:rt.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:rt.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:rt.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:rt.Literal,value:e.value,raw:st.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:rt.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:rt.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:rt.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:rt.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:rt.Program,body:e}},createProperty:function(e,t,r){return{type:rt.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:rt.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:rt.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:rt.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:rt.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:rt.ThisExpression}},createThrowStatement:function(e){return{type:rt.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:rt.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:rt.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:rt.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:rt.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:rt.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:rt.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:rt.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=Qe,e.parse=Ke,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in rt)rt.hasOwnProperty(e)&&(t[e]=rt[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},134,function(e,t,r){var n=r(7),o=r(5),i=n(o,"DataView");e.exports=i},function(e,t,r){function n(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(199),i=r(200),a=r(201),s=r(202),u=r(203);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=u,e.exports=n},function(e,t,r){var n=r(7),o=r(5),i=n(o,"Promise");e.exports=i},function(e,t,r){var n=r(7),o=r(5),i=n(o,"Set");e.exports=i},function(e,t,r){function n(e){var t=-1,r=e?e.length:0;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=r(30),i=r(223),a=r(224);n.prototype.add=n.prototype.push=i,n.prototype.has=a,e.exports=n},function(e,t,r){var n=r(5),o=n.Uint8Array;e.exports=o},function(e,t,r){var n=r(7),o=r(5),i=n(o,"WeakMap");e.exports=i},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(!t(e[r],r,e))return!1;return!0}e.exports=r},function(e,t,r){function n(e,t){var r=a(e),n=!r&&i(e),c=!r&&!n&&s(e),p=!r&&!n&&!c&&l(e),h=r||n||c||p,d=h?o(e.length,String):[],v=d.length;for(var y in e)!t&&!f.call(e,y)||h&&("length"==y||c&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,v))||d.push(y);return d}var o=r(176),i=r(36),a=r(6),s=r(65),u=r(33),l=r(67),c=Object.prototype,f=c.hasOwnProperty;e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}e.exports=r},function(e,t){function r(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}e.exports=r},function(e,t){function r(e){return e.split("")}e.exports=r},function(e,t){function r(e){return e.match(n)||[]}var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=r},function(e,t,r){var n=r(51),o=r(184),i=o(n);e.exports=i},function(e,t,r){function n(e,t){var r=!0;return o(e,function(e,n,o){return r=!!t(e,n,o)}),r}var o=r(153);e.exports=n},function(e,t){function r(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=r},function(e,t,r){var n=r(185),o=n();e.exports=o},function(e,t){function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=r},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){function n(e){return o(e)&&s.call(e)==i}var o=r(14),i="[object Arguments]",a=Object.prototype,s=a.toString;e.exports=n},function(e,t,r){function n(e,t,r,n,y,b){var g=l(e),m=l(t),w=d,x=d;g||(w=u(e),w=w==h?v:w),m||(x=u(t),x=x==h?v:x);var j=w==v,O=x==v,E=w==x;if(E&&c(e)){if(!c(t))return!1;g=!0,j=!1}if(E&&!j)return b||(b=new o),g||f(e)?i(e,t,r,n,y,b):a(e,t,w,r,n,y,b);if(!(y&p)){var k=j&&_.call(e,"__wrapped__"),S=O&&_.call(t,"__wrapped__");if(k||S){var P=k?e.value():e,C=S?t.value():t;return b||(b=new o),r(P,C,n,y,b)}}return!!E&&(b||(b=new o),s(e,t,r,n,y,b))}var o=r(48),i=r(55),a=r(192),s=r(193),u=r(57),l=r(6),c=r(65),f=r(67),p=2,h="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t,r,n){var u=r.length,l=u,c=!n;if(null==e)return!l;for(e=Object(e);u--;){var f=r[u];if(c&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<l;){f=r[u];var p=f[0],h=e[p],d=f[1];if(c&&f[2]){if(void 0===h&&!(p in e))return!1}else{var v=new o;if(n)var y=n(h,d,p,e,t,v);if(!(void 0===y?i(d,h,n,a|s,v):y))return!1}}return!0}var o=r(48),i=r(32),a=1,s=2;e.exports=n},function(e,t,r){function n(e){if(!a(e)||i(e))return!1;var t=o(e)?d:l;return t.test(s(e))}var o=r(66),i=r(206),a=r(9),s=r(63),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,p=c.toString,h=f.hasOwnProperty,d=RegExp("^"+p.call(h).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t,r){function n(e){return i(e)&&o(e.length)&&!!A[M.call(e)]}var o=r(38),i=r(14),a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",b="[object WeakMap]",g="[object ArrayBuffer]",m="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",O="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",S="[object Uint8ClampedArray]",P="[object Uint16Array]",C="[object Uint32Array]",A={};A[w]=A[x]=A[j]=A[O]=A[E]=A[k]=A[S]=A[P]=A[C]=!0,A[a]=A[s]=A[g]=A[u]=A[m]=A[l]=A[c]=A[f]=A[p]=A[h]=A[d]=A[v]=A[y]=A[_]=A[b]=!1;var T=Object.prototype,M=T.toString;e.exports=n},function(e,t,r){function n(e){if(!o(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=r(207),i=r(219),a=Object.prototype,s=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=r(161),i=r(195),a=r(62);e.exports=n},function(e,t,r){function n(e,t){return s(e)&&u(t)?l(c(e),t):function(r){var n=i(r,e);return void 0===n&&n===t?a(r,e):o(t,n,void 0,f|p)}}var o=r(32),i=r(246),a=r(247),s=r(22),u=r(60),l=r(62),c=r(13),f=1,p=2;e.exports=n},function(e,t,r){function n(e,t){return e=Object(e),o(e,t,function(t,r){return r in e})}var o=r(168);e.exports=n},function(e,t,r){function n(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],u=e[s];r(u,s)&&o(a,s,u)}return a}var o=r(49);e.exports=n},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=r(52);e.exports=n},function(e,t){function r(e){return function(t){return null==e?void 0:e[t]}}e.exports=r},function(e,t){function r(e,t,r,i){for(var a=-1,s=o(n((t-e)/(r||1)),0),u=Array(s);s--;)u[i?s:++a]=e,e+=r;return u}var n=Math.ceil,o=Math.max;e.exports=r},function(e,t,r){var n=r(240),o=r(54),i=r(35),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=a},function(e,t){function r(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}e.exports=r},function(e,t){function r(e,t){for(var r,n=-1,o=e.length;++n<o;){var i=t(e[n]);void 0!==i&&(r=void 0===r?i:r+i)}return r}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}e.exports=r},function(e,t,r){function n(e,t){return o(t,function(t){return[t,e[t]]})}var o=r(18);e.exports=n},function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return i(e,n)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var o=r(31),i=r(18),a=r(6),s=r(25),u=1/0,l=o?o.prototype:void 0,c=l?l.toString:void 0;e.exports=n},function(e,t){function r(e){return function(t){return e(t)}}e.exports=r},function(e,t,r){function n(e,t){return o(t,function(t){return e[t]})}var o=r(18);e.exports=n},function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t,r){function n(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:o(e,t,r)}var o=r(174);e.exports=n},function(e,t,r){var n=r(5),o=n["__core-js_shared__"];e.exports=o},function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!o(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}var o=r(24);e.exports=n},function(e,t){function r(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(r(i[u],u,i)===!1)break}return t}}e.exports=r},function(e,t,r){function n(e){return function(t){t=s(t);var r=i(t)?a(t):void 0,n=r?r[0]:t.charAt(0),u=r?o(r,1).join(""):t.slice(1);return n[e]()+u}}var o=r(182),i=r(58),a=r(234),s=r(15);e.exports=n},function(e,t,r){function n(e){return function(t){return o(a(i(t).replace(u,"")),e,"")}}var o=r(149),i=r(241),a=r(261),s="['’]",u=RegExp(s,"g");e.exports=n},function(e,t,r){function n(e){return function(t,r,n){var s=Object(t);if(!i(t)){var u=o(r,3);t=a(t),r=function(e){return u(s[e],e,s)}}var l=e(t,r,n);return l>-1?s[u?t[l]:l]:void 0}}var o=r(20),i=r(24),a=r(8);e.exports=n},function(e,t,r){function n(e){return function(t,r,n){
return n&&"number"!=typeof n&&i(t,r,n)&&(r=n=void 0),t=a(t),void 0===r?(r=t,t=0):r=a(r),n=void 0===n?t<r?1:-1:a(n),o(t,r,n,e)}}var o=r(172),i=r(59),a=r(68);e.exports=n},function(e,t,r){function n(e){return function(t){var r=i(t);return r==u?a(t):r==l?s(t):o(t,e(t))}}var o=r(177),i=r(57),a=r(61),s=r(226),u="[object Map]",l="[object Set]";e.exports=n},function(e,t,r){var n=r(171),o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},i=n(o);e.exports=i},function(e,t,r){function n(e,t,r,n,o,j,E){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!n(new i(e),new i(t)));case p:case h:case y:return a(+e,+t);case d:return e.name==t.name&&e.message==t.message;case _:case g:return e==t+"";case v:var k=u;case b:var S=j&f;if(k||(k=l),e.size!=t.size&&!S)return!1;var P=E.get(e);if(P)return P==t;j|=c,E.set(e,t);var C=s(k(e),k(t),n,o,j,E);return E.delete(e),C;case m:if(O)return O.call(e)==O.call(t)}return!1}var o=r(31),i=r(143),a=r(34),s=r(55),u=r(61),l=r(225),c=1,f=2,p="[object Boolean]",h="[object Date]",d="[object Error]",v="[object Map]",y="[object Number]",_="[object RegExp]",b="[object Set]",g="[object String]",m="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",j=o?o.prototype:void 0,O=j?j.valueOf:void 0;e.exports=n},function(e,t,r){function n(e,t,r,n,a,u){var l=a&i,c=o(e),f=c.length,p=o(t),h=p.length;if(f!=h&&!l)return!1;for(var d=f;d--;){var v=c[d];if(!(l?v in t:s.call(t,v)))return!1}var y=u.get(e);if(y&&u.get(t))return y==t;var _=!0;u.set(e,t),u.set(t,e);for(var b=l;++d<f;){v=c[d];var g=e[v],m=t[v];if(n)var w=l?n(m,g,v,t,e,u):n(g,m,v,e,t,u);if(!(void 0===w?g===m||r(g,m,n,a,u):w)){_=!1;break}b||(b="constructor"==v)}if(_&&!b){var x=e.constructor,j=t.constructor;x!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j)&&(_=!1)}return u.delete(e),u.delete(t),_}var o=r(8),i=2,a=Object.prototype,s=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){return a(i(e,void 0,o),e+"")}var o=r(245),i=r(222),a=r(227);e.exports=n},function(e,t,r){function n(e){for(var t=i(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,o(a)]}return t}var o=r(60),i=r(8);e.exports=n},function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},function(e,t,r){function n(e,t,r){t=u(t,e)?[t]:o(t);for(var n=-1,f=t.length,p=!1;++n<f;){var h=c(t[n]);if(!(p=null!=e&&r(e,h)))break;e=e[h]}return p||++n!=f?p:(f=e?e.length:0,!!f&&l(f)&&s(h,f)&&(a(e)||i(e)))}var o=r(53),i=r(36),a=r(6),s=r(33),u=r(22),l=r(38),c=r(13);e.exports=n},function(e,t){function r(e){return n.test(e)}var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=r},function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=r(23);e.exports=n},function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=r},function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}var o=r(23),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=r(23),i=Object.prototype,a=i.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?i:t,this}var o=r(23),i="__lodash_hash_undefined__";e.exports=n},function(e,t,r){function n(e){return a(e)||i(e)||!!(s&&e&&e[s])}var o=r(31),i=r(36),a=r(6),s=o?o.isConcatSpreadable:void 0;e.exports=n},function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},function(e,t,r){function n(e){return!!i&&i in e}var o=r(183),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t){function r(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||n;return e===r}var n=Object.prototype;e.exports=r},function(e,t){function r(){this.__data__=[],this.size=0}e.exports=r},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():a.call(t,r,1),--this.size,!0}var o=r(19),i=Array.prototype,a=i.splice;e.exports=n},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=r(19);e.exports=n},function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=r(19);e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=r(19);e.exports=n},function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=r(139),i=r(17),a=r(29);e.exports=n},function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=r(21);e.exports=n},function(e,t,r){function n(e){return o(this,e).get(e)}var o=r(21);e.exports=n},function(e,t,r){function n(e){return o(this,e).has(e)}var o=r(21);e.exports=n},function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=r(21);e.exports=n},function(e,t,r){function n(e){var t=o(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}var o=r(251),i=500;e.exports=n},function(e,t,r){var n=r(221),o=n(Object.keys,Object);e.exports=o},function(e,t,r){(function(e){var n=r(56),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&n.process,u=function(){try{return s&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,r(28)(e))},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){function n(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=i(n.length-t,0),u=Array(s);++a<s;)u[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(u),o(e,this,l)}}var o=r(145),i=Math.max;e.exports=n},function(e,t){function r(e){return this.__data__.set(e,n),this}var n="__lodash_hash_undefined__";e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}e.exports=r},function(e,t,r){var n=r(173),o=r(228),i=o(n);e.exports=i},function(e,t){function r(e){var t=0,r=0;return function(){var a=i(),s=o-(a-r);if(r=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var n=500,o=16,i=Date.now;e.exports=r},function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=r(17);e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var o=r(17),i=r(29),a=r(30),s=200;e.exports=n},function(e,t,r){function n(e){return i(e)?a(e):o(e)}var o=r(151),i=r(58),a=r(236);e.exports=n},function(e,t,r){var n=r(218),o=r(15),i=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,u=n(function(e){e=o(e);var t=[];return i.test(e)&&t.push(""),e.replace(a,function(e,r,n,o){t.push(n?o.replace(s,"$1"):r||e)}),t});e.exports=u},function(e,t){function r(e){return e.match(m)||[]}var n="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",a="\\ufe0e\\ufe0f",s="["+n+"]",u="["+o+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+u+"|"+l+")",f="[^"+n+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=c+"?",y="["+a+"]?",_="(?:"+d+"(?:"+[f,p,h].join("|")+")"+y+v+")*",b=y+v+_,g="(?:"+[f+u+"?",u,p,h,s].join("|")+")",m=RegExp(l+"(?="+l+")|"+g+b,"g");e.exports=r},function(e,t){function r(e){return e.match(U)||[]}var n="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",i="\\u20d0-\\u20f0",a="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",u="\\xac\\xb1\\xd7\\xf7",l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",c="\\u2000-\\u206f",f=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="A-Z\\xc0-\\xd6\\xd8-\\xde",h="\\ufe0e\\ufe0f",d=u+l+c+f,v="['’]",y="["+d+"]",_="["+o+i+"]",b="\\d+",g="["+a+"]",m="["+s+"]",w="[^"+n+d+b+a+s+p+"]",x="\\ud83c[\\udffb-\\udfff]",j="(?:"+_+"|"+x+")",O="[^"+n+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",S="["+p+"]",P="\\u200d",C="(?:"+m+"|"+w+")",A="(?:"+S+"|"+w+")",T="(?:"+v+"(?:d|ll|m|re|s|t|ve))?",M="(?:"+v+"(?:D|LL|M|RE|S|T|VE))?",R=j+"?",I="["+h+"]?",F="(?:"+P+"(?:"+[O,E,k].join("|")+")"+I+R+")*",D=I+R+F,L="(?:"+[g,E,k].join("|")+")"+D,U=RegExp([S+"?"+m+"+"+T+"(?="+[y,S,"$"].join("|")+")",A+"+"+M+"(?="+[y,S+C,"$"].join("|")+")",S+"?"+C+"+"+T,S+"+"+M,b,L].join("|"),"g");e.exports=r},function(e,t,r){var n=r(239),o=r(187),i=o(function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)});e.exports=i},function(e,t,r){function n(e){return i(o(e).toLowerCase())}var o=r(15),i=r(259);e.exports=n},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t,r){function n(e){return e=i(e),e&&e.replace(a,o).replace(c,"")}var o=r(191),i=r(15),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\\u0300-\\u036f\\ufe20-\\ufe23",u="\\u20d0-\\u20f0",l="["+s+u+"]",c=RegExp(l,"g");e.exports=n},function(e,t,r){function n(e,t,r){var n=s(e)?o:i;return r&&u(e,t,r)&&(t=void 0),n(e,a(t,3))}var o=r(146),i=r(154),a=r(20),s=r(6),u=r(59);e.exports=n},function(e,t,r){var n=r(188),o=r(244),i=n(o);e.exports=i},function(e,t,r){function n(e,t,r){var n=e?e.length:0;if(!n)return-1;var u=null==r?0:a(r);return u<0&&(u=s(n+u,0)),o(e,i(t,3),u)}var o=r(155),i=r(20),a=r(69),s=Math.max;e.exports=n},function(e,t,r){function n(e){var t=e?e.length:0;return t?o(e,1):[]}var o=r(50);e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=r(52);e.exports=n},function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=r(158),i=r(197);e.exports=n},function(e,t,r){function n(e){return"number"==typeof e&&i(e)}var o=r(5),i=o.isFinite;e.exports=n},function(e,t,r){function n(e){return"number"==typeof e&&e==o(e)}var o=r(69);e.exports=n},function(e,t,r){function n(e,t){var r={};return t=a(t,3),i(e,function(e,n,i){o(r,t(e,n,i),e)}),r}var o=r(49),i=r(51),a=r(20);e.exports=n},function(e,t,r){function n(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(n.Cache||o),r}var o=r(30),i="Expected a function";n.Cache=o,e.exports=n},function(e,t,r){var n=r(18),o=r(167),i=r(194),a=r(13),s=i(function(e,t){return null==e?{}:o(e,n(t,a))});e.exports=s},function(e,t,r){function n(e){return a(e)?o(s(e)):i(e)}var o=r(169),i=r(170),a=r(22),s=r(13);e.exports=n},function(e,t,r){var n=r(189),o=n();e.exports=o},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){function n(e){return e&&e.length?o(e,i):0}var o=r(175),i=r(35);e.exports=n},function(e,t,r){function n(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=l.test(e);return r||c.test(e)?f(e.slice(2),r?2:8):u.test(e)?a:+e}var o=r(9),i=r(25),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;e.exports=n},function(e,t,r){var n=r(190),o=r(8),i=n(o);e.exports=i},function(e,t,r){var n=r(186),o=n("toUpperCase");e.exports=o},function(e,t,r){function n(e){return e?o(e,i(e)):[]}var o=r(180),i=r(8);e.exports=n},function(e,t,r){function n(e,t,r){return e=a(e),t=r?void 0:t,void 0===t?i(e)?s(e):o(e):e.match(t)||[]}var o=r(152),i=r(198),a=r(15),s=r(237);e.exports=n},function(e,t){"use strict";function r(e,t,r,n,o,i,a){for(var s=0,u=0,l=0,c=0,f=0,p=e.shape[0],h=e.shape[1],d=Math.min(t,p-1),v=Math.min(r,h-1),y=void 0===i?1:i,_=void 0===a?0:a;s<=d;){c=0;var b=Math.min(s+v,h-1);for(l=0;l<=b;l++)c+=e.get(s,l)*n.get(l);o.set(s,c*y+_*o.get(s)),s++}if(s<p)for(u=0;s+v<h;){for(c=0,l=0;l<=d+v;l++)f=u+l+1,c+=e.get(s,f)*n.get(f);if(o.set(s,c*y+_*o.get(s)),s++,u++,s===p)break}if(s<p)for(u++;s-d<h;){for(c=0,l=u;l<h;l++)c+=e.get(s,l)*n.get(l);if(o.set(s,c*y+_*o.get(s)),s++,u++,s===p)break}return!0}e.exports=r},function(e,t,r){"use strict";function n(e,t,r,n,i){for(var a=o.dot,s=t.shape[0]-1;s>=0;s--)i.set(s,i.get(s)*n+e*a(t.pick(s,null),r));return!0}var o=r(26);e.exports=n},function(e,t){"use strict";function r(){console.error("GER (rank 1 operation A := alpha*x*y' + A) not yet implemented")}e.exports=r},function(e,t){"use strict";e.exports=function(e){var t,r=e.data,n=e.stride[0],o=e.offset,i=0;for(t=e.shape[0]-1;t>=0;t--,o+=n)i+=Math.abs(r[o]);return i}},function(e,t){"use strict";e.exports=function(e,t,r){var n,o=t.data,i=r.data,a=t.stride[0],s=r.stride[0],u=t.offset,l=r.offset;for(n=t.shape[0]-1;n>=0;n--,u+=a,l+=s)i[l]+=e*o[u]}},function(e,t){"use strict";e.exports=function(e,t){var r,n=e.data,o=t.data,i=e.stride[0],a=t.stride[0],s=e.offset,u=t.offset;for(r=e.shape[0]-1;r>=0;r--,s+=i,u+=a)o[u]=n[s]}},function(e,t){"use strict";e.exports=function(e,t,r){var n,o=t.data,i=r.data,a=t.stride[0],s=r.stride[0],u=t.offset,l=r.offset;for(n=t.shape[0]-1;n>=0;n--,u+=a,l+=s)i[l]=e*o[u]}},function(e,t){"use strict";e.exports=function(e,t){var r,n,o=e.data,i=e.stride[0],a=e.offset,s=0;if(e===t)for(r=e.shape[0]-1;r>=0;r--,a+=i)n=o[a],s+=n*n;else{var u=t.data,l=t.stride[0],c=t.offset;for(r=e.shape[0]-1;r>=0;r--,a+=i,c+=l)s+=u[c]*o[a]}return s}},function(e,t){"use strict";e.exports=function(e){var t,r,n,o=-(1/0),i=e.data,a=e.stride[0],s=e.offset,u=e.shape[0];for(t=0;t<u;t++,s+=a)r=Math.abs(i[s]),r>o&&(o=r,n=t);return n}},function(e,t){"use strict";var r=function(e,t){if(0===e&&0===t)return 0;var r=Math.abs(e),n=Math.abs(t),o=Math.min(r,n),i=Math.max(r,n);return o/=i,i*Math.sqrt(1+o*o)};e.exports=function(e){var t,n,o=e.data,i=e.stride[0],a=e.offset,s=0;for(t=e.shape[0]-1;t>=0;t--,a+=i)n=o[a],s=r(s,n);return s}},function(e,t){"use strict";Math.sign=Math.sign||function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},e.exports=function(e,t,r){var n=0,o=0,i=0,a=0,s=0;return 0===t?(n=Math.sign(e),o=0,i=Math.abs(e)):0===e?(n=0,o=Math.sign(t),i=Math.abs(t)):Math.abs(e)>Math.abs(t)?(a=t/e,s=Math.sign(e)*Math.sqrt(1+a*a),n=1/s,o=a*n,i=e*s):(a=e/t,s=Math.sign(e)*Math.sqrt(1+a*a),o=1/s,n=a*o,i=t*s),void 0!==r&&r.length>2?(r[0]=n,r[1]=o,r[2]=i,void 0):[n,o,i]}},function(e,t){"use strict";e.exports=function(e,t){var r,n=t.data,o=t.stride[0],i=t.offset;for(r=t.shape[0]-1;r>=0;r--,i+=o)n[i]*=e}},function(e,t){"use strict";e.exports=function(e,t){var r,n,o=e.data,i=t.data,a=e.stride[0],s=t.stride[0],u=e.offset,l=t.offset;for(r=e.shape[0]-1;r>=0;r--,u+=a,l+=s)n=o[u],o[u]=i[l],i[l]=n}},function(e,t){"use strict";function r(){console.error("SBMV (symmetric banded matrix vector multiply) not yet implemented")}e.exports=r},function(e,t,r){"use strict";(function(e){function t(){console.error("SPMV (symmetric packed matrix vector multiply) not yet implemented")}e.exporst=t}).call(t,r(28)(e))},function(e,t){"use strict";function r(){console.error("SPR (symmetric packed rank 1 operation A := alpha*x*y' + A) not yet implemented")}e.exports=r},function(e,t){"use strict";function r(){console.error("SPR (symmetric packed rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}e.exports=r},function(e,t,r){"use strict";function n(e,t,r,n,i,a){var s=e.shape[0],u=n||!0,l=void 0===i?1:i,c=void 0===a?0:a,f=0,p=0,h=0,d=0;if(0===c)for(f=0;f<r.shape[0];++f)r.set(f,0);else 1!==c&&o.scal(c,r);if(0===l)return!0;if(1===l)if(u)for(p=0;p<s;++p){for(h=t.get(p),d=0,r.set(p,r.get(p)+h*e.get(p,p)),f=p+1;f<s;++f)r.set(f,r.get(f)+h*e.get(f,p)),d+=e.get(f,p)*t.get(f);r.set(p,r.get(p)+d)}else for(p=0;p<s;++p){for(h=t.get(p),d=0,f=0;f<=p-1;++f)r.set(f,r.get(f)+h*e.get(f,p)),d+=e.get(f,p)*t.get(f);r.set(p,r.get(p)+h*e.get(p,p)+d)}else if(u)for(p=0;p<s;++p){for(h=l*t.get(p),d=0,r.set(p,r.get(p)+h*e.get(p,p)),f=p+1;f<s;++f)r.set(f,r.get(f)+h*e.get(f,p)),d+=e.get(f,p)*t.get(f);r.set(p,r.get(p)+l*d)}else for(p=0;p<s;++p){for(h=l*t.get(p),d=0,f=0;f<=p-1;++f)r.set(f,r.get(f)+h*e.get(f,p)),d+=e.get(f,p)*t.get(f);r.set(p,r.get(p)+h*e.get(p,p)+l*d)}return!0}var o=r(26);e.exports=n},function(e,t){"use strict";function r(){console.error("SYR (symmetric rank 1 operation A := alpha*x*y' + A) not yet implemented")}e.exports=r},function(e,t){"use strict";function r(){console.error("SYR (symmetric rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}e.exports=r},function(e,t){"use strict";function r(){console.error("TBMV (triangular banded matrix vector multiply) not yet implemented")}e.exports=r},function(e,t,r){"use strict";(function(e){function t(){console.error("TBSV (triangular banded matrix solver) not yet implemented")}e.exporst=t}).call(t,r(28)(e))},function(e,t){"use strict";function r(){console.error("TPSV (triangular packed matrix solver) not yet implemented")}e.exports=r},function(e,t,r){"use strict";function n(e,t,r){var n=o.dot,i=e.shape[1],a=0;if(r)for(a=i-1;a>=0;a--)t.set(a,n(e.pick(a,null).hi(a+1),t.hi(a+1)));else for(a=0;a<i;a++)t.set(a,n(e.pick(a,null).lo(a),t.lo(a)));return!0}var o=r(26);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){var n=o.dot,i=e.shape[1],a=0;if(r)for(t.set(0,t.get(0)/e.get(0,0)),a=1;a<i;a++)t.set(a,(t.get(a)-n(e.pick(a,null).hi(a),t.hi(a)))/e.get(a,a));else for(t.set(i-1,t.get(i-1)/e.get(i-1,i-1)),a=i-2;a>=0;a--)t.set(a,(t.get(a)-n(e.pick(a,null).lo(a+1),t.lo(a+1)))/e.get(a,a));return!0}var o=r(26);e.exports=n},function(e,t,r){"use strict";function n(){var e,t,r,n,u,l,c,f,p,h;if(n=o({},s),0===arguments.length)throw new Error("Array of ndarrays to concatenate must not be empty");if(Array.isArray(arguments[0])?(r=arguments[0],o(n,arguments[1]||{})):2===arguments.length&&(r=arguments[1],e=arguments[0],o(n,arguments[2]||{})),0===r.length)throw new Error("Array of ndarrays to concatenate must not be empty");for(u=0;u<r.length;u++)if(c){if(r[u].dimension!==c.length)throw new Error("all arrays must have the same dimensionality");for(l=1;l<r[u].shape.length;l++)if(r[u].shape[l]!==c[l])throw new Error("last n-1 dimensions of concatenated rows must have the same size");c[0]+=r[u].shape[0]}else c=r[u].shape.slice(0);if(e){if(c[0]!==e.shape[0])throw new Error("first dimension of output array must match the total number of concatenated rows")}else e=a.zeros(c,n.dtype);for(l=0,f=0;l<r.length;l++)t=r[l],p=t.shape[0],h=e.lo(f).hi(p),i.assign(h,t),f+=p;return e}e.exports=n;var o=r(292),i=r(2),a=r(291),s={dtype:"double"}},function(e,t){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var n=32;t.INT_BITS=n,t.INT_MAX=2147483647,t.INT_MIN=-1<<n-1,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>n-1;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var o=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,o=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--o;e[t]=n<<o&255}}(o),t.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t){"use strict";function r(e,t,n){var o=0|e[n];if(o<=0)return[];var i,a=new Array(o);if(n===e.length-1)for(i=0;i<o;++i)a[i]=t;else for(i=0;i<o;++i)a[i]=r(e,t,n+1);return a}function n(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function o(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return n(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}e.exports=o},[313,288,289],[314,290],function(e,t){function r(e,t){if(!t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}e.exports=r},function(e,t){"use strict";function r(e,t){return"native"===t[1]?[e,"d0=",e,".length,",e,"d1=",e,"[0].length,"].join(""):[e,"d0=",e,".shape[0],",e,"d1=",e,".shape[1],",e,"s0=",e,".stride[0],",e,"s1=",e,".stride[1],",e,"o=",e,".offset,",e,"d=",e,".data,"].join("")}function n(e,t,r,n,o,i){var a=[];return"native"===r[1]?e[0]&&(n?a.push("var ",t,"p=",t,"[",n,"];"):a.push("var ",t,"p=",t,"[0];")):n&&o?i?a.push("var ",t,"t0=",t,"s",e[0],",",t,"t1=",t,"s",e[1],"-",t,"s",e[0],"*",i,",",t,"p=",t,"o+",n,"*",t,"s0+",o,"*",t,"s1;"):a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",n,"*",t,"s0+",o,"*",t,"s1;"):n?a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",n,"*",t,"s0;"):o?a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",o,"*",t,"s1;"):a.push("var ",t,"t0=",t,"s",e[0],",",t,"t1=",t,"s",e[1],"-",t,"s",e[0],"*",t,"d",e[0],",",t,"p=",t,"o;"),a}function o(e,t,r,n,o){var i=[];return"native"===r[1]?e[0]&&1===n&&i.push(t,"p=",t,"[",o,"+1]"):i.push(t,"p+=",t,"t",n,";"),i}function i(e,t,r,n,o,i){var a=[];return"native"===r[1]?e[0]?a.push(t,"p[",o,"]=",i,";"):a.push(t,"[",n,"][",o,"]=",i,";"):"generic"===r[1]?a.push(t,"d.set(",t,"p,",i,");"):a.push(t,"d[",t,"p]=",i,";"),a}function a(e,t,r,n,o){var i=[];return"native"===r[1]?e[0]?i.push(t,"p[",o,"]"):i.push(t,"[",n,"][",o,"]"):"generic"===r[1]?i.push(t,"d.get(",t,"p)"):i.push(t,"d[",t,"p]"),i.join("")}function s(e,t,r,s,u){var l=[],c="r"===e[0]?[1,0]:[0,1],f=[1,0],p=[0,1],h=["i","j"];return l.push.apply(l,n(c,"o",e)),c[1]?(l.push("for(j=0;j<od1;++j){"),l.push("for(i=0;i<od0;++i){")):(l.push("for(i=0;i<od0;++i){"),l.push("for(j=0;j<od1;++j){")),l.push.apply(l,n(f,"a",t,"i")),l.push.apply(l,n(p,"b",r,void 0,"j")),l.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",a(f,"a",t,"i","k"),"*",a(p,"b",r,"k","j"),";"),l.push.apply(l,o(f,"a",t,0,"k")),l.push.apply(l,o(p,"b",r,0,"k")),l.push("}"),s&&l.push("r*=A;"),u&&l.push("r+=B*",a(c,"o",e,"i","j"),";"),l.push.apply(l,i(c,"o",e,"i","j","r")),l.push.apply(l,o(c,"o",e,0,h[1])),l.push("}"),l.push.apply(l,o(c,"o",e,1,h[0])),l.push("}"),l}function u(e,t){var r,s=[],u="r"===e[0]?[1,0]:[0,1];return t&&s.push("if(B!==1.0){"),s.push.apply(s,n(u,"o",e)),u[0]?(s.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),r=["i","j"]):(s.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),r=["j","i"]),t?s.push.apply(s,i(u,"o",e,"i","j","B*"+a(u,"o",e,"i","j"))):s.push.apply(s,i(u,"o",e,"i","j","0")),s.push.apply(s,o(u,"o",e,0,r[1])),s.push("}"),s.push.apply(s,o(u,"o",e,1,r[0])),s.push("}"),t&&s.push("}"),s}function l(e,t,r,s,l){var c=[],p=["od0","od1","ad1"],h=[1,0],d=[1,0],v=[0,1];c.push.apply(c,u(e,l));for(var y=0;y<3;++y)c.push("for(var i",y,"=",p[y],";i",y,">0;){","var w",y,"=",f,";","if(i",y,"<",f,"){","w",y,"=i",y,";","i",y,"=0;","}else{","i",y,"-=",f,";","}");c.push.apply(c,n(h,"o",e,"i0","i1","w1")),c.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),c.push.apply(c,n(d,"a",t,"(i0+i)","i2")),c.push.apply(c,n(v,"b",r,"i2","(i1+j)")),c.push("for(k=0;k<w2;++k){"),c.push("r+=",a(d,"a",t,"(i0+i)","(i2+k)"),"*",a(v,"b",r,"(i2+k)","(i1+j)"),";"),c.push.apply(c,o(d,"a",t,0,"(i2+k)")),c.push.apply(c,o(v,"b",r,0,"(i2+k)")),c.push("}");var _="r";return s&&(_="A*r"),c.push.apply(c,i(h,"o",e,"(i0+i)","(i1+j)",_+"+"+a(h,"o",e,"(i0+i)","(i1+j)"))),c.push.apply(c,o(h,"o",e,0,"(i1+j)")),c.push("}"),c.push.apply(c,o(h,"o",e,1,"(i0+i)")),c.push("}}}}"),c}function c(e,t,n,o,i){var a=["gemm",e[0],e[1],"a",t[0],t[1],"b",n[0],n[1],o?"alpha":"",i?"beta":""].join(""),u=["function ",a,"(o,a,b,A,B){","var ",r("o",e),r("a",t),r("b",n),"i,j,k;"];"r"===t[0]&&"c"===n[0]?u.push.apply(u,s(e,t,n,o,i)):u.push.apply(u,l(e,t,n,o,i)),u.push("}return ",a);var c=new Function(u.join(""));return c()}e.exports=c;var f=32},[310,296],[311,297],[312,295],134,function(e,t,r){"use strict";function n(){var e,t,r,n;if(2===arguments.length?(t=arguments[0],n=arguments[1]):3===arguments.length&&(r=arguments[0],t=arguments[1],n=arguments[2]),!Array.isArray(n))throw new Error("second argument of tile must be an array of repetition counts for each dimension");var a=t.shape.slice(0),s=a.slice(0),u=Math.max(s.length,n.length);for(e=0;e<u;e++)if(a[e]=void 0===a[e]?1:a[e],n[e]=void 0===n[e]?1:n[e],s[e]=(void 0===s[e]?1:s[e])*n[e],0===s[e])throw new Error("Number of tiles must be greater than zero");r||(r=o.zeros(s,t.dtype));var l=1;for(e=0;e<n.length;e++)l*=n[e];var c=new Array(n.length);for(e=0;e<n.length;e++)c[e]=0;var f=s.slice(0);for(h=0;h<s.length;h++)f[h]=h<t.dimension?null:0;for(e=0;e<l;e++){for(h=t.dimension;h<s.length;h++)f[h]=c[h];var p=r.pick.apply(r,f);if(p=p.lo.apply(p,c),p=p.hi.apply(p,t.shape),i.assign(p,t),e===l-1)break;for(var h=u-1;h>=0&&(c[h]+=a[h],c[h]===s[h]);)c[h]=0,h--}return r}var o=r(302),i=r(2);e.exports=n},288,289,[313,299,300],[314,301],289,function(e,t){"use strict";function r(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}e.exports=r},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||n(e)||!!e._isBuffer)}},function(e,t){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function o(e){var t,n,o,i,a,s,u=e.length;a=r(e),s=new c(3*u/4-a),o=a>0?u-4:u;var f=0;for(t=0,n=0;t<o;t+=4,n+=3)i=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[f++]=i>>16&255,s[f++]=i>>8&255,s[f++]=255&i;return 2===a?(i=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[f++]=255&i):1===a&&(i=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[f++]=i>>8&255,s[f++]=255&i),s}function i(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function a(e,t,r){for(var n,o=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(n));return o.join("")}function s(e){for(var t,r=e.length,n=r%3,o="",i=[],s=16383,l=0,c=r-n;l<c;l+=s)i.push(a(e,l,l+s>c?c:l+s));return 1===n?(t=e[r-1],o+=u[t>>2],o+=u[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=u[t>>10],o+=u[t>>4&63],o+=u[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=n,t.toByteArray=o,t.fromByteArray=s;for(var u=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=f.length;p<h;++p)u[p]=f[p],l[f.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?o-1:0,p=r?-1:1,h=e[t+f];for(f+=p,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=p,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,n),i-=l}return(h?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[r+h]=255&a,h+=d,a/=256,l-=8);e[r+h-d]|=128*v}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(72)},function(e,t,r,n){"use strict";function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new o;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if("array"===i||"object"==typeof i&&i.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if("index"===i){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[n]);t.argTypes[n]="offset",t.offsetArgs.push({array:i.array,offset:i.offset}),t.offsetArgIndex.push(n)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,a(t)}var a=r(n);e.exports=i},function(e,t,r,n){"use strict";function o(e,t,r){var n,o,i=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],c=0,f=0;for(n=0;n<i;++n)l.push(["i",n,"=0"].join(""));for(o=0;o<a;++o)for(n=0;n<i;++n)f=c,c=e[n],0===n?l.push(["d",o,"s",n,"=t",o,"p",c].join("")):l.push(["d",o,"s",n,"=(t",o,"p",c,"-s",f,"*t",o,"p",f,")"].join(""));for(u.push("var "+l.join(",")),n=i-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<i;++n){for(f=c,c=e[n],o=0;o<a;++o)u.push(["p",o,"+=d",o,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(e,t,r,n){for(var i=t.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<a;++c)l.push(["var offset",c,"=p",c].join(""));for(var c=e;c<i;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<a;++c){for(var f=["offset"+c],p=e;p<i;++p)f.push(["j",p,"*t",c,"p",t[p]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}l.push(o(t,r,n));for(var c=e;c<i;++c)l.push("}");return l.join("\n")}function a(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function s(e,t,r){for(var n=e.body,o=[],i=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),p=t.offsetArgs[f];c=p.array,l="+q"+f;case"array":l="p"+c+l;var h="l"+a,d="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(o.push(["var ",h,"=",d,".get(",l,")"].join("")),n=n.replace(u,h),i.push([d,".set(",l,",",h,")"].join(""))):n=n.replace(u,[d,".get(",l,")"].join("")):n=n.replace(u,[d,"[",l,"]"].join("")):"generic"===r[c]?(o.push(["var ",h,"=",d,".get(",l,")"].join("")),n=n.replace(u,h),s.lvalue&&i.push([d,".set(",l,",",h,")"].join(""))):(o.push(["var ",h,"=",d,"[",l,"]"].join("")),n=n.replace(u,h),s.lvalue&&i.push([d,"[",l,"]=",h].join("")));else{for(var v=[s.name],y=[l],_=0;_<Math.abs(t.arrayBlockIndices[c]);_++)v.push("\\s*\\[([^\\]]+)\\]"),y.push("$"+(_+1)+"*t"+c+"b"+_);if(u=new RegExp(v.join(""),"g"),l=y.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[d,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[o.join("\n"),n,i.join("\n")].join("\n").trim()}function u(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var o=e[n],i=o.match(/\d+/);i=i?i[0]:"",0===o.charAt(0)?t[n]="u"+o.charAt(1)+i:t[n]=o.charAt(0)+i,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function l(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,n=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)l[f]=t[2*f],n[f]=t[2*f+1];for(var p=[],h=[],d=[],v=[],y=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(d.push(0),v.push(r),p.push(r),h.push(r+e.arrayBlockIndices[f])):(d.push(e.arrayBlockIndices[f]),v.push(e.arrayBlockIndices[f]+r),p.push(0),h.push(e.arrayBlockIndices[f]));for(var _=[],b=0;b<n[f].length;b++)d[f]<=n[f][b]&&n[f][b]<v[f]&&_.push(n[f][b]-d[f]);y.push(_)}for(var g=["SS"],m=["'use strict'"],w=[],b=0;b<r;++b)w.push(["s",b,"=SS[",b,"]"].join(""));for(var f=0;f<e.arrayArgs.length;++f){g.push("a"+f),g.push("t"+f),g.push("p"+f);for(var b=0;b<r;++b)w.push(["t",f,"p",b,"=t",f,"[",d[f]+b,"]"].join(""));for(var b=0;b<Math.abs(e.arrayBlockIndices[f]);++b)w.push(["t",f,"b",b,"=t",f,"[",p[f]+b,"]"].join(""))}for(var f=0;f<e.scalarArgs.length;++f)g.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var x=new Array(r),f=0;f<r;++f)x[f]="0";w.push(["index=[",x.join(","),"]"].join(""))}for(var f=0;f<e.offsetArgs.length;++f){for(var j=e.offsetArgs[f],O=[],b=0;b<j.offset.length;++b)0!==j.offset[b]&&(1===j.offset[b]?O.push(["t",j.array,"p",b].join("")):O.push([j.offset[b],"*t",j.array,"p",b].join("")));0===O.length?w.push("q"+f+"=0"):w.push(["q",f,"=",O.join("+")].join(""))}var E=c([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(E),m.push("var "+w.join(","));for(var f=0;f<e.arrayArgs.length;++f)m.push("p"+f+"|=0");e.pre.body.length>3&&m.push(s(e.pre,e,l));var k=s(e.body,e,l),S=a(y);S<r?m.push(i(S,y[0],e,k)):m.push(o(y[0],e,k)),e.post.body.length>3&&m.push(s(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+m.join("\n")+"\n----------");var P=[e.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",S,u(l)].join(""),C=new Function(["function ",P,"(",g.join(","),"){",m.join("\n"),"} return ",P].join(""));return C()}var c=r(n);e.exports=l},function(e,t,r,n){"use strict";function o(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var p=new Function("compile",t.join("\n"));return p(i.bind(void 0,e))}var i=r(n);e.exports=o},function(e,t,r,n,o){(function(e,i){"use strict";function a(e){if(e){var t=e.length||e.byteLength,r=m.log2(t);O[r].push(e)}}function s(e){a(e.buffer)}function u(e){var e=m.nextPow2(e),t=m.log2(e),r=O[t];return r.length>0?r.pop():new ArrayBuffer(e)}function l(e){return new Uint8Array(u(e),0,e)}function c(e){return new Uint16Array(u(2*e),0,e)}function f(e){return new Uint32Array(u(4*e),0,e)}function p(e){return new Int8Array(u(e),0,e)}function h(e){return new Int16Array(u(2*e),0,e)}function d(e){return new Int32Array(u(4*e),0,e)}function v(e){return new Float32Array(u(4*e),0,e)}function y(e){return new Float64Array(u(8*e),0,e)}function _(e){return x?new Uint8ClampedArray(u(e),0,e):l(e)}function b(e){return new DataView(u(e),0,e)}function g(e){e=m.nextPow2(e);var t=m.log2(e),r=E[t];return r.length>0?r.pop():new i(e)}var m=r(n),w=r(o);e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:w([32,0]),UINT16:w([32,0]),UINT32:w([32,0]),INT8:w([32,0]),INT16:w([32,0]),INT32:w([32,0]),FLOAT:w([32,0]),DOUBLE:w([32,0]),DATA:w([32,0]),UINT8C:w([32,0]),BUFFER:w([32,0])});var x="undefined"!=typeof Uint8ClampedArray,j=e.__TYPEDARRAY_POOL;j.UINT8C||(j.UINT8C=w([32,0])),j.BUFFER||(j.BUFFER=w([32,0]));var O=j.DATA,E=j.BUFFER;t.free=function(e){if(i.isBuffer(e))E[m.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|m.log2(t);O[r].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeInt8=t.freeInt16=t.freeInt32=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=s,t.freeArrayBuffer=a,t.freeBuffer=function(e){E[m.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return u(e);switch(t){case"uint8":return l(e);case"uint16":return c(e);case"uint32":return f(e);case"int8":return p(e);case"int16":return h(e);case"int32":return d(e);case"float":case"float32":return v(e);case"double":case"float64":return y(e);case"uint8_clamped":return _(e);case"buffer":return g(e);case"data":case"dataview":return b(e);default:return null}return null},t.mallocArrayBuffer=u,t.mallocUint8=l,t.mallocUint16=c,t.mallocUint32=f,t.mallocInt8=p,t.mallocInt16=h,t.mallocInt32=d,t.mallocFloat32=t.mallocFloat=v,t.mallocFloat64=t.mallocDouble=y,t.mallocUint8Clamped=_,t.mallocDataView=b,t.mallocBuffer=g,t.clearCache=function(){for(var e=0;e<32;++e)j.UINT8[e].length=0,j.UINT16[e].length=0,j.UINT32[e].length=0,j.INT8[e].length=0,j.INT16[e].length=0,j.INT32[e].length=0,j.FLOAT[e].length=0,j.DOUBLE[e].length=0,j.UINT8C[e].length=0,O[e].length=0,E[e].length=0}}).call(t,r(12),r(41).Buffer)},function(e,t,r,n){"use strict";function o(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var r=p.malloc(e.size,t),n=c(r,e.shape);return f.assign(n,e),n}function i(e,t){t||(t="double");for(var r=1,n=new Array(e.length),o=e.length-1;o>=0;--o)n[o]=r,r*=e[o];return c(p.malloc(r,t),e,n,0)}function a(e){"generic"!==e.dtype&&"array"!==e.dtype&&p.free(e.data)}function s(e,t){t||(t="double");for(var r=1,n=new Array(e.length),o=e.length-1;o>=0;--o)n[o]=r,r*=e[o];for(var i=p.malloc(r,t),o=0;o<r;++o)i[o]=0;return c(i,e,n,0)}function u(e,t){t||(t="double");for(var r=1,n=new Array(e.length),o=e.length-1;o>=0;--o)n[o]=r,r*=e[o];for(var i=p.malloc(r,t),o=0;o<r;++o)i[o]=1;return c(i,e,n,0)}function l(e,t){var r,n;t||(t="double");var o=1,i=new Array(e.length);for(r=e.length-1;r>=0;--r)i[r]=o,o*=e[r];var a=p.malloc(o,t);for(r=0;r<o;++r)a[r]=0;var s=1/0,u=0;for(r=e.length-1;r>=0;r--)u+=i[r],s=Math.min(s,e[r]);for(r=0,n=0;r<s;r++,n+=u)a[n]=1;return c(a,e,i,0)}var c=r(11),f=r(2),p=r(n);t.clone=o,t.malloc=i,t.free=a,t.zeros=s,t.ones=u,t.eye=l}]))});